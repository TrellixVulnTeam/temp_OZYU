
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>2. GNAT Project Manager &#8212; GPR Tools User&#39;s Guide 2021 documentation</title>
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="3. Building with GPRbuild" href="building_with_gprbuild.html" />
    <link rel="prev" title="1. Introduction" href="introduction.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="building_with_gprbuild.html" title="3. Building with GPRbuild"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="introduction.html" title="1. Introduction"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../gprbuild_ug.html">GPR Tools User&#39;s Guide 2021 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">2. </span>GNAT Project Manager</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="gnat-project-manager">
<span id="id1"></span><h1><span class="section-number">2. </span>GNAT Project Manager<a class="headerlink" href="#gnat-project-manager" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<span id="gnat-project-manager-introduction"></span><h2><span class="section-number">2.1. </span>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This chapter describes GNAT’s <em>Project Manager</em>, a facility that allows
you to manage complex builds involving a number of source files, directories,
and options for different system configurations. In particular,
project files allow you to specify properties including:</p>
<ul class="simple">
<li><p>The directory or set of directories containing the source files, and/or the
names of the specific source files themselves;</p></li>
<li><p>The directory in which the compiler’s output
(<code class="file docutils literal notranslate"><span class="pre">ALI</span></code> files, object files, tree files, etc.) is to be placed;</p></li>
<li><p>The directory in which the executable programs are to be placed;</p></li>
<li><p>Switch settings, which can be applied either globally or to individual
compilation units, for any of the project-enabled tools;</p></li>
<li><p>The source files containing the main subprograms to be built;</p></li>
<li><p>The source programming language(s); and</p></li>
<li><p>Source file naming conventions, which can be specified either globally or for
individual compilation units (see <a class="reference internal" href="#naming-schemes"><span class="std std-ref">Naming Schemes</span></a>).</p></li>
</ul>
<p>Project files also allow you to:</p>
<ul class="simple">
<li><p>Change any of the above settings depending on external values, thus enabling
the reuse of the projects in various <strong>scenarios</strong> (see <a class="reference internal" href="#scenarios-in-projects"><span class="std std-ref">Scenarios in Projects</span></a>); and</p></li>
<li><p>Automatically build libraries as part of the build process
(see <a class="reference internal" href="#library-projects"><span class="std std-ref">Library Projects</span></a>).</p></li>
</ul>
<p>Project files are written in an Ada-like syntax, using familiar
notions such as packages, context clauses, declarations, default values,
assignments, and inheritance (see <a class="reference internal" href="#project-file-reference"><span class="std std-ref">Project File Reference</span></a>).</p>
<p>Project files can depend upon other project files in a modular fashion,
simplifying complex system integration and project reuse.</p>
<ul class="simple" id="index-0">
<li><p>One project can <strong>import</strong> other projects containing needed source files.
More generally, the Project Manager lets you structure large development
efforts into possibly interrelated subsystems, where build decisions are
delegated to the subsystem level, and thus different compilation
environments (switch settings) are used for different subsystems.
See <a class="reference internal" href="#organizing-projects-into-subsystems"><span class="std std-ref">Organizing Projects into Subsystems</span></a>.</p></li>
</ul>
<ul class="simple" id="index-1">
<li><p>You can organize GNAT projects in a hierarchy: a project
can <strong>extend</strong> a base project, inheriting its source files and
optionally overriding any of them with alternative versions.
See <a class="reference internal" href="#project-extension"><span class="std std-ref">Project Extension</span></a>.</p></li>
</ul>
<span class="target" id="index-2"></span><p id="index-3">Several tools support project files, generally in addition to specifying
the information on the command line itself. They share common switches
to control the loading of the project (in particular
<code class="samp docutils literal notranslate"><span class="pre">-P</span><em><span class="pre">projectfile</span></em></code> to define the applicable project file and
<code class="samp docutils literal notranslate"><span class="pre">-X</span><em><span class="pre">vbl</span></em><span class="pre">=</span><em><span class="pre">value</span></em></code> to set the value of an external variable).</p>
<p>The Project Manager supports a wide range of development strategies,
for systems of all sizes.  Here are some typical practices that are
easily handled:</p>
<ul class="simple">
<li><p>Using a common set of source files and generating object files in different
directories via different switch settings. This can be used for instance to
generate separate sets of object files for debugging and for production.</p></li>
<li><p>Using a mostly shared set of source files with different versions of
some units or subunits. This can be used for instance to group and hide
all OS dependencies in a small number of implementation units.</p></li>
</ul>
<p>Project files can be used to achieve some of the effects of a source
versioning system (for example, defining separate projects for
the different sets of sources that comprise different releases) but the
Project Manager is independent of any source configuration management tool
that might be used by the developers.</p>
<p>The sections below use an example-driven approach to present and illustrate
the various concepts related to projects.</p>
</div>
<div class="section" id="building-with-projects">
<span id="id2"></span><h2><span class="section-number">2.2. </span>Building with Projects<a class="headerlink" href="#building-with-projects" title="Permalink to this headline">¶</a></h2>
<p>In its simplest form a project may be used in a stand-alone fashion to build
a single executable, and this section will focus on such a setup in order
to introduce the main ideas.
Later sections will extend this basic model to more complex and realistic
configurations.</p>
<p>The following concepts are the foundation of project files, and will be further
detailed later in this documentation. They are summarized here as a reference.</p>
<dl class="simple" id="index-4">
<dt><strong>Project file</strong>:</dt><dd><p>A text file expressed in an Ada-like syntax, generally with the <code class="file docutils literal notranslate"><span class="pre">.gpr</span></code>
extension. It defines build-related characteristics of an application.
The characteristics include the list of sources, the location of those
sources, the location for the generated object files, the name of
the main program, and the options for the various tools involved in the
build process.</p>
</dd>
</dl>
<dl class="simple" id="index-5">
<dt><strong>Project attribute</strong>:</dt><dd><p>A specific project characteristic is defined by an <cite>attribute clause</cite>. Its
value is a string or a sequence of strings. All settings in a project
are defined through a list of predefined attributes with precise
semantics. See <a class="reference internal" href="#attributes"><span class="std std-ref">Attributes</span></a>.</p>
</dd>
</dl>
<dl class="simple" id="index-6">
<dt><strong>Package in a project</strong>:</dt><dd><p>Global attributes are defined at the top level of a project.
Attributes affecting specific tools are grouped in a
package whose name is related to tool’s function. The most common
packages are <cite>Builder</cite>, <cite>Compiler</cite>, <cite>Binder</cite>,
and <cite>Linker</cite>. See <a class="reference internal" href="#packages"><span class="std std-ref">Packages</span></a>.</p>
</dd>
</dl>
<dl id="index-7">
<dt><strong>Project variables</strong>:</dt><dd><p>In addition to attributes, a project can use variables to store intermediate
values and avoid duplication in complex expressions. Variables can be initialized
with external values coming from the environment.
A frequent use of variables is to define <cite>scenarios</cite>.
See <a class="reference internal" href="#external-values"><span class="std std-ref">External Values</span></a>, <a class="reference internal" href="#scenarios-in-projects"><span class="std std-ref">Scenarios in Projects</span></a>, and <a class="reference internal" href="#variables"><span class="std std-ref">Variables</span></a>.</p>
</dd>
<dt><strong>Source files</strong> and <strong>source directories</strong>:</dt><dd><p>A source file is associated with a language through a naming convention. For
instance, <code class="file docutils literal notranslate"><span class="pre">foo.c</span></code> is typically the name of a C source file;
<code class="file docutils literal notranslate"><span class="pre">bar.ads</span></code> or <code class="file docutils literal notranslate"><span class="pre">bar.1.ada</span></code> are two common naming conventions for a
file containing an Ada spec. A compilable entity is often composed of a main
source file and potentially several auxiliary ones, such as header files in C.
The naming conventions can be user-defined (see <a class="reference internal" href="#naming-schemes"><span class="std std-ref">Naming Schemes</span></a>), and will
drive the builder to call the appropriate compiler for the given source file.</p>
<p>Source files are searched for in the source directories associated with the
project through the <strong>Source_Dirs</strong> attribute. By default, all the files (in
these source directories) following the naming conventions associated with the
declared languages are considered to be part of the project. It is also
possible to limit the list of source files using the <strong>Source_Files</strong> or
<strong>Source_List_File</strong> attributes. Note that those last two attributes only
accept basenames with no directory information.</p>
</dd>
<dt><strong>Object files</strong> and <strong>object directory</strong>:</dt><dd><p>An object file is an intermediate file produced by the compiler from a
compilation unit. It is used by post-compilation tools to produce
final executables or libraries. Object files produced in the context of
a given project are stored in a single directory that can be specified by the
<strong>Object_Dir</strong> attribute. In order to store objects in
two or more object directories, the system must be split into
distinct subsystems, each with its own project file.</p>
</dd>
</dl>
<p>The following subsections introduce the attributes of interest
for simple build needs. Here is the basic setup that will be used in the
following examples:</p>
<blockquote>
<div><p>The Ada source files <code class="file docutils literal notranslate"><span class="pre">pack.ads</span></code>, <code class="file docutils literal notranslate"><span class="pre">pack.adb</span></code>, and
<code class="file docutils literal notranslate"><span class="pre">proc.adb</span></code> are in   the <code class="file docutils literal notranslate"><span class="pre">common/</span></code> directory. The file
<code class="file docutils literal notranslate"><span class="pre">proc.adb</span></code> contains an Ada main subprogram <code class="docutils literal notranslate"><span class="pre">Proc</span></code> that
<code class="samp docutils literal notranslate"><span class="pre">with</span></code>s package <code class="docutils literal notranslate"><span class="pre">Pack</span></code>. We want to compile these source files
with the switch <code class="xref std std-option docutils literal notranslate"><span class="pre">-O2</span></code>, and place the resulting files in
the <code class="file docutils literal notranslate"><span class="pre">common/obj/</span></code> directory. Here is the directory structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">common</span><span class="o">/</span>
  <span class="n">pack</span><span class="o">.</span><span class="n">ads</span>
  <span class="n">pack</span><span class="o">.</span><span class="n">adb</span>
  <span class="n">proc</span><span class="o">.</span><span class="n">adb</span>
<span class="n">common</span><span class="o">/</span><span class="n">obj</span><span class="o">/</span>
  <span class="n">proc</span><span class="o">.</span><span class="n">ali</span><span class="p">,</span> <span class="n">proc</span><span class="o">.</span><span class="n">o</span> <span class="n">pack</span><span class="o">.</span><span class="n">ali</span><span class="p">,</span> <span class="n">pack</span><span class="o">.</span><span class="n">o</span><span class="p">,</span> <span class="n">proc</span><span class="o">.</span><span class="n">exe</span>
</pre></div>
</div>
</div></blockquote>
<p>Our project is to be called <em>Build</em>. The name of the
file is the name of the project (case-insensitive) with the
<code class="file docutils literal notranslate"><span class="pre">.gpr</span></code> extension, therefore the project file name is
<code class="file docutils literal notranslate"><span class="pre">build.gpr</span></code>. This is not mandatory, but a warning is issued
when this convention is not followed.</p>
<p>This is a very simple example, and as stated above, a single project
file is sufficient. We will thus create a new file, <code class="file docutils literal notranslate"><span class="pre">build.gpr</span></code>, that
initially contains an empty project declaration:</p>
<blockquote>
<div><div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="k">project </span><span class="nf">Build</span> <span class="kr">is</span><span class="p"></span>
<span class="k">end </span><span class="nf">Build</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>Note that repeating the project name after <code class="docutils literal notranslate"><span class="pre">end</span></code> is mandatory.</p>
<div class="section" id="source-files-and-directories">
<span id="id3"></span><h3><span class="section-number">2.2.1. </span>Source Files and Directories<a class="headerlink" href="#source-files-and-directories" title="Permalink to this headline">¶</a></h3>
<p>When you create a new project, the first task is to specify where the
corresponding source files are located. These are the only settings that are needed by all
the tools that will use this project (builder, compiler, binder and linker for
the compilation, IDEs to edit the source files, etc.).</p>
<p id="index-8">The first step is thus to declare the source directories, which are the directories
to be searched to find source files. In the current example,
the <code class="file docutils literal notranslate"><span class="pre">common</span></code> directory is the only source directory.</p>
<p id="index-9">There are several ways to specify the source directories:</p>
<ul>
<li><p>When the attribute <strong>Source_Dirs</strong> is not defined, a project contains a
single source directory which is the one where the project file itself
resides. In our example, if <code class="file docutils literal notranslate"><span class="pre">build.gpr</span></code> is placed in the <code class="file docutils literal notranslate"><span class="pre">common</span></code>
directory, the project will have the needed implicit source directory.</p></li>
<li><p>The attribute <strong>Source_Dirs</strong> can be set to a list of path names, one
for each of the source directories. Such paths can either be absolute
names (for instance <code class="file docutils literal notranslate"><span class="pre">&quot;/usr/local/common/&quot;</span></code> on Unix), or relative to the
directory in which the project file resides (for instance <code class="file docutils literal notranslate"><span class="pre">&quot;.&quot;</span></code> if
<code class="file docutils literal notranslate"><span class="pre">build.gpr</span></code> is inside <code class="file docutils literal notranslate"><span class="pre">common/</span></code>, or <code class="file docutils literal notranslate"><span class="pre">&quot;common&quot;</span></code> if it is one level up).
Each of the source directories must exist and be readable.</p>
<p id="index-10">The syntax for directories is platform specific. For portability, however,
the project manager will always properly translate Unix-like path names to
the native format of the specific platform. For instance, when the same
project file is to be used both on Unix and Windows, <code class="file docutils literal notranslate"><span class="pre">&quot;/&quot;</span></code> should be used as
the directory separator rather than <code class="file docutils literal notranslate"><span class="pre">&quot;\&quot;</span></code>.</p>
</li>
<li><p>The attribute <strong>Source_Dirs</strong> can automatically include subdirectories
using a special syntax inspired by some Unix shells. If any of the paths in
the list ends with “<code class="file docutils literal notranslate"><span class="pre">**</span></code>”, then that path and all its subdirectories
(recursively) are included in the list of source directories. For instance,
“<code class="file docutils literal notranslate"><span class="pre">**</span></code>” and “<code class="file docutils literal notranslate"><span class="pre">./**</span></code>” represent the complete directory tree rooted at
the directory in which the project file resides.</p></li>
</ul>
<span class="target" id="index-11"></span><p id="index-12">When using the <code class="docutils literal notranslate"><span class="pre">Source_Dirs</span></code> construct, you may sometimes find it convenient
to also use the attribute <code class="docutils literal notranslate"><span class="pre">Excluded_Source_Dirs</span></code>, which is also a list of
paths. Each entry specifies a directory whose immediate content, not including
subdirs, is to be excluded. It is also possible to exclude a complete
directory subtree using the <code class="docutils literal notranslate"><span class="pre">**</span></code> notation.</p>
<p id="index-13">It is often desirable to remove, from the source directories, directory
subtrees rooted at some subdirectories. An example is the subdirectories
created by a Version Control System such as Subversion that creates directory
subtrees rooted at a subdirectory named <code class="file docutils literal notranslate"><span class="pre">.svn</span></code>. To do that, attribute
<strong>Ignore_Source_Sub_Dirs</strong> can be used. It specifies the list of simple
file names or patterns for the roots of these undesirable directory subtrees.</p>
<blockquote>
<div><div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="kr">for</span><span class="p"> </span><span class="n">Source_Dirs</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;./**&quot;</span><span class="o">)</span><span class="p">;</span>
<span class="kr">for</span><span class="p"> </span><span class="n">Ignore_Source_Sub_Dirs</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;.svn&quot;</span><span class="p">,</span> <span class="s">&quot;@*&quot;</span><span class="o">)</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>With the declaration of attribute Ignore_Source_Sub_Dirs above, .svn subtrees
as weel as subtrees rooted at subdirectories with a name starting with ‘&#64;’
are not part of the source directories of the project.</p>
<p>When applied to the simple example, and because we generally prefer to have
the project file at the top-level directory rather than mixed with the sources,
we will add the relevant definition for the <code class="docutils literal notranslate"><span class="pre">Source_Dirs</span></code> attribute to
our <code class="file docutils literal notranslate"><span class="pre">build.gpr</span></code> project file:</p>
<blockquote>
<div><div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="k">project </span><span class="nf">Build</span> <span class="kr">is</span><span class="p"></span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Source_Dirs</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;common&quot;</span><span class="o">)</span><span class="p">;</span>  <span class="c">--  &lt;&lt;&lt;&lt;</span>
<span class="k">end </span><span class="nf">Build</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>Once the source directories have been specified, you may need to indicate
specific source files of interest. By default, all source files present in the source
directories are considered by the Project Manager. When this is not desired,
it is possible to explicitly specify the list of sources to consider.
In such a case, only source file base names are indicated and not
their absolute or relative path names. The project manager is in charge of
locating the specified source files in the specified source directories.</p>
<ul>
<li><p>By default, the project manager searches for all source files of all
specified languages in all the source directories.</p>
<p>Since the project manager was initially developed for Ada environments, the
default language is usually Ada and the above project file is complete: it
defines without ambiguity the sources composing the project: that is,
all the sources in subdirectory <code class="file docutils literal notranslate"><span class="pre">common</span></code> for the default language (Ada) using
the default naming convention.</p>
<p id="index-14">However, when compiling a multi-language application, or a pure C
application, the project manager must be told which languages are of
interest, which is done by setting the <strong>Languages</strong> attribute to a list of
strings, each of which is the name of a language.</p>
<p id="index-15">Even when only Ada is used, the default naming might not be suitable. Indeed,
how does the project manager distinguish an Ada source file from any other
file? Project files can describe the naming scheme used for source files,
and override the default (see <a class="reference internal" href="#naming-schemes"><span class="std std-ref">Naming Schemes</span></a>). The default is the
standard GNAT extension (<code class="file docutils literal notranslate"><span class="pre">.adb</span></code> for bodies and <code class="file docutils literal notranslate"><span class="pre">.ads</span></code> for
specs), which is what is used in our example, and thus no naming scheme
is explicitly specified.
See <a class="reference internal" href="#naming-schemes"><span class="std std-ref">Naming Schemes</span></a>.</p>
</li>
<li id="index-16"><p><cite>Source_Files</cite>.
In some cases, source directories might contain files that should not be
included in a project. One can specify the explicit list of file names to
be considered through the <strong>Source_Files</strong> attribute.
When this attribute is defined, instead of looking at every file in the
source directories, the project manager takes only those names into
consideration and reports  errors if they cannot be found in the source
directories or do not correspond to the naming scheme.</p></li>
<li><p>It is sometimes useful to have a project with no
sources (most of the time because the attributes defined in the project
file will be reused in other projects, as explained in
<a class="reference internal" href="#organizing-projects-into-subsystems"><span class="std std-ref">Organizing Projects into Subsystems</span></a>. To do this, the attribute
<code class="docutils literal notranslate"><span class="pre">Source_Files</span></code> is set to the empty list, i.e. <code class="docutils literal notranslate"><span class="pre">()</span></code>. Alternatively,
<code class="docutils literal notranslate"><span class="pre">Source_Dirs</span></code> can be set to the empty list, with the same
result.</p>
</li>
<li id="index-17"><p><cite>Source_List_File</cite>.
If there is a large number of files, it might be more convenient to use
the attribute <strong>Source_List_File</strong>, which specifies the full path of a file.
This file must contain a list of source file names (one per line, no
directory information) that are searched as if they had been defined
through <code class="docutils literal notranslate"><span class="pre">Source_Files</span></code>. Such a file can easily be created through
external tools.</p>
<p>A warning is issued if both attributes <code class="docutils literal notranslate"><span class="pre">Source_Files</span></code> and
<code class="docutils literal notranslate"><span class="pre">Source_List_File</span></code> are given explicit values. In this case, the
attribute <code class="docutils literal notranslate"><span class="pre">Source_Files</span></code> prevails.</p>
<span class="target" id="index-18"></span><span class="target" id="index-19"></span></li>
<li id="index-20"><p><cite>Excluded_Source_Files</cite>.
Specifying an explicit list of files is not always convenient. Instead it might
be preferable to use the default search rules with specific exceptions.
This can be done through the attribute <strong>Excluded_Source_Files</strong>
(or its synonym <strong>Locally_Removed_Files</strong>).
Its value is the list of file names that should not be taken into account.
This attribute is often used when extending a project,
see <a class="reference internal" href="#project-extension"><span class="std std-ref">Project Extension</span></a>. A similar attribute
<strong>Excluded_Source_List_File</strong> plays the same
role but takes the name of file containing file names similarly to
<code class="docutils literal notranslate"><span class="pre">Source_List_File</span></code>.</p></li>
</ul>
<p>In most simple cases, such as the above example, the default source file search
behavior provides the expected result, and we do not need to add anything after
setting <code class="docutils literal notranslate"><span class="pre">Source_Dirs</span></code>. The Project Manager automatically finds
<code class="file docutils literal notranslate"><span class="pre">pack.ads</span></code>, <code class="file docutils literal notranslate"><span class="pre">pack.adb</span></code>, and <code class="file docutils literal notranslate"><span class="pre">proc.adb</span></code> as source files of the
project.</p>
<p>Note that by default a warning is issued when a project has no sources attached
to it and this is not explicitly indicated in the project file.</p>
</div>
<div class="section" id="duplicate-sources-in-projects">
<span id="id4"></span><h3><span class="section-number">2.2.2. </span>Duplicate Sources in Projects<a class="headerlink" href="#duplicate-sources-in-projects" title="Permalink to this headline">¶</a></h3>
<p>If the order of the source directories is known statically, that is if
<code class="docutils literal notranslate"><span class="pre">&quot;/**&quot;</span></code> is not used in the string list for <code class="docutils literal notranslate"><span class="pre">Source_Dirs</span></code>, then there may
be several files with the same name situated in different directories of the
project. In this case, only the file in the first directory is considered as a
source of the project and the others are hidden. If <code class="docutils literal notranslate"><span class="pre">&quot;/**&quot;</span></code> is used in the
string list for <code class="docutils literal notranslate"><span class="pre">Source_Dirs</span></code>, it is an error to have several files with the
same name in the same directory <code class="docutils literal notranslate"><span class="pre">&quot;/**&quot;</span></code> subtree, since there would be an
ambiguity as to which one should be used.</p>
<p>If there are two sources with the same name in different directories of the same <code class="docutils literal notranslate"><span class="pre">&quot;/**&quot;</span></code>
subtree, one way to resolve the problem is to exclude the directory of the
file that should not be used as a source of the project.</p>
</div>
<div class="section" id="object-and-exec-directory">
<span id="id5"></span><h3><span class="section-number">2.2.3. </span>Object and Exec Directory<a class="headerlink" href="#object-and-exec-directory" title="Permalink to this headline">¶</a></h3>
<p>Another consideration when designing a project is to decide where the compiler should
place the object files. In fact, the compiler and other tools might create
several different kinds of files (for GNAT, there is the object file and the ALI
file). One of the important concepts in projects is that most
tools may consider source directories as read-only and thus do not attempt to create
new or temporary files there. Instead, all such files are created in the object
directory. (This is not true for project-aware IDEs, one of whose purposes is
to create the source files.)</p>
<span class="target" id="index-21"></span><p id="index-22">The object directory is specified through the <strong>Object_Dir</strong> attribute.
Its value is the path to the object directory, either absolute or
relative to the directory containing the project file. This
directory must already exist and be readable and writable, although
some tools have a switch to create the directory if needed (See
the switch <code class="xref std std-option docutils literal notranslate"><span class="pre">-p</span></code> for <em>gprbuild</em>).</p>
<p>If the attribute <code class="docutils literal notranslate"><span class="pre">Object_Dir</span></code> is not specified, it defaults to
the directory containing the project file.</p>
<p>For our example, we can specify the object directory in this way
(assuming that the project file will reside in the parent directory
of <code class="file docutils literal notranslate"><span class="pre">common</span></code>):</p>
<blockquote>
<div><div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="k">project </span><span class="nf">Build</span> <span class="kr">is</span><span class="p"></span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Source_Dirs</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;common&quot;</span><span class="o">)</span><span class="p">;</span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Object_Dir</span> <span class="kr">use</span><span class="p"> </span><span class="s">&quot;common/obj&quot;</span><span class="p">;</span>   <span class="c">--  &lt;&lt;&lt;&lt;</span>
<span class="k">end </span><span class="nf">Build</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>As mentioned earlier, <em>there is a single object directory per project</em>. As a
result, if you have an existing system where the object files are spread across
several directories, one option is to move all of them into the same directory if
you want to build it with a single project file. An alternative approach is
described below (see <a class="reference internal" href="#organizing-projects-into-subsystems"><span class="std std-ref">Organizing Projects into Subsystems</span></a>), allowing each
separate object directory to be associated with a corresponding subsystem
of the application.</p>
<p>Incidentally, the directory designated by the <code class="docutils literal notranslate"><span class="pre">Object_Dir</span></code> attribute may
be used by project aware tools other than the compilation toolchain to store
reports or intermediate files.</p>
<p id="index-23">When the <em>linker</em> is called, it usually creates an executable. By
default, this executable is placed in the project’s object directory.
However in some situations it may be convenient to store it in elsewhere.
This can be done through the <strong>Exec_Dir</strong> attribute, which, like
<code class="docutils literal notranslate"><span class="pre">Object_Dir</span></code> contains a single absolute or relative path and must point to
an existing and writable directory, unless you ask the tool to create it on
your behalf. If neither <code class="docutils literal notranslate"><span class="pre">Object_Dir</span></code> nor <code class="docutils literal notranslate"><span class="pre">Exec_Dir</span></code> is specified then
the executable is placed in the directory containing the project file.</p>
<p>In our example, let’s specify that the executable is to
be placed in the same directory as the project file <code class="file docutils literal notranslate"><span class="pre">build.gpr</span></code>.
The project file is now:</p>
<blockquote>
<div><div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="k">project </span><span class="nf">Build</span> <span class="kr">is</span><span class="p"></span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Source_Dirs</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;common&quot;</span><span class="o">)</span><span class="p">;</span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Object_Dir</span> <span class="kr">use</span><span class="p"> </span><span class="s">&quot;obj&quot;</span><span class="p">;</span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Exec_Dir</span> <span class="kr">use</span><span class="p"> </span><span class="s">&quot;.&quot;</span><span class="p">;</span>  <span class="c">--   &lt;&lt;&lt;&lt;</span>
<span class="k">end </span><span class="nf">Build</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="main-subprograms">
<span id="id6"></span><h3><span class="section-number">2.2.4. </span>Main Subprograms<a class="headerlink" href="#main-subprograms" title="Permalink to this headline">¶</a></h3>
<p>An important role of a project file is to identify the executable(s) that
will be built. It does this by specifying the source file for the
main subprogram (for Ada) or the file that contains the <code class="docutils literal notranslate"><span class="pre">main</span></code> function
(for C).</p>
<p>There can be any number of such main files within a given project, and thus
several executables can be built from a single project file. Of
course, a given executable might not (and in general will not) need all the
source files referenced by the project. As opposed to other build mechanisms
such as through a <em>Makefile</em>, you do not need to specify the list of
dependencies of each executable. The project-aware builder knows enough of the
semantics of the languages to build and link only the necessary elements.</p>
<p id="index-24">The list of main files is specified via the <strong>Main</strong> attribute. It contains
a list of file names (no directories). If a project defines this
attribute, it is not necessary to identify  main files on the
command line when invoking a builder, and editors like
<em>GPS</em> will be able to create extra menus to spawn or debug the
corresponding executables.</p>
<blockquote>
<div><div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="k">project </span><span class="nf">Build</span> <span class="kr">is</span><span class="p"></span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Source_Dirs</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;common&quot;</span><span class="o">)</span><span class="p">;</span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Object_Dir</span> <span class="kr">use</span><span class="p"> </span><span class="s">&quot;obj&quot;</span><span class="p">;</span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Exec_Dir</span> <span class="kr">use</span><span class="p"> </span><span class="s">&quot;.&quot;</span><span class="p">;</span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Main</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;proc.adb&quot;</span><span class="o">)</span><span class="p">;</span>  <span class="c">--   &lt;&lt;&lt;&lt;</span>
<span class="k">end </span><span class="nf">Build</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>If this attribute is defined in the project, then spawning the builder
with a command such as</p>
<blockquote>
<div><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>gprbuild -Pbuild
</pre></div>
</div>
</div></blockquote>
<p>automatically builds all the executables corresponding to the files
listed in the <em>Main</em> attribute. It is possible to specify one
or more executables on the command line to build a subset of them.</p>
<p>One or more spaces may be placed between the <code class="xref std std-option docutils literal notranslate"><span class="pre">-P</span></code> and the project
name, and the project name may be a simple name (no file extension) or
a path for the project file.  Thus each of the following is equivalent to
the command above:</p>
<blockquote>
<div><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>gprbuild -P build
gprbuild -P build.gpr
gprbuild -P ./build.gpr
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="tools-options-in-project-files">
<span id="id7"></span><h3><span class="section-number">2.2.5. </span>Tools Options in Project Files<a class="headerlink" href="#tools-options-in-project-files" title="Permalink to this headline">¶</a></h3>
<p>We now have a project file that fully describes our environment, and it can be
used to build the application with a simple <em>GPRbuild</em> command as shown
above. In fact, the empty project that we saw at
the beginning (with no attribute definitions) could already achieve this effect
if it was placed in the <code class="file docutils literal notranslate"><span class="pre">common</span></code> directory.</p>
<p>Of course, we might want more control. This section shows you how to specify
the compilation switches that the various tools involved in the building of the
executable should use.</p>
<p id="index-25">Since source names and locations are described in the project file, it is not
necessary to use switches on the command line for this purpose (such
as <code class="xref std std-option docutils literal notranslate"><span class="pre">-I</span></code> for gcc). This removes a major source of command line length overflow.
Clearly, the builders will have to communicate this information one way or
another to the underlying compilers and tools they call, but they usually use
various text files, such as response files, for this purpose and thus are not subject
to command line overflow.</p>
<p>Several tools are used to create an executable: the compiler
produces object files from the source files; the binder (when the language is Ada)
creates a “source” file that, among other things,  takes care of elaboration
issues and global variable initialization; and the linker gathers everything
into a single executable. All these tools are known to
the project manager and will be invoked with user-defined switches from the
project files. To obtain this effect, a project file feature known as
a <em>package</em> is used.</p>
<p id="index-26">A project file contains zero or more <strong>packages</strong>, each of which
defines the attributes specific to one tool (or one set of tools). Project
files use an Ada-like syntax for packages. Package names permitted in project
files are restricted to a predefined set (see <a class="reference internal" href="#packages"><span class="std std-ref">Packages</span></a>), and the contents
of packages are limited to a small set of constructs and attributes
(see <a class="reference internal" href="#attributes"><span class="std std-ref">Attributes</span></a>).</p>
<p>Our example project file below includes several empty packages. At
this stage, they could all be omitted since they are empty, but they show which
packages would be involved in the build process.</p>
<blockquote>
<div><div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="k">project </span><span class="nf">Build</span> <span class="kr">is</span><span class="p"></span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Source_Dirs</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;common&quot;</span><span class="o">)</span><span class="p">;</span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Object_Dir</span> <span class="kr">use</span><span class="p"> </span><span class="s">&quot;obj&quot;</span><span class="p">;</span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Exec_Dir</span> <span class="kr">use</span><span class="p"> </span><span class="s">&quot;.&quot;</span><span class="p">;</span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Main</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;proc.adb&quot;</span><span class="o">)</span><span class="p">;</span>

   <span class="k">package </span><span class="nf">Builder</span> <span class="kr">is</span><span class="p"> </span> <span class="c">--&lt;&lt;&lt;  for gprbuild</span>
   <span class="k">end </span><span class="nf">Builder</span><span class="p">;</span>

   <span class="k">package </span><span class="nf">Compiler</span> <span class="kr">is</span><span class="p"> </span><span class="c">--&lt;&lt;&lt;  for the compiler</span>
   <span class="k">end </span><span class="nf">Compiler</span><span class="p">;</span>

   <span class="k">package </span><span class="nf">Binder</span> <span class="kr">is</span><span class="p"> </span>  <span class="c">--&lt;&lt;&lt;  for the binder</span>
   <span class="k">end </span><span class="nf">Binder</span><span class="p">;</span>

   <span class="k">package </span><span class="nf">Linker</span> <span class="kr">is</span><span class="p"> </span>  <span class="c">--&lt;&lt;&lt;  for the linker</span>
   <span class="k">end </span><span class="nf">Linker</span><span class="p">;</span>
<span class="k">end </span><span class="nf">Build</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>Let’s first examine the compiler switches. As stated in the initial description
of the example, we want to compile all files with <code class="xref std std-option docutils literal notranslate"><span class="pre">-O2</span></code>. This is a
compiler switch, although it is typical, on the command line, to pass it to the
builder which then passes it to the compiler. We recommend directly using
the correct package, which will make the setup easier to understand.</p>
<p>Several attributes can be used to specify the switches:</p>
<span class="target" id="index-27"></span><p id="index-28"><strong>Default_Switches</strong>:</p>
<blockquote>
<div><p>This illustrates the concept of an <strong>indexed attribute</strong>. When
such an attribute is defined, you must supply an <em>index</em> in the form of a
literal string.
In the case of <em>Default_Switches</em>, the index is the name of the
language to which the switches apply (since a different compiler will
likely be used for each language, and each compiler has its own set of
switches). The value of the attribute is a list of switches.</p>
<p>In this example, we want to compile all Ada source files with the switch
<code class="xref std std-option docutils literal notranslate"><span class="pre">-O2</span></code>; the resulting <cite>Compiler</cite> package is as follows:</p>
<div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="k">package </span><span class="nf">Compiler</span> <span class="kr">is</span><span class="p"></span>
  <span class="kr">for</span><span class="p"> </span><span class="n">Default_Switches</span> <span class="o">(</span><span class="s">&quot;Ada&quot;</span><span class="o">)</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;-O2&quot;</span><span class="o">)</span><span class="p">;</span>
<span class="k">end </span><span class="nf">Compiler</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p id="index-29"><strong>Switches</strong>:</p>
<blockquote>
<div><p>In some cases, we might want to use specific switches
for one or more files. For instance, compiling <code class="file docutils literal notranslate"><span class="pre">proc.adb</span></code> might not be
desirable at a high level of optimization.
In such a case, the <em>Switches</em>
attribute (indexed by the file name) can be used and will override the
switches defined by <em>Default_Switches</em>. The <em>Compiler</em> package in our
project file would become:</p>
<div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="k">package </span><span class="nf">Compiler</span> <span class="kr">is</span><span class="p"></span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Default_Switches</span> <span class="o">(</span><span class="s">&quot;Ada&quot;</span><span class="o">)</span>
       <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;-O2&quot;</span><span class="o">)</span><span class="p">;</span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Switches</span> <span class="o">(</span><span class="s">&quot;proc.adb&quot;</span><span class="o">)</span>
       <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;-O0&quot;</span><span class="o">)</span><span class="p">;</span>
<span class="k">end </span><span class="nf">Compiler</span><span class="p">;</span>
</pre></div>
</div>
<p><em>Switches</em> may take a pattern as an index, such as in:</p>
<div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="k">package </span><span class="nf">Compiler</span> <span class="kr">is</span><span class="p"></span>
  <span class="kr">for</span><span class="p"> </span><span class="n">Default_Switches</span> <span class="o">(</span><span class="s">&quot;Ada&quot;</span><span class="o">)</span>
      <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;-O2&quot;</span><span class="o">)</span><span class="p">;</span>
  <span class="kr">for</span><span class="p"> </span><span class="n">Switches</span> <span class="o">(</span><span class="s">&quot;pkg*&quot;</span><span class="o">)</span>
      <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;-O0&quot;</span><span class="o">)</span><span class="p">;</span>
<span class="k">end </span><span class="nf">Compiler</span><span class="p">;</span>
</pre></div>
</div>
<p>Sources <code class="file docutils literal notranslate"><span class="pre">pkg.adb</span></code> and <code class="file docutils literal notranslate"><span class="pre">pkg-child.adb</span></code> would be compiled with <code class="xref std std-option docutils literal notranslate"><span class="pre">-O0</span></code>,
not <code class="xref std std-option docutils literal notranslate"><span class="pre">-O2</span></code>.</p>
<p><em>Switches</em> can also be given a language name as index instead of a file
name in which case it has the same semantics as <em>Default_Switches</em>.
However, indexes with wild cards are never valid for language name.</p>
</div></blockquote>
<p id="index-30"><strong>Local_Configuration_Pragmas</strong>:</p>
<blockquote>
<div><p>This attribute may specify the path
of a file containing configuration pragmas for use by the Ada compiler,
such as <cite>pragma Restrictions (No_Tasking)</cite>. These pragmas will be
used for all the sources of the project.</p>
</div></blockquote>
<span class="target" id="index-31"></span><span class="target" id="index-32"></span><p id="index-33">The switches for the other tools are defined in a similar manner through the
<strong>Default_Switches</strong> and <strong>Switches</strong> attributes, respectively in the
<em>Builder</em> package (for <em>GPRbuild</em>),
the <em>Binder</em> package (binding Ada executables) and the <em>Linker</em>
package (for linking executables).</p>
</div>
<div class="section" id="compiling-with-project-files">
<span id="id8"></span><h3><span class="section-number">2.2.6. </span>Compiling with Project Files<a class="headerlink" href="#compiling-with-project-files" title="Permalink to this headline">¶</a></h3>
<p>Now that our project file is written, let’s build our executable.
Here is the command we would use from the command line:</p>
<blockquote>
<div><div class="highlight-sh notranslate" id="index-34"><div class="highlight"><pre><span></span>gprbuild -Pbuild
</pre></div>
</div>
</div></blockquote>
<p>This will automatically build the executables specified in the
<em>Main</em> attribute: for each, it will compile or recompile the
sources for which the object file does not exist or is not up-to-date; it
will then run the binder; and finally run the linker to create the
executable itself.</p>
<p>The <em>GPRbuild</em> builder can automatically manage C files the
same way: create the file <code class="file docutils literal notranslate"><span class="pre">utils.c</span></code> in the <code class="file docutils literal notranslate"><span class="pre">common</span></code> directory,
set the attribute <em>Languages</em> to <cite>“(Ada, C)”</cite>, and re-run</p>
<blockquote>
<div><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>gprbuild -Pbuild
</pre></div>
</div>
</div></blockquote>
<p><em>GPRbuild</em> knows how to recompile the C files and will
recompile them only if one of their dependencies has changed. No direct
indication on how to build the various elements is given in the
project file, which describes the project properties rather than a
set of actions to be executed. Here is the invocation of
<em>GPRbuild</em> when building a multi-language program:</p>
<blockquote>
<div><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ gprbuild -Pbuild
gcc -c proc.adb
gcc -c pack.adb
gcc -c utils.c
gprbind proc
...
gcc proc.o -o proc
</pre></div>
</div>
</div></blockquote>
<p>Notice the three steps described earlier:</p>
<ul class="simple">
<li><p>The first three gcc commands correspond to the compilation phase.</p></li>
<li><p>The gprbind command corresponds to the post-compilation phase.</p></li>
<li><p>The last gcc command corresponds to the final link.</p></li>
</ul>
<p id="index-35">The default output of <em>GPRbuild</em> is reasonably simple and easy
to understand. In particular, some of the less frequently used commands are not
shown, and some parameters are abbreviated. Thus it is not possible to rerun the
effect of the <em>GPRbuild</em> command by cut-and-pasting its output.
The <code class="xref std std-option docutils literal notranslate"><span class="pre">-v</span></code> option to <em>GPRbuild</em> provides a much more verbose output which includes,
among other information, more complete compilation, post-compilation and link
commands.</p>
</div>
<div class="section" id="executable-file-names">
<span id="id9"></span><h3><span class="section-number">2.2.7. </span>Executable File Names<a class="headerlink" href="#executable-file-names" title="Permalink to this headline">¶</a></h3>
<p id="index-36">By default, the executable name corresponding to a main file is
computed from the main source file name. Through the attribute
<strong>Executable</strong> in package <code class="docutils literal notranslate"><span class="pre">Builder</span></code>, it is possible to change
this default.</p>
<p>For instance, instead of building an executable named <code class="docutils literal notranslate"><span class="pre">&quot;proc&quot;</span></code> (or <code class="docutils literal notranslate"><span class="pre">&quot;proc.exe&quot;</span></code>
on Windows), we could configure our project file to build <code class="docutils literal notranslate"><span class="pre">proc1</span></code>
(respectively <code class="docutils literal notranslate"><span class="pre">proc1.exe</span></code>) as follows:</p>
<blockquote>
<div><div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="k">project </span><span class="nf">Build</span> <span class="kr">is</span><span class="p"></span>
   <span class="o">...</span>  <span class="c">--  same as before</span>
   <span class="k">package </span><span class="nf">Builder</span> <span class="kr">is</span><span class="p"></span>
      <span class="kr">for</span><span class="p"> </span><span class="n">Executable</span> <span class="o">(</span><span class="s">&quot;proc.adb&quot;</span><span class="o">)</span> <span class="kr">use</span><span class="p"> </span><span class="s">&quot;proc1&quot;</span><span class="p">;</span>
   <span class="k">end </span><span class="nf">Builder</span>
<span class="k">end </span><span class="nf">Build</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p id="index-37">Attribute <strong>Executable_Suffix</strong>, when specified, changes the suffix
of the executable files when no attribute <code class="docutils literal notranslate"><span class="pre">Executable</span></code> applies:
its value replaces the platform-specific executable suffix.
The default executable suffix is the empty string empty on Unix and <code class="docutils literal notranslate"><span class="pre">&quot;.exe&quot;</span></code> on Windows.</p>
<p>It is also possible to change the name of the produced executable by using the
command line switch <code class="xref std std-option docutils literal notranslate"><span class="pre">-o</span></code>. However, when several main programs are defined in the project,
it is not possible to use the <code class="xref std std-option docutils literal notranslate"><span class="pre">-o</span></code> switch; then the only way to change the
names of the executable is through the attributes <code class="docutils literal notranslate"><span class="pre">Executable</span></code> and
<code class="docutils literal notranslate"><span class="pre">Executable_Suffix</span></code>.</p>
</div>
<div class="section" id="using-variables-to-avoid-duplication">
<span id="id10"></span><h3><span class="section-number">2.2.8. </span>Using Variables to Avoid Duplication<a class="headerlink" href="#using-variables-to-avoid-duplication" title="Permalink to this headline">¶</a></h3>
<p>To illustrate some other project capabilities, here is a slightly more complex
project using similar sources and a main program in C:</p>
<blockquote>
<div><div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="k">project </span><span class="nf">C_Main</span> <span class="kr">is</span><span class="p"></span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Languages</span>    <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;Ada&quot;</span><span class="p">,</span> <span class="s">&quot;C&quot;</span><span class="o">)</span><span class="p">;</span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Source_Dirs</span>  <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;common&quot;</span><span class="o">)</span><span class="p">;</span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Object_Dir</span>   <span class="kr">use</span><span class="p"> </span> <span class="s">&quot;obj&quot;</span><span class="p">;</span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Main</span>         <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;main.c&quot;</span><span class="o">)</span><span class="p">;</span>
   <span class="k">package </span><span class="nf">Compiler</span> <span class="kr">is</span><span class="p"></span>
      <span class="n">C_Switches</span> <span class="o">:=</span> <span class="o">(</span><span class="s">&quot;-pedantic&quot;</span><span class="o">)</span><span class="p">;</span>
      <span class="kr">for</span><span class="p"> </span><span class="n">Default_Switches</span> <span class="o">(</span><span class="s">&quot;C&quot;</span><span class="o">)</span>   <span class="kr">use</span><span class="p"> </span><span class="n">C_Switches</span><span class="p">;</span>
      <span class="kr">for</span><span class="p"> </span><span class="n">Default_Switches</span> <span class="o">(</span><span class="s">&quot;Ada&quot;</span><span class="o">)</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;-gnaty&quot;</span><span class="o">)</span><span class="p">;</span>
      <span class="kr">for</span><span class="p"> </span><span class="n">Switches</span> <span class="o">(</span><span class="s">&quot;main.c&quot;</span><span class="o">)</span> <span class="kr">use</span><span class="p"> </span><span class="n">C_Switches</span> <span class="o">&amp;</span> <span class="o">(</span><span class="s">&quot;-g&quot;</span><span class="o">)</span><span class="p">;</span>
   <span class="k">end </span><span class="nf">Compiler</span><span class="p">;</span>
<span class="k">end </span><span class="nf">C_Main</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>This project has many similarities with the previous one.
As expected, its <code class="docutils literal notranslate"><span class="pre">Main</span></code> attribute now refers to a C source file.
The attribute <code class="docutils literal notranslate"><span class="pre">Exec_Dir</span></code> is now omitted, thus the resulting
executable will be put in the object directory <code class="file docutils literal notranslate"><span class="pre">obj</span></code>.</p>
<p>The most noticeable difference is the use of a variable in the
<code class="docutils literal notranslate"><span class="pre">Compiler</span></code> package to store settings used in several attributes.
This avoids text duplication and eases maintenance (a single place to
modify if we want to add new switches for C files). We will later revisit
the use of variables in the context of scenarios (see <a class="reference internal" href="#scenarios-in-projects"><span class="std std-ref">Scenarios in Projects</span></a>).</p>
<p>In this example, we see that the file <code class="file docutils literal notranslate"><span class="pre">main.c</span></code> will be compiled with
the switches used for all the other C files, plus <code class="xref std std-option docutils literal notranslate"><span class="pre">-g</span></code>.
In this specific situation the use of a variable could have been
replaced by a reference to the <code class="docutils literal notranslate"><span class="pre">Default_Switches</span></code> attribute:</p>
<blockquote>
<div><div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="kr">for</span><span class="p"> </span><span class="n">Switches</span> <span class="o">(</span><span class="s">&quot;c_main.c&quot;</span><span class="o">)</span> <span class="kr">use</span><span class="p"> </span><span class="n">Compiler</span><span class="o">&#39;</span><span class="n">Default_Switches</span> <span class="o">(</span><span class="s">&quot;C&quot;</span><span class="o">)</span> <span class="o">&amp;</span> <span class="o">(</span><span class="s">&quot;-g&quot;</span><span class="o">)</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>Note the tick character “<code class="docutils literal notranslate"><span class="pre">'</span></code>”, which is used to refer to attributes defined in a package.</p>
<p>Here is the output of the <em>GPRbuild</em> command using this project:</p>
<blockquote>
<div><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ gprbuild -Pc_main
gcc -c -pedantic -g main.c
gcc -c -gnaty proc.adb
gcc -c -gnaty pack.adb
gcc -c -pedantic utils.c
gprbind main.bexch
...
gcc main.o -o main
</pre></div>
</div>
</div></blockquote>
<p>The default switches for Ada sources,
the default switches for C sources (in the compilation of <code class="file docutils literal notranslate"><span class="pre">lib.c</span></code>),
and the specific switches for <code class="file docutils literal notranslate"><span class="pre">main.c</span></code> have all been taken into
account.</p>
<span class="target" id="index-38"></span></div>
<div class="section" id="naming-schemes">
<span id="index-39"></span><span id="id11"></span><h3><span class="section-number">2.2.9. </span>Naming Schemes<a class="headerlink" href="#naming-schemes" title="Permalink to this headline">¶</a></h3>
<p>Sometimes an Ada software system needs to be ported from one compilation environment to
another (such as GNAT), but the files might not be named using the default GNAT
conventions. Instead of changing all the file names, which for a variety of
reasons might not be possible, you can define the relevant file naming scheme
in the <strong>Naming</strong> package of your project file.</p>
<p>The naming scheme has two distinct goals for the Project Manager: it
allows source files to be located when searching in the source
directories, and given a source file name it makes it possible to infer
the associated language, and thus which compiler to use.</p>
<p>Note that the Ada compiler’s use of pragma <cite>Source_File_Name</cite> is not
supported when using project files. You must use the features described here.
You can, however, specify other configuration pragmas.</p>
<p>The following attributes can be defined in package <cite>Naming</cite>:</p>
<p id="index-40"><strong>Casing</strong>:</p>
<blockquote>
<div><p>Its value must be one of <code class="docutils literal notranslate"><span class="pre">&quot;lowercase&quot;</span></code> (the default if
unspecified), <code class="docutils literal notranslate"><span class="pre">&quot;uppercase&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;mixedcase&quot;</span></code>. It describes the
casing of file names with regard to the Ada unit name.</p>
<p>Given an Ada package body My_Unit, the base file name (i.e. minus the
extension, which is controlled by other attributes described below)
will respectively be:</p>
<ul class="simple">
<li><p>for “lowercase”: “my_unit”</p></li>
<li><p>for “uppercase”: “MY_UNIT”</p></li>
<li><p>for “mixedcase”: any spelling with indifferent casing such as “My_Unit”,
“MY_Unit”, “My_UnIT” etc… The case insensitive name must be unique,
otherwise an error will be reported. For example, there cannot be two
source file names such as “My_Unit.adb” and “MY_UnIT.adb”.</p></li>
</ul>
<p>On Windows, file names are case insensitive, so this attribute is
irrelevant.</p>
</div></blockquote>
<p id="index-41"><strong>Dot_Replacement</strong>:</p>
<blockquote>
<div><p>This attribute specifies the string that should replace the <code class="docutils literal notranslate"><span class="pre">&quot;.&quot;</span></code> in unit
names. Its default value is <code class="docutils literal notranslate"><span class="pre">&quot;-&quot;</span></code> so that a unit
<code class="docutils literal notranslate"><span class="pre">Parent.Child</span></code> is expected to be found in the file
<code class="file docutils literal notranslate"><span class="pre">parent-child.adb</span></code>. The replacement string must satisfy the following
requirements to avoid ambiguities in the naming scheme:</p>
<ul class="simple">
<li><p>It must not be empty</p></li>
<li><p>It cannot start or end with an alphanumeric character</p></li>
<li><p>It cannot be a single underscore</p></li>
<li><p>It cannot start with an underscore followed by an alphanumeric</p></li>
<li><p>It cannot contain a dot <code class="docutils literal notranslate"><span class="pre">'.'</span></code> unless the entire string is <code class="docutils literal notranslate"><span class="pre">&quot;.&quot;</span></code></p></li>
<li><p>It cannot include a space or a character that is not printable ASCII</p></li>
</ul>
</div></blockquote>
<span class="target" id="index-42"></span><p id="index-43"><strong>Spec_Suffix</strong> and <strong>Specification_Suffix</strong>:</p>
<blockquote>
<div><p>For Ada, these attributes specify the suffix used in file names that contain
specifications. For other languages, they give the extension for files
that contain declarations (header files in C for instance). The attribute
is indexed by the language name.
The two attributes are equivalent, but <code class="docutils literal notranslate"><span class="pre">Specification_Suffix</span></code> is obsolescent.</p>
<p>If the value of the attribute is the empty string, it indicates to the
Project Manager that the only specifications/header files for the language
are those specified with attributes <code class="docutils literal notranslate"><span class="pre">Spec</span></code> or
<code class="docutils literal notranslate"><span class="pre">Specification_Exceptions</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">Spec_Suffix</span> <span class="pre">(&quot;Ada&quot;)</span></code> is not specified, then the default is
<code class="docutils literal notranslate"><span class="pre">&quot;.ads&quot;</span></code>.</p>
<p>A non empty value must satisfy the following requirements:</p>
<ul class="simple">
<li><p>It must include at least one dot</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">Dot_Replacement</span></code> is a single dot, then it cannot include
more than one dot.</p></li>
</ul>
</div></blockquote>
<span class="target" id="index-44"></span><p id="index-45"><strong>Body_Suffix</strong> and <strong>Implementation_Suffix</strong>:</p>
<blockquote>
<div><p>These attributes are equivalent and specify the extension used for file names that contain
code (bodies in Ada). They are indexed by the language name.
<code class="docutils literal notranslate"><span class="pre">Implementation_Suffix</span></code> is obsolescent and fully replaced by the first attribute.</p>
<p>For each language of a project, one of these two attributes needs to be
specified, either in the project itself or in the configuration project file.</p>
<p>If the value of the attribute is the empty string, it indicates to the
Project Manager that the only source files for the language
are those specified with attributes <code class="docutils literal notranslate"><span class="pre">Body</span></code> or
<code class="docutils literal notranslate"><span class="pre">Implementation_Exceptions</span></code>.</p>
<p>These attributes must satisfy the same requirements as <code class="docutils literal notranslate"><span class="pre">Spec_Suffix</span></code>.
In addition, they must be different from any of the values in
<code class="docutils literal notranslate"><span class="pre">Spec_Suffix</span></code>.
If <code class="docutils literal notranslate"><span class="pre">Body_Suffix</span> <span class="pre">(&quot;Ada&quot;)</span></code> is not specified, then the default is
<code class="docutils literal notranslate"><span class="pre">&quot;.adb&quot;</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">Body_Suffix</span> <span class="pre">(&quot;Ada&quot;)</span></code> and <code class="docutils literal notranslate"><span class="pre">Spec_Suffix</span> <span class="pre">(&quot;Ada&quot;)</span></code> end with the
same string, then a file name that ends with the longest of these two
suffixes will be a body if the longest suffix is <code class="docutils literal notranslate"><span class="pre">Body_Suffix</span> <span class="pre">(&quot;Ada&quot;)</span></code>,
or a spec if the longest suffix is <code class="docutils literal notranslate"><span class="pre">Spec_Suffix</span> <span class="pre">(&quot;Ada&quot;)</span></code>.</p>
<p>If the suffix does not start with a <code class="docutils literal notranslate"><span class="pre">'.'</span></code>, a file with a name exactly equal to
the suffix will also be part of the project (for instance if you define the
suffix as <code class="docutils literal notranslate"><span class="pre">Makefile.in</span></code>, a file called <code class="file docutils literal notranslate"><span class="pre">Makefile.in</span></code> will be part
of the project. This capability is usually not of interest when building.
However, it might become useful when a project is also used to
find the list of source files in an editor, like the GNAT Programming System
(GPS).</p>
</div></blockquote>
<p id="index-46"><strong>Separate_Suffix</strong>:</p>
<blockquote>
<div><p>This attribute is specific to Ada. It denotes the suffix used in file names for files
that contain subunits (separate bodies). If it is not specified, then it defaults to
same value as <code class="docutils literal notranslate"><span class="pre">Body_Suffix</span> <span class="pre">(&quot;Ada&quot;)</span></code>.</p>
<p>The value of this attribute cannot be the empty string.</p>
<p>Otherwise, the same rules apply as for the <code class="docutils literal notranslate"><span class="pre">Body_Suffix</span></code> attribute.</p>
</div></blockquote>
<span class="target" id="index-47"></span><p id="index-48"><strong>Spec</strong> or <strong>Specification</strong>:</p>
<blockquote>
<div><p>These attributes are equivalent.
The <code class="docutils literal notranslate"><span class="pre">Spec</span></code> attribute can be used to define the source file name for a
given Ada compilation unit’s spec. The index is the literal name of the Ada
unit (case insensitive). The value is the literal base name of the file that
contains this unit’s spec (case sensitive or insensitive depending on the
operating system). This attribute allows the definition of exceptions to the
general naming scheme, in case some files do not follow the usual
convention.</p>
<p>When a source file contains several units, the relative position of the unit
can be indicated. The first unit in the file is at position 1.</p>
<blockquote>
<div><div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="kr">for</span><span class="p"> </span><span class="n">Spec</span> <span class="o">(</span><span class="s">&quot;MyPack.MyChild&quot;</span><span class="o">)</span> <span class="kr">use</span><span class="p"> </span><span class="s">&quot;mypack.mychild.spec&quot;</span><span class="p">;</span>
<span class="kr">for</span><span class="p"> </span><span class="n">Spec</span> <span class="o">(</span><span class="s">&quot;top&quot;</span><span class="o">)</span> <span class="kr">use</span><span class="p"> </span><span class="s">&quot;foo.a&quot;</span> <span class="kr">at</span><span class="p"> </span><span class="mi">1</span><span class="p">;</span>
<span class="kr">for</span><span class="p"> </span><span class="n">Spec</span> <span class="o">(</span><span class="s">&quot;foo&quot;</span><span class="o">)</span> <span class="kr">use</span><span class="p"> </span><span class="s">&quot;foo.a&quot;</span> <span class="kr">at</span><span class="p"> </span><span class="mi">2</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
<span class="target" id="index-49"></span><p id="index-50"><strong>Body</strong> or <strong>Implementation</strong>:</p>
<blockquote>
<div><p>These attribute play the same role as <code class="docutils literal notranslate"><span class="pre">Spec</span></code>, but for Ada bodies.</p>
</div></blockquote>
<span class="target" id="index-51"></span><p id="index-52"><strong>Specification_Exceptions</strong> and <strong>Implementation_Exceptions</strong>:</p>
<blockquote>
<div><p>These attributes define exceptions to the naming scheme for languages
other than Ada. They are indexed by the language name, and contain
a list of file names respectively for headers and source code.</p>
</div></blockquote>
<p>As an example of several of these attributes,
the following package models the Apex file naming rules:</p>
<blockquote>
<div><div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="k">package </span><span class="nf">Naming</span> <span class="kr">is</span><span class="p"></span>
  <span class="kr">for</span><span class="p"> </span><span class="n">Casing</span>               <span class="kr">use</span><span class="p"> </span><span class="s">&quot;lowercase&quot;</span><span class="p">;</span>
  <span class="kr">for</span><span class="p"> </span><span class="n">Dot_Replacement</span>      <span class="kr">use</span><span class="p"> </span><span class="s">&quot;.&quot;</span><span class="p">;</span>
  <span class="kr">for</span><span class="p"> </span><span class="n">Spec_Suffix</span> <span class="o">(</span><span class="s">&quot;Ada&quot;</span><span class="o">)</span>  <span class="kr">use</span><span class="p"> </span><span class="s">&quot;.1.ada&quot;</span><span class="p">;</span>
  <span class="kr">for</span><span class="p"> </span><span class="n">Body_Suffix</span> <span class="o">(</span><span class="s">&quot;Ada&quot;</span><span class="o">)</span>  <span class="kr">use</span><span class="p"> </span><span class="s">&quot;.2.ada&quot;</span><span class="p">;</span>
<span class="k">end </span><span class="nf">Naming</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="organizing-projects-into-subsystems">
<span id="id12"></span><h2><span class="section-number">2.3. </span>Organizing Projects into Subsystems<a class="headerlink" href="#organizing-projects-into-subsystems" title="Permalink to this headline">¶</a></h2>
<p>A <strong>subsystem</strong> is a coherent part of the complete system to be built. It is
represented by a set of sources and a single object directory. A system can
consist of a single subsystem when it is simple as we have seen in the
earlier examples. Complex systems are usually composed of several interdependent
subsystems. A subsystem is dependent on another subsystem if knowledge of the
other one is required to build it, and in particular if visibility on some of
the sources of this other subsystem is required. Each subsystem is usually
represented by its own project file.</p>
<p>In this section, we’ll enhance the previous example. Let’s assume some
sources of our <code class="docutils literal notranslate"><span class="pre">Build</span></code> project depend on other sources.
For instance, when building a graphical interface, it is usual to depend upon
a graphical library toolkit such as GtkAda. Furthermore, we also need
sources from a logging module we had previously written.</p>
<div class="section" id="importing-projects">
<span id="id13"></span><h3><span class="section-number">2.3.1. </span>Importing Projects<a class="headerlink" href="#importing-projects" title="Permalink to this headline">¶</a></h3>
<p id="index-53">GtkAda comes with its own project file (appropriately called
<code class="file docutils literal notranslate"><span class="pre">gtkada.gpr</span></code>), and we will assume we have already built a project
called <code class="file docutils literal notranslate"><span class="pre">logging.gpr</span></code> for the logging module. With the information provided
so far in <code class="file docutils literal notranslate"><span class="pre">build.gpr</span></code>, building the application would fail with an error
indicating that the gtkada and logging units that are relied upon by the sources
of this project cannot be found.</p>
<p>This is solved by defining <code class="file docutils literal notranslate"><span class="pre">build.gpr</span></code> to <em>import</em> the gtkada and
logging projects: this is done by adding the following <code class="samp docutils literal notranslate"><span class="pre">with</span></code> clauses
at the beginning of our project:</p>
<blockquote>
<div><div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="kr">with</span><span class="p"> </span><span class="s">&quot;gtkada.gpr&quot;</span><span class="p">;</span>
<span class="kr">with</span><span class="p"> </span><span class="s">&quot;a/b/logging.gpr&quot;</span><span class="p">;</span>
<span class="k">project </span><span class="nf">Build</span> <span class="kr">is</span><span class="p"></span>
  <span class="o">...</span>  <span class="c">--  as before</span>
<span class="k">end </span><span class="nf">Build</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p id="index-54">When such a project is compiled, <em>gprbuild</em> will automatically check
the imported projects and recompile their sources when needed. It will also
recompile the sources from <cite>Build</cite> when needed, and finally create the
executable.</p>
<p>In some cases, the implementation units needed to recompile a
project are not available, or come from some third party and you do not want to
recompile it yourself. In this case, set the attribute <strong>Externally_Built</strong> to
<code class="samp docutils literal notranslate"><span class="pre">&quot;true&quot;</span></code>, indicating to the builder that this project can be assumed to be
up-to-date, and should not be considered for recompilation. In Ada, if the
sources of this externally built project were compiled with another version of
the compiler or with incompatible options, the binder will issue an error.</p>
<p id="index-55">The project’s <code class="samp docutils literal notranslate"><span class="pre">with</span></code> clause has several effects. It provides source
visibility between projects during the compilation process. It also guarantees
that the necessary object files from <code class="docutils literal notranslate"><span class="pre">Logging</span></code> and <code class="docutils literal notranslate"><span class="pre">GtkAda</span></code> are
available when linking <code class="docutils literal notranslate"><span class="pre">Build</span></code>.</p>
<p>As can be seen in this example, the syntax for importing projects is similar
to the syntax for importing compilation units in Ada. However, project files
use literal strings instead of names, and the <code class="samp docutils literal notranslate"><span class="pre">with</span></code> clause identifies
project files rather than packages.</p>
<p>Each literal string after <code class="samp docutils literal notranslate"><span class="pre">with</span></code> is the path
(absolute or relative) to a project file. The <code class="file docutils literal notranslate"><span class="pre">.gpr</span></code> extension is
optional, but we recommend adding it. If no extension is specified,
and no project file with the <code class="file docutils literal notranslate"><span class="pre">.gpr</span></code> extension is found, then
the file is searched for exactly as written in the <code class="samp docutils literal notranslate"><span class="pre">with</span></code> clause,
that is with no extension.</p>
<p>As mentioned above, the path after a <code class="samp docutils literal notranslate"><span class="pre">with</span></code> has to be a literal
string, and you cannot use concatenation, or lookup the value of external
variables to change the directories from which a project is loaded.
A solution if you need something like this is to use aggregate projects
(see <a class="reference internal" href="#aggregate-projects"><span class="std std-ref">Aggregate Projects</span></a>).</p>
<p id="index-56">When a relative path or a base name is used, the
project files are searched relative to each of the directories in the
<strong>project path</strong>. This path includes all the directories found by the
following procedure, in decreasing order of priority; the first matching
file is used:</p>
<ul class="simple">
<li><p>First, the file is searched relative to the directory that contains the
current project file.</p></li>
<li><p>Then it is searched relative to all the directories specified in the
environment variables <span class="target" id="index-57"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">GPR_PROJECT_PATH_FILE</span></code>,
<span class="target" id="index-58"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">GPR_PROJECT_PATH</span></code> and <span class="target" id="index-59"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">ADA_PROJECT_PATH</span></code> (in that order) if they exist.
The value of <span class="target" id="index-60"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">GPR_PROJECT_PATH_FILE</span></code>, when defined, is the path name of
a text file that contains project directory path names, one per line.
<span class="target" id="index-61"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">GPR_PROJECT_PATH</span></code> and <span class="target" id="index-62"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">ADA_PROJECT_PATH</span></code>, when defined, contain
project directory path names separated by directory separators.
<span class="target" id="index-63"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">ADA_PROJECT_PATH</span></code> is used for compatibility, it is recommended to
use <span class="target" id="index-64"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">GPR_PROJECT_PATH_FILE</span></code> or <span class="target" id="index-65"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">GPR_PROJECT_PATH</span></code>.</p></li>
<li><p>Finally, it is searched relative to the default project directories.
The following locations are searched, in the specified order:</p>
<ul>
<li><p><code class="file docutils literal notranslate"><span class="pre">&lt;compiler_prefix&gt;/&lt;target&gt;/&lt;runtime&gt;/share/gpr</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">&lt;compiler_prefix&gt;/&lt;target&gt;/&lt;runtime&gt;/lib/gnat</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">&lt;compiler_prefix&gt;/&lt;target&gt;/share/gpr</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">&lt;compiler_prefix&gt;/&lt;target&gt;/lib/gnat</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">&lt;compiler_prefix&gt;/share/gpr/</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">&lt;compiler_prefix&gt;/lib/gnat/</span></code></p></li>
</ul>
</li>
</ul>
<p>The first two paths are only added if the explicit runtime is specified either
via <code class="xref std std-option docutils literal notranslate"><span class="pre">--RTS</span></code> switch or via <code class="docutils literal notranslate"><span class="pre">Runtime</span></code> attribute. &lt;target&gt; can be
communicated via <code class="xref std std-option docutils literal notranslate"><span class="pre">--target</span></code> switch or <code class="docutils literal notranslate"><span class="pre">Target</span></code> attribute, otherwise
default target will be used. &lt;compiler_prefix&gt; is typically discovered
automatically based on target, runtime and language information.</p>
<p>In our example, <code class="file docutils literal notranslate"><span class="pre">gtkada.gpr</span></code> is found in the predefined directory if
it was installed at the same root as GNAT.</p>
<span class="target" id="index-66"></span><p id="index-67">Some tools also support extending the project path from the command line,
generally through the <code class="xref std std-option docutils literal notranslate"><span class="pre">-aP</span></code>. You can see the value of the project
path by using the <code class="docutils literal notranslate"><span class="pre">gprls</span> <span class="pre">-v</span></code> command.</p>
<p>Any symbolic link will be fully resolved in the directory of the
importing project file before the imported project file is examined.</p>
<p id="index-68">Any source file in the imported project can be used by the sources of the
importing project, transitively.
Thus if <cite>A</cite> imports <cite>B</cite>, which imports <cite>C</cite>, the sources of
<cite>A</cite> may depend on the sources of <cite>C</cite>, even if <cite>A</cite> does not
import <cite>C</cite> explicitly. However, this is not recommended, because if
and when <cite>B</cite> ceases to import <cite>C</cite>, some sources in <cite>A</cite> will
no longer compile. <em>GPRbuild</em> has a switch <code class="xref std std-option docutils literal notranslate"><span class="pre">--no-indirect-imports</span></code>
that will report such indirect dependencies.</p>
<p class="rubric" id="project-import-closure"><span id="index-69"></span>Project import closure</p>
<p>The <em class="dfn">project import closure</em> for a given project <cite>proj</cite> is the set
of projects consisting of <cite>proj</cite> itself, together with each
project that is directly or indirectly imported by <cite>proj</cite>.
The import may be from either a <code class="samp docutils literal notranslate"><span class="pre">with</span></code> or, as will be explained below,
a <code class="samp docutils literal notranslate"><span class="pre">limited</span> <span class="pre">with</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>One very important aspect of a project import closure is that
<strong>a given source can only belong to one project</strong> in this set
(otherwise the project manager
would not know which settings apply to it and when to recompile it).
Thus different project files do not usually share source directories, or,
when they do, they need to specify precisely which project owns which sources
using the attribute <em>Source_Files</em> or equivalent. By contrast, two projects
can each own a source with the same base file name as long as they reside in
different directories. The latter is not true for Ada sources because of the
correlation between source files and Ada units.</p>
</div>
<span class="target" id="index-70"></span></div>
<div class="section" id="cyclic-project-dependencies">
<span id="index-71"></span><span id="id14"></span><h3><span class="section-number">2.3.2. </span>Cyclic Project Dependencies<a class="headerlink" href="#cyclic-project-dependencies" title="Permalink to this headline">¶</a></h3>
<p>In general, cyclic import dependencies are forbidden:
if project <cite>A</cite> <code class="samp docutils literal notranslate"><span class="pre">with</span></code>s project <cite>B</cite> (directly or indirectly) then <cite>B</cite>
is not allowed to <code class="samp docutils literal notranslate"><span class="pre">with</span></code> <cite>A</cite>. However, there are cases when cyclic
dependencies at the project level are necessary, as dependencies at
the source level may exist both ways between <cite>A</cite>’s sources and <cite>B</cite>’s sources.
For these cases, another form of import between projects is supplied:
the <strong>limited with</strong>.
A project <cite>A</cite> that imports a project <cite>B</cite> with a simple <code class="samp docutils literal notranslate"><span class="pre">with</span></code> may also be
imported, directly or indirectly, by <cite>B</cite> through a <code class="samp docutils literal notranslate"><span class="pre">limited</span> <span class="pre">with</span></code>.</p>
<p>The difference between a simple <code class="samp docutils literal notranslate"><span class="pre">with</span></code> and <code class="samp docutils literal notranslate"><span class="pre">limited</span> <span class="pre">with</span></code> is that
the name of a project imported with a <code class="samp docutils literal notranslate"><span class="pre">limited</span> <span class="pre">with</span></code> cannot be used
in the importing project. In particular, its packages cannot be renamed and
its variables cannot be referenced.</p>
<blockquote>
<div><div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="kr">with</span><span class="p"> </span><span class="s">&quot;b.gpr&quot;</span><span class="p">;</span>
<span class="kr">with</span><span class="p"> </span><span class="s">&quot;c.gpr&quot;</span><span class="p">;</span>
<span class="k">project </span><span class="nf">A</span> <span class="kr">is</span><span class="p"></span>
    <span class="kr">for</span><span class="p"> </span><span class="n">Exec_Dir</span> <span class="kr">use</span><span class="p"> </span><span class="n">B</span><span class="o">&#39;</span><span class="n">Exec_Dir</span><span class="p">;</span> <span class="c">-- OK</span>
<span class="k">end </span><span class="nf">A</span><span class="p">;</span>

<span class="kr">limited</span><span class="p"> </span><span class="kr">with</span><span class="p"> </span><span class="s">&quot;a.gpr&quot;</span><span class="p">;</span>   <span class="c">--  Cyclic dependency: A -&gt; B -&gt; A</span>
<span class="k">project </span><span class="nf">B</span> <span class="kr">is</span><span class="p"></span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Exec_Dir</span> <span class="kr">use</span><span class="p"> </span><span class="n">A</span><span class="o">&#39;</span><span class="n">Exec_Dir</span><span class="p">;</span> <span class="c">-- not OK</span>
<span class="k">end </span><span class="nf">B</span><span class="p">;</span>

<span class="kr">with</span><span class="p"> </span><span class="s">&quot;d.gpr&quot;</span><span class="p">;</span>
<span class="k">project </span><span class="nf">C</span> <span class="kr">is</span><span class="p"></span>
<span class="k">end </span><span class="nf">C</span><span class="p">;</span>

<span class="kr">limited</span><span class="p"> </span><span class="kr">with</span><span class="p"> </span><span class="s">&quot;a.gpr&quot;</span><span class="p">;</span>  <span class="c">--  Cyclic dependency: A -&gt; C -&gt; D -&gt; A</span>
<span class="k">project </span><span class="nf">D</span> <span class="kr">is</span><span class="p"></span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Exec_Dir</span> <span class="kr">use</span><span class="p"> </span><span class="n">A</span><span class="o">&#39;</span><span class="n">Exec_Dir</span><span class="p">;</span> <span class="c">-- not OK</span>
<span class="k">end </span><span class="nf">D</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="sharing-between-projects">
<span id="id15"></span><h3><span class="section-number">2.3.3. </span>Sharing between Projects<a class="headerlink" href="#sharing-between-projects" title="Permalink to this headline">¶</a></h3>
<p>When building an application, it is common to have similar needs in several of
the projects corresponding to the subsystems under construction. For instance,
they might all have the same compilation switches.</p>
<p>As seen above (see <a class="reference internal" href="#tools-options-in-project-files"><span class="std std-ref">Tools Options in Project Files</span></a>), setting compilation
switches for all sources of a subsystem is simple: it is just a matter of
adding a <code class="docutils literal notranslate"><span class="pre">Compiler'Default_Switches</span></code> attribute to each project file with
the same value. However, that would entail duplication of data, and both places would need
to be changed in order to recompile the whole application with different
switches. This may be a serious issue if there are many subsystems and thus
many project files to edit.</p>
<p>There are two main approaches to avoiding this duplication:</p>
<ul>
<li><p>Since <code class="file docutils literal notranslate"><span class="pre">build.gpr</span></code> imports <code class="file docutils literal notranslate"><span class="pre">logging.gpr</span></code>, we could change the former
to reference the attribute in Logging, either through a package renaming,
or by referencing the attribute. The following example shows both cases:</p>
<div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="k">project </span><span class="nf">Logging</span> <span class="kr">is</span><span class="p"></span>
   <span class="k">package </span><span class="nf">Compiler</span> <span class="kr">is</span><span class="p"></span>
      <span class="kr">for</span><span class="p"> </span><span class="n">Switches</span> <span class="o">(</span><span class="s">&quot;Ada&quot;</span><span class="o">)</span>
          <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;-O2&quot;</span><span class="o">)</span><span class="p">;</span>
   <span class="k">end </span><span class="nf">Compiler</span><span class="p">;</span>
   <span class="k">package </span><span class="nf">Binder</span> <span class="kr">is</span><span class="p"></span>
      <span class="kr">for</span><span class="p"> </span><span class="n">Switches</span> <span class="o">(</span><span class="s">&quot;Ada&quot;</span><span class="o">)</span>
          <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;-E&quot;</span><span class="o">)</span><span class="p">;</span>
   <span class="k">end </span><span class="nf">Binder</span><span class="p">;</span>
<span class="k">end </span><span class="nf">Logging</span><span class="p">;</span>

<span class="kr">with</span><span class="p"> </span><span class="s">&quot;logging.gpr&quot;</span><span class="p">;</span>
<span class="k">project </span><span class="nf">Build</span> <span class="kr">is</span><span class="p"></span>
   <span class="k">package </span><span class="nf">Compiler</span> <span class="kr">renames</span><span class="p"> </span><span class="n">Logging.Compiler</span><span class="p">;</span>
   <span class="k">package </span><span class="nf">Binder</span> <span class="kr">is</span><span class="p"></span>
      <span class="kr">for</span><span class="p"> </span><span class="n">Switches</span> <span class="o">(</span><span class="s">&quot;Ada&quot;</span><span class="o">)</span> <span class="kr">use</span><span class="p"> </span><span class="n">Logging.Binder</span><span class="o">&#39;</span><span class="n">Switches</span> <span class="o">(</span><span class="s">&quot;Ada&quot;</span><span class="o">)</span><span class="p">;</span>
   <span class="k">end </span><span class="nf">Binder</span><span class="p">;</span>
<span class="k">end </span><span class="nf">Build</span><span class="p">;</span>
</pre></div>
</div>
<p>The solution used for <cite>Compiler</cite> gets the same value for all
attributes of the package, but you cannot modify anything from the
package (adding extra switches or some exceptions). The solution
for the <cite>Binder</cite> package is more flexible, but more verbose.</p>
<p>If you need to refer to the value of a variable in an imported
project, rather than an attribute, the syntax is similar but uses
a <code class="docutils literal notranslate"><span class="pre">&quot;.&quot;</span></code> rather than an apostrophe. For instance:</p>
<div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="kr">with</span><span class="p"> </span><span class="s">&quot;imported&quot;</span><span class="p">;</span>
<span class="k">project </span><span class="nf">Main</span> <span class="kr">is</span><span class="p"></span>
   <span class="n">Var1</span> <span class="o">:=</span> <span class="n">Imported.Var</span><span class="p">;</span>
<span class="k">end </span><span class="nf">Main</span><span class="p">;</span>
</pre></div>
</div>
</li>
<li><p>The second approach is to define the switches in a separate project.
That project does not contain any source files (thus, as opposed to
the first example, none of the projects plays a special role), and
will only be used to define the attributes. Such a project is
typically named <code class="file docutils literal notranslate"><span class="pre">shared.gpr</span></code>.</p>
<div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="kr">abstract</span><span class="p"> </span><span class="k">project </span><span class="nf">Shared</span> <span class="kr">is</span><span class="p"></span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Source_Files</span> <span class="kr">use</span><span class="p"> </span><span class="o">()</span><span class="p">;</span>   <span class="c">--  no sources</span>
   <span class="k">package </span><span class="nf">Compiler</span> <span class="kr">is</span><span class="p"></span>
      <span class="kr">for</span><span class="p"> </span><span class="n">Switches</span> <span class="o">(</span><span class="s">&quot;Ada&quot;</span><span class="o">)</span>
          <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;-O2&quot;</span><span class="o">)</span><span class="p">;</span>
   <span class="k">end </span><span class="nf">Compiler</span><span class="p">;</span>
<span class="k">end </span><span class="nf">Shared</span><span class="p">;</span>

<span class="kr">with</span><span class="p"> </span><span class="s">&quot;shared.gpr&quot;</span><span class="p">;</span>
<span class="k">project </span><span class="nf">Logging</span> <span class="kr">is</span><span class="p"></span>
   <span class="k">package </span><span class="nf">Compiler</span> <span class="kr">renames</span><span class="p"> </span><span class="n">Shared.Compiler</span><span class="p">;</span>
<span class="k">end </span><span class="nf">Logging</span><span class="p">;</span>

<span class="kr">with</span><span class="p"> </span><span class="s">&quot;shared.gpr&quot;</span><span class="p">;</span>
<span class="k">project </span><span class="nf">Build</span> <span class="kr">is</span><span class="p"></span>
   <span class="k">package </span><span class="nf">Compiler</span> <span class="kr">renames</span><span class="p"> </span><span class="n">Shared.Compiler</span><span class="p">;</span>
<span class="k">end </span><span class="nf">Build</span><span class="p">;</span>
</pre></div>
</div>
<p>As with the first example, we could have chosen to set the attributes
one by one rather than to rename a package. The reason we explicitly
indicate that <cite>Shared</cite> has no sources is so that it can be created
in any directory, and we are sure it shares no sources with <cite>Build</cite>
or <cite>Logging</cite>, which would be invalid.</p>
<span class="target" id="index-72"></span><p id="index-73">Note the additional use of the <strong>abstract</strong> qualifier in <code class="file docutils literal notranslate"><span class="pre">shared.gpr</span></code>.
This qualifier is optional, but helps convey the message that we do not
intend this project to have source files (see <a class="reference internal" href="#qualified-projects"><span class="std std-ref">Qualified Projects</span></a> for
additional information about project qualifiers).</p>
</li>
</ul>
</div>
<div class="section" id="global-attributes">
<span id="index-74"></span><span id="id16"></span><h3><span class="section-number">2.3.4. </span>Global Attributes<a class="headerlink" href="#global-attributes" title="Permalink to this headline">¶</a></h3>
<p>We have already seen many examples of attributes used to specify a particular
option for one of the tools involved in the build process. Most of those
attributes are project specific. That is to say, they only affect the invocation
of tools on the sources of the project where they are defined.</p>
<p id="index-75">There are a few additional attributes that, when defined for a “main” project
<cite>proj</cite>, also apply to all other projects in the project import closure of <cite>proj</cite>.
A <em class="dfn">main project</em> is a project explicitly specified on the command line.</p>
<p>Such attributes are known as <em class="dfn">global attributes</em>;
here are several that are commonly used:</p>
<p id="index-76"><strong>Builder’Global_Configuration_Pragmas</strong>:</p>
<blockquote>
<div><p>This attribute specifies a file that contains configuration pragmas
to use when building executables. These pragmas apply to all
executables built from this project import closure. As noted earlier,
additional pragmas can be specified on a per-project basis by setting the
<code class="docutils literal notranslate"><span class="pre">Compiler'Local_Configuration_Pragmas</span></code> attribute.</p>
</div></blockquote>
<p id="index-77"><strong>Builder’Global_Compilation_Switches</strong>:</p>
<blockquote>
<div><p>This attribute is a list of compiler switches that apply when compiling any
source file in the project import closure. These switches are used in addition
to the ones defined in the <code class="docutils literal notranslate"><span class="pre">Compiler</span></code> package, which only apply to
the sources of the corresponding project. This attribute is indexed by
the name of the language.</p>
</div></blockquote>
<p>Using such global capabilities is convenient, but care is needed since
it can also lead to unexpected
behavior. An example is when several subsystems are shared among different main
projects but the different global attributes are not
compatible. Note that using aggregate projects can be a safer and more powerful
alternative to global attributes.</p>
</div>
</div>
<div class="section" id="scenarios-in-projects">
<span id="id17"></span><h2><span class="section-number">2.4. </span>Scenarios in Projects<a class="headerlink" href="#scenarios-in-projects" title="Permalink to this headline">¶</a></h2>
<p>Various project properties can be modified based on <strong>scenarios</strong>. These
are user-defined modes (the values of project variables and attributes)
that determine the behavior of a project, based on the
values of externally defined variables. Typical
examples are the setup of platform-specific compiler options, or the use of
a debug and a release mode (the former would activate the generation of debug
information, while the latter would request an increased level of code
optimization).</p>
<p>Let’s enhance our example to support debug and release modes. The issue is to
let the user choose which kind of system to build: use <code class="xref std std-option docutils literal notranslate"><span class="pre">-g</span></code> as a
compiler switch in debug mode and <code class="xref std std-option docutils literal notranslate"><span class="pre">-O2</span></code> in release mode. We will also
set up the projects so that we do not share the same object directory in both
modes; otherwise switching from one to the other might trigger more
recompilations than needed or mix objects from the two modes.</p>
<p>One approach is to create two different project files, say
<code class="file docutils literal notranslate"><span class="pre">build_debug.gpr</span></code> and <code class="file docutils literal notranslate"><span class="pre">build_release.gpr</span></code>, that set the appropriate
attributes as explained in previous sections. This solution does not scale
well, because in the presence of multiple projects depending on each other, you
will also have to duplicate the complete set of projects and adapt the project
files accordingly.</p>
<p id="index-78">Instead, project files support the notion of scenarios controlled
by the values of externally defined variables.
Such values can come from several sources (in decreasing
order of priority):</p>
<dl id="index-79">
<dt><strong>Command line</strong>:</dt><dd><p>When launching <em>gprbuild</em>, the user can pass
<code class="xref std std-option docutils literal notranslate"><span class="pre">-X</span></code> switches to define the external variables. In
our case, the command line might look like</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>gprbuild -Pbuild.gpr -Xmode<span class="o">=</span>release
</pre></div>
</div>
<p>which defines the external variable named <code class="samp docutils literal notranslate"><span class="pre">mode</span></code> and sets its value to
<code class="samp docutils literal notranslate"><span class="pre">&quot;release&quot;</span></code>.</p>
</dd>
</dl>
<dl class="simple" id="index-80">
<dt><strong>Environment variables</strong>:</dt><dd><p>When the external value does not come from the command line, it can come from
the value of an environment variable of the appropriate name.
In our case, if an environment variable named <code class="samp docutils literal notranslate"><span class="pre">mode</span></code>
exists, its value will be used.</p>
</dd>
</dl>
<dl id="index-81">
<dt><strong>Tool mode</strong>:</dt><dd><p>In the special case of the <code class="docutils literal notranslate"><span class="pre">GPR_TOOL</span></code> variable, if its value has not been
specified via the commandline or as an environment variable, the various
tools set this variable to a value proper to each tool. gprbuild sets this
value to <code class="docutils literal notranslate"><span class="pre">gprbuild</span></code>. See the documentation of other tools to find out which
value they set this variable to.</p>
</dd>
<dt><strong>External function second parameter</strong>.</dt><dd><p>Once an external variable is defined, its value needs to be obtained by
the project. The general form is to use
the predefined function <code class="samp docutils literal notranslate"><span class="pre">external</span></code>, which returns the current value of
the external variable. For instance, we could set up the object directory to point to
either <code class="file docutils literal notranslate"><span class="pre">obj/debug</span></code> or <code class="file docutils literal notranslate"><span class="pre">obj/release</span></code> by changing our project to</p>
<div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="k">project </span><span class="nf">Build</span> <span class="kr">is</span><span class="p"></span>
    <span class="kr">for</span><span class="p"> </span><span class="n">Object_Dir</span> <span class="kr">use</span><span class="p"> </span><span class="s">&quot;obj/&quot;</span> <span class="o">&amp;</span> <span class="kr">external</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;mode&quot;</span><span class="p">,</span> <span class="s">&quot;debug&quot;</span><span class="o">)</span><span class="p">;</span>
    <span class="o">...</span> <span class="c">--  as before</span>
<span class="k">end </span><span class="nf">Build</span><span class="p">;</span>
</pre></div>
</div>
<p>The second parameter to <code class="samp docutils literal notranslate"><span class="pre">external</span></code> is optional, and is the default
value to use if <code class="samp docutils literal notranslate"><span class="pre">mode</span></code> is not set from the command line or the environment.
If the second parameter is not supplied, and there is no external or
environment variable named by the first parameter, then an error is reported.</p>
</dd>
</dl>
<p>In order to set the switches according to the different scenarios, other
constructs are needed, such as typed variables and case constructions.</p>
<span class="target" id="index-82"></span><p id="index-83">A <strong>typed variable</strong> is a variable that
can take only a limited number of values, similar to variable from an
enumeration type in Ada.
Such a variable can then be used in a <strong>case construction</strong>, resulting in
conditional sections in the project. The following example shows how
this can be done:</p>
<blockquote>
<div><div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="k">project </span><span class="nf">Build</span> <span class="kr">is</span><span class="p"></span>
   <span class="kr">type</span><span class="p"> </span><span class="n">Mode_Type</span> <span class="kr">is</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;debug&quot;</span><span class="p">,</span> <span class="s">&quot;release&quot;</span><span class="o">)</span><span class="p">;</span>         <span class="c">-- all possible values</span>
   <span class="n">Mode</span> <span class="o">:</span> <span class="n">Mode_Type</span> <span class="o">:=</span> <span class="kr">external</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;mode&quot;</span><span class="p">,</span> <span class="s">&quot;debug&quot;</span><span class="o">)</span><span class="p">;</span> <span class="c">-- a typed variable</span>

   <span class="k">package </span><span class="nf">Compiler</span> <span class="kr">is</span><span class="p"></span>
      <span class="kr">case</span><span class="p"> </span><span class="n">Mode</span> <span class="kr">is</span><span class="p"></span>
         <span class="kr">when</span><span class="p"> </span><span class="s">&quot;debug&quot;</span> <span class="o">=&gt;</span>
            <span class="kr">for</span><span class="p"> </span><span class="n">Switches</span> <span class="o">(</span><span class="s">&quot;Ada&quot;</span><span class="o">)</span>
                <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;-g&quot;</span><span class="o">)</span><span class="p">;</span>
         <span class="kr">when</span><span class="p"> </span><span class="s">&quot;release&quot;</span> <span class="o">=&gt;</span>
            <span class="kr">for</span><span class="p"> </span><span class="n">Switches</span> <span class="o">(</span><span class="s">&quot;Ada&quot;</span><span class="o">)</span>
                <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;-O2&quot;</span><span class="o">)</span><span class="p">;</span>
      <span class="k">end </span><span class="nf">case</span><span class="p">;</span>
   <span class="k">end </span><span class="nf">Compiler</span><span class="p">;</span>
<span class="k">end </span><span class="nf">Build</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>This project is larger than the ones we have seen previously,
but it has become much more flexible.
The <code class="samp docutils literal notranslate"><span class="pre">Mode_Type</span></code> type defines the only valid values for the
<code class="samp docutils literal notranslate"><span class="pre">Mode</span></code> variable. If
any other value is read from the environment, an error is reported and the
project is considered as invalid.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Mode</span></code> variable is initialized with an external value
defaulting to <code class="samp docutils literal notranslate"><span class="pre">&quot;debug&quot;</span></code>. This default could be omitted and that would
force the user to define the value. Finally, we can use a case construction to set the
switches depending on the scenario the user has chosen.</p>
<p>Most aspects of a project can depend on scenarios. The notable exception
is the identity of an imported project (via a <code class="samp docutils literal notranslate"><span class="pre">with</span></code> or <code class="samp docutils literal notranslate"><span class="pre">limited</span> <span class="pre">with</span></code>
clause), which cannot depend on a scenario.</p>
<p>Scenarios work analogously across projects in a project import closure.
You can either
duplicate a variable similar to <code class="samp docutils literal notranslate"><span class="pre">Mode</span></code> in each of the projects (as long
as the first argument to <code class="samp docutils literal notranslate"><span class="pre">external</span></code> is always the same and the type is
the same), or simply set the variable in the <code class="file docutils literal notranslate"><span class="pre">shared.gpr</span></code> project
(see <a class="reference internal" href="#sharing-between-projects"><span class="std std-ref">Sharing between Projects</span></a>).</p>
</div>
<div class="section" id="library-projects">
<span id="index-84"></span><span id="id18"></span><h2><span class="section-number">2.5. </span>Library Projects<a class="headerlink" href="#library-projects" title="Permalink to this headline">¶</a></h2>
<p>So far, we have seen examples of projects that create executables. However,
it is also possible to create libraries instead. A <strong>library</strong> is a specific
type of subsystem where, for convenience, objects are grouped together
using system-specific means such as archives or Windows DLLs.</p>
<p>Library projects provide a system- and language-independent way of building
both <strong>static</strong> and <strong>dynamic</strong> libraries. They also support the concept of
<strong>standalone libraries</strong> (SAL) which offer two significant properties: the
elaboration (e.g. initialization) of the library is either automatic or
very simple; a change in the
implementation part of the library implies minimal post-compilation actions on
the complete system and potentially no action at all for the rest of the
system in the case of dynamic SALs.</p>
<p>There is a restriction on shared library projects: by default, they are only
allowed to import other shared library projects. They are not allowed to
import non-library projects or static library projects.</p>
<p>The GNAT Project Manager takes complete care of the library build, rebuild and
installation tasks, including recompilation of the source files for which
objects do not exist or are not up to date, assembly of the library archive, and
installation of the library (i.e., copying associated source, object and
<code class="file docutils literal notranslate"><span class="pre">ALI</span></code> files to the specified location).</p>
<div class="section" id="building-libraries">
<span id="id19"></span><h3><span class="section-number">2.5.1. </span>Building Libraries<a class="headerlink" href="#building-libraries" title="Permalink to this headline">¶</a></h3>
<p>Let’s enhance our example and transform the <cite>logging</cite> subsystem into a
library.  In order to do so, a few changes need to be made to
<code class="file docutils literal notranslate"><span class="pre">logging.gpr</span></code>.  Some attributes need to be defined: at least
<cite>Library_Name</cite> and <cite>Library_Dir</cite>; in addition, some other attributes
can be used to specify specific aspects of the library. For readability, it is
also recommended (although not mandatory), to use the qualifier <cite>library</cite>
in front of the <cite>project</cite> keyword.</p>
<p id="index-85"><strong>Library_Name</strong>:</p>
<blockquote>
<div><p>This attribute is the name of the library to be built. There is no
restriction on the name of a library imposed by the project manager, except
for stand-alone libraries whose names must follow the syntax of Ada
identifiers; however, there may be system-specific restrictions on the name.
In general, we recommend using only alphanumeric characters (and
possibly single underscores), to help portability.</p>
</div></blockquote>
<p id="index-86"><strong>Library_Dir</strong>:</p>
<blockquote>
<div><p>This attribute  is the path (absolute or relative) of the directory where
the library is to be installed. In the process of building a library,
the sources are compiled and the object files are placed in the explicitly- or
implicitly specified <code class="file docutils literal notranslate"><span class="pre">Object_Dir</span></code> directory. When all sources of a library
are compiled, some of the compilation artifacts, including the library itself,
are copied to the library_dir directory. This directory must exist and be
writable. It must also be different from the object directory so that cleanup
activities in the Library_Dir do not affect recompilation needs.</p>
</div></blockquote>
<p>Here is the new version of <code class="file docutils literal notranslate"><span class="pre">logging.gpr</span></code> that makes it a library:</p>
<blockquote>
<div><div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="kr">library</span><span class="p"> </span><span class="k">project </span><span class="nf">Logging</span> <span class="kr">is</span><span class="p"> </span>         <span class="c">--  &quot;library&quot; is optional</span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Library_Name</span> <span class="kr">use</span><span class="p"> </span><span class="s">&quot;logging&quot;</span><span class="p">;</span>  <span class="c">--  will create &quot;liblogging.a&quot; on Unix</span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Object_Dir</span>   <span class="kr">use</span><span class="p"> </span><span class="s">&quot;obj&quot;</span><span class="p">;</span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Library_Dir</span>  <span class="kr">use</span><span class="p"> </span><span class="s">&quot;lib&quot;</span><span class="p">;</span>      <span class="c">--  different from object_dir</span>
<span class="k">end </span><span class="nf">Logging</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>Once the above two attributes are defined, the library project is valid and
is sufficient for building a library with default characteristics.
Other library-related attributes can be used to change the defaults:</p>
<p id="index-87"><strong>Library_Kind</strong>:</p>
<blockquote>
<div><p>The value of this attribute must be either <code class="samp docutils literal notranslate"><span class="pre">&quot;static&quot;</span></code>,
<code class="samp docutils literal notranslate"><span class="pre">&quot;static-pic&quot;</span></code>, <code class="samp docutils literal notranslate"><span class="pre">&quot;dynamic&quot;</span></code> or <code class="samp docutils literal notranslate"><span class="pre">&quot;relocatable&quot;</span></code> (the last is
a synonym for <code class="samp docutils literal notranslate"><span class="pre">&quot;dynamic&quot;</span></code>). It indicates which kind of library should
be built (the default is to build a static library, that is an archive of
object files that can potentially be linked into a static executable). A
static-pic library is also an archive, but the code is Position Independent
Code, usually compiled with the switch -fPIC. When the library is set to
be dynamic, a separate image is created that will be loaded independently,
usually at the start of the main program execution. Support for dynamic
libraries is very platform specific, for instance on Windows it takes the
form of a DLL while on GNU/Linux, it is a dynamic <cite>elf</cite> image whose suffix is
usually <code class="file docutils literal notranslate"><span class="pre">.so</span></code>. Library project files, on the other hand, can be written
in a platform independent way so that the same project file can be used to
build a library on different operating systems.</p>
<p>If you need to build both a static and a dynamic library, we recommend
using two different object directories, since in some cases some extra code
needs to be generated for the latter. For such cases, one can either define
two different project files, or a single one that uses scenarios to indicate
the various kinds of library to be built and their corresponding object_dir.</p>
</div></blockquote>
<p id="index-88"><strong>Library_ALI_Dir</strong>:</p>
<blockquote>
<div><p>This attribute may be specified to indicate the directory where the ALI
files of the library are installed. By default, they are copied into the
<code class="file docutils literal notranslate"><span class="pre">Library_Dir</span></code> directory, but as for the executables where we have a
separate <cite>Exec_Dir</cite> attribute, you might want to put them in a separate
directory since there may be hundreds of such files. The same restrictions as for
the <code class="samp docutils literal notranslate"><span class="pre">Library_Dir</span></code> attribute apply.</p>
</div></blockquote>
<p id="index-89"><strong>Library_Version</strong>:</p>
<blockquote>
<div><p>This attribute is platform dependent, and has no effect on Windows.
On Unix, it is used only for dynamic libraries as the internal
name of the library (the “soname”). If the library file name (built
from the <code class="docutils literal notranslate"><span class="pre">Library_Name</span></code>) is different from the <code class="docutils literal notranslate"><span class="pre">Library_Version</span></code>,
then the library file will be a symbolic link to the actual file whose name
will be <code class="docutils literal notranslate"><span class="pre">Library_Version</span></code>. This follows the usual installation schemes
for dynamic libraries on many Unix systems.</p>
<div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="k">project </span><span class="nf">Logging</span> <span class="kr">is</span><span class="p"></span>
   <span class="n">Version</span> <span class="o">:=</span> <span class="s">&quot;1&quot;</span><span class="p">;</span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Library_Dir</span> <span class="kr">use</span><span class="p"> </span><span class="s">&quot;lib&quot;</span><span class="p">;</span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Library_Name</span> <span class="kr">use</span><span class="p"> </span><span class="s">&quot;logging&quot;</span><span class="p">;</span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Library_Kind</span> <span class="kr">use</span><span class="p"> </span><span class="s">&quot;dynamic&quot;</span><span class="p">;</span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Library_Version</span> <span class="kr">use</span><span class="p"> </span><span class="s">&quot;liblogging.so.&quot;</span> <span class="o">&amp;</span> <span class="n">Version</span><span class="p">;</span>
<span class="k">end </span><span class="nf">Logging</span><span class="p">;</span>
</pre></div>
</div>
<p>After the compilation, the directory <code class="file docutils literal notranslate"><span class="pre">lib</span></code> will contain both a
<code class="file docutils literal notranslate"><span class="pre">liblogging.so.1</span></code> library and a symbolic link to it called
<code class="file docutils literal notranslate"><span class="pre">liblogging.so</span></code>.</p>
</div></blockquote>
<p id="index-90"><strong>Library_GCC</strong>:</p>
<blockquote>
<div><p>This attribute is the name of the tool to use instead of <code class="docutils literal notranslate"><span class="pre">gcc</span></code> to link shared
libraries. A common use of this attribute is to define a wrapper script that
accomplishes specific actions before calling <code class="docutils literal notranslate"><span class="pre">gcc</span></code> (which itself calls the
linker to build the library image).</p>
</div></blockquote>
<p id="index-91"><strong>Library_Options</strong>:</p>
<blockquote>
<div><p>This attribute may be used to specify additional switches (“last switches”)
when linking a shared library or a static standalone library.
In the case of a simple static library, the values for this attribute are
restricted to paths to object files. Those paths may be absolute or relative
to the object directory.</p>
</div></blockquote>
<p id="index-92"><strong>Leading_Library_Options</strong>:</p>
<blockquote>
<div><p>This attribute, which is taken into account only by <em>GPRbuild</em>, may be
used to specify leading options (“first switches”) when linking a shared
library.</p>
</div></blockquote>
</div>
<div class="section" id="using-library-projects">
<span id="id20"></span><h3><span class="section-number">2.5.2. </span>Using Library Projects<a class="headerlink" href="#using-library-projects" title="Permalink to this headline">¶</a></h3>
<p>When the builder detects that a project file is a library project file, it
recompiles all sources of the project that need recompilation and rebuilds the
library if any of the sources have been recompiled. It then groups all object
files into a single file, which is a shared or a static library. This library
can later on be linked with multiple executables. Note that the use
of shared libraries reduces the size of the final executable and can also reduce
the memory footprint at execution time when the library is shared among several
executables.</p>
<p><em>GPRbuild</em> also allows building <strong>multi-language libraries</strong> when specifying
sources from multiple languages.</p>
<p>A non-library project <cite>NLP</cite> can import a library project <cite>LP</cite>. When the builder
is invoked on <cite>NLP</cite>, it always rebuilds <cite>LP</cite> even if all of the latter’s files are
up to date. For instance, let’s assume in our example that <code class="docutils literal notranslate"><span class="pre">logging</span></code> has
the following sources: <code class="file docutils literal notranslate"><span class="pre">log1.ads</span></code>, <code class="file docutils literal notranslate"><span class="pre">log1.adb</span></code>, <code class="file docutils literal notranslate"><span class="pre">log2.ads</span></code> and
<code class="file docutils literal notranslate"><span class="pre">log2.adb</span></code>. If <code class="file docutils literal notranslate"><span class="pre">log1.adb</span></code> has been modified, then the library
<code class="file docutils literal notranslate"><span class="pre">liblogging</span></code> will be rebuilt when compiling all the sources of
<code class="docutils literal notranslate"><span class="pre">Build</span></code> even if <code class="file docutils literal notranslate"><span class="pre">proc.ads</span></code>, <code class="file docutils literal notranslate"><span class="pre">pack.ads</span></code> and <code class="file docutils literal notranslate"><span class="pre">pack.adb</span></code>
do not include a <code class="docutils literal notranslate"><span class="pre">&quot;with</span> <span class="pre">Log1&quot;</span></code>.</p>
<p>To ensure that all the sources in the <code class="docutils literal notranslate"><span class="pre">Logging</span></code> library are
up to date, and that all the sources of <code class="docutils literal notranslate"><span class="pre">Build</span></code> are also up to date,
the following two commands need to be used:</p>
<blockquote>
<div><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>gprbuild -Plogging.gpr
gprbuild -Pbuild.gpr
</pre></div>
</div>
</div></blockquote>
<p>All <code class="file docutils literal notranslate"><span class="pre">ALI</span></code> files will also be copied from the object directory to the
library directory. To build executables, <em>GPRbuild</em> will use the
library rather than the individual object files.</p>
<p id="index-93">Library projects can also be useful to specify a library that needs to be used
but, for some reason, cannot be rebuilt. Such a situation may arise when some
of the library sources are not available. Such library projects need to use the
<code class="docutils literal notranslate"><span class="pre">Externally_Built</span></code> attribute as in the example below:</p>
<blockquote>
<div><div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="kr">library</span><span class="p"> </span><span class="k">project </span><span class="nf">Extern_Lib</span> <span class="kr">is</span><span class="p"></span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Languages</span>    <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;Ada&quot;</span><span class="p">,</span> <span class="s">&quot;C&quot;</span><span class="o">)</span><span class="p">;</span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Source_Dirs</span>  <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;lib_src&quot;</span><span class="o">)</span><span class="p">;</span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Library_Dir</span>  <span class="kr">use</span><span class="p"> </span><span class="s">&quot;lib2&quot;</span><span class="p">;</span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Library_Kind</span> <span class="kr">use</span><span class="p"> </span><span class="s">&quot;dynamic&quot;</span><span class="p">;</span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Library_Name</span> <span class="kr">use</span><span class="p"> </span><span class="s">&quot;l2&quot;</span><span class="p">;</span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Externally_Built</span> <span class="kr">use</span><span class="p"> </span><span class="s">&quot;true&quot;</span><span class="p">;</span>  <span class="c">--  &lt;&lt;&lt;&lt;</span>
<span class="k">end </span><span class="nf">Extern_Lib</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>In the case of externally built libraries, the <code class="docutils literal notranslate"><span class="pre">Object_Dir</span></code>
attribute does not need to be specified because it will never be
used.</p>
<p>The main effect of using such an externally built library project is mostly to
affect the linker command in order to reference the desired library. It can
also be achieved by using <code class="docutils literal notranslate"><span class="pre">Linker'Linker_Options</span></code> or <code class="docutils literal notranslate"><span class="pre">Linker'Switches</span></code>
in the project corresponding to the subsystem needing this external library.
This latter method is more straightforward in simple cases but when several
subsystems depend upon the same external library, finding the proper place
for the <code class="docutils literal notranslate"><span class="pre">Linker'Linker_Options</span></code> might not be easy and if it is
not placed properly, the final link command is likely to present ordering issues.
In such a situation, it is better to use the externally built library project
so that all other subsystems depending on it can declare this dependency through
a project <code class="samp docutils literal notranslate"><span class="pre">with</span></code> clause, which in turn will trigger the builder to find
the proper order of libraries in the final link command.</p>
</div>
<div class="section" id="stand-alone-library-projects">
<span id="id21"></span><h3><span class="section-number">2.5.3. </span>Stand-alone Library Projects<a class="headerlink" href="#stand-alone-library-projects" title="Permalink to this headline">¶</a></h3>
<p id="index-94">A <strong>stand-alone library</strong> is a library that contains the necessary code to
elaborate the Ada units that are included in the library. A stand-alone
library is a convenient way to add an Ada subsystem to a more global system
whose main is not in Ada since it makes the elaboration of the Ada part mostly
transparent. However, stand-alone libraries are also useful when the main is in
Ada: they provide a means for minimizing relinking and redeployment of complex
systems when localized changes are made.</p>
<p>The name of a stand-alone library, specified with attribute
<code class="docutils literal notranslate"><span class="pre">Library_Name</span></code>, must have the syntax of an Ada identifier.</p>
<p>The most prominent characteristic of a stand-alone library is that it offers a
distinction between interface units and implementation units. Only the former
are visible to units outside the library. A stand-alone library project is thus
characterized by a third attribute, usually <code class="docutils literal notranslate"><span class="pre">Library_Interface</span></code>, in addition
to the two attributes that make a project a Library Project
(<cite>Library_Name</cite> and <cite>Library_Dir</cite>). This third attribute may also be
<code class="docutils literal notranslate"><span class="pre">Interfaces</span></code>. <code class="docutils literal notranslate"><span class="pre">Library_Interface</span></code> only works when the interface is in Ada
and takes a list of units as parameter. <code class="docutils literal notranslate"><span class="pre">Interfaces</span></code> works for any supported
language and takes a list of sources as parameter.</p>
<p id="index-95"><strong>Library_Interface</strong>:</p>
<blockquote>
<div><p>This attribute defines an explicit subset of the units of the project. Units
from projects importing this library project may only “with” units whose
sources are listed in the <cite>Library_Interface</cite>. Other sources are
considered implementation units.</p>
<div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="kr">for</span><span class="p"> </span><span class="n">Library_Dir</span> <span class="kr">use</span><span class="p"> </span><span class="s">&quot;lib&quot;</span><span class="p">;</span>
<span class="kr">for</span><span class="p"> </span><span class="n">Library_Name</span> <span class="kr">use</span><span class="p"> </span><span class="s">&quot;logging&quot;</span><span class="p">;</span>
<span class="kr">for</span><span class="p"> </span><span class="n">Library_Interface</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;lib1&quot;</span><span class="p">,</span> <span class="s">&quot;lib2&quot;</span><span class="o">)</span><span class="p">;</span>  <span class="c">--  unit names</span>
</pre></div>
</div>
</div></blockquote>
<p id="index-96"><strong>Interfaces</strong></p>
<blockquote>
<div><p>This attribute defines an explicit subset of the source files of a project.
Sources from projects importing this project, can only depend on sources from
this subset. This attribute can be used on non library projects. It can also
be used as a replacement for attribute <code class="docutils literal notranslate"><span class="pre">Library_Interface</span></code>, in which
case, units have to be replaced by source files. For multi-language library
projects, it is the only way to make the project a Stand-Alone Library project
whose interface is not purely Ada.</p>
</div></blockquote>
<p id="index-97"><strong>Library_Standalone</strong>:</p>
<blockquote>
<div><p>This attribute defines the kind of stand-alone library to
build. Values are either <code class="docutils literal notranslate"><span class="pre">standard</span></code> (the default), <code class="docutils literal notranslate"><span class="pre">no</span></code> or
<code class="docutils literal notranslate"><span class="pre">encapsulated</span></code>. When <code class="docutils literal notranslate"><span class="pre">standard</span></code> is used the code to elaborate and
finalize the library is embedded, when <code class="docutils literal notranslate"><span class="pre">encapsulated</span></code> is used the
library can furthermore depend only on static libraries (including
the GNAT runtime). This attribute can be set to <code class="docutils literal notranslate"><span class="pre">no</span></code> to make it clear
that the library should not be stand-alone in which case the
<code class="docutils literal notranslate"><span class="pre">Library_Interface</span></code> should not defined. Note that this attribute
only applies to shared libraries, so <code class="docutils literal notranslate"><span class="pre">Library_Kind</span></code> must be set
to <cite>dynamic</cite> or <cite>relocatable</cite>.</p>
<div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="kr">for</span><span class="p"> </span><span class="n">Library_Dir</span> <span class="kr">use</span><span class="p"> </span><span class="s">&quot;lib&quot;</span><span class="p">;</span>
<span class="kr">for</span><span class="p"> </span><span class="n">Library_Name</span> <span class="kr">use</span><span class="p"> </span><span class="s">&quot;logging&quot;</span><span class="p">;</span>
<span class="kr">for</span><span class="p"> </span><span class="n">Library_Kind</span> <span class="kr">use</span><span class="p"> </span><span class="s">&quot;dynamic&quot;</span><span class="p">;</span>
<span class="kr">for</span><span class="p"> </span><span class="n">Library_Interface</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;lib1&quot;</span><span class="p">,</span> <span class="s">&quot;lib2&quot;</span><span class="o">)</span><span class="p">;</span>  <span class="c">--  unit names</span>
<span class="kr">for</span><span class="p"> </span><span class="n">Library_Standalone</span> <span class="kr">use</span><span class="p"> </span><span class="s">&quot;encapsulated&quot;</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>In order to include the elaboration code in the stand-alone library, the binder
is invoked on the closure of the library units creating a package whose name
depends on the library name (<code class="file docutils literal notranslate"><span class="pre">b~logging.ads/b</span></code> in the example).
This binder-generated package includes <strong>initialization</strong> and <strong>finalization</strong>
procedures whose names depend on the library name (<code class="docutils literal notranslate"><span class="pre">logginginit</span></code> and
<code class="docutils literal notranslate"><span class="pre">loggingfinal</span></code> in the example). The object corresponding to this package is
included in the library.</p>
<p id="index-98"><strong>Library_Auto_Init</strong>:</p>
<blockquote>
<div><p>A dynamic stand-alone Library is automatically initialized
if automatic initialization of stand-alone Libraries is supported on the
platform and if attribute <code class="docutils literal notranslate"><span class="pre">Library_Auto_Init</span></code> is not specified or
is specified with the value <code class="docutils literal notranslate"><span class="pre">&quot;true&quot;</span></code>.
Whether a static stand-alone Library is automatically initialized
is platform dependent. Specifying <code class="docutils literal notranslate"><span class="pre">&quot;false&quot;</span></code> for the <code class="docutils literal notranslate"><span class="pre">Library_Auto_Init</span></code>
attribute prevents automatic initialization.</p>
<p>When a non-automatically initialized stand-alone library is used in an
executable, its initialization procedure must be called before any service of
the library is used. When the main subprogram is in Ada, it may mean that the
initialization procedure has to be called during elaboration of another
package.</p>
</div></blockquote>
<p id="index-99"><strong>Library_Dir</strong>:</p>
<blockquote>
<div><p>For a stand-alone library, only the <code class="file docutils literal notranslate"><span class="pre">ALI</span></code> files of the interface units
(those that are listed in attribute <cite>Library_Interface</cite>) are copied to
the library directory. As a consequence, only the interface units may be
imported from Ada units outside of the library. If other units are imported,
the binding phase will fail.</p>
</div></blockquote>
<span class="target" id="index-100"></span><p id="index-101"><strong>Binder’Default_Switches</strong>:</p>
<blockquote>
<div><p>When a stand-alone library is bound, the switches that are specified in
the attribute <code class="docutils literal notranslate"><span class="pre">Binder'Default_Switches</span> <span class="pre">(&quot;Ada&quot;)</span></code> are
used in the call to <em>gnatbind</em>.</p>
</div></blockquote>
<p id="index-102"><strong>Library_Src_Dir</strong>:</p>
<blockquote>
<div><p>This attribute defines the location (absolute or relative to the project
directory) where the sources of the interface units are copied at
installation time.
These sources includes the specs of the interface units along with the
closure of sources necessary to compile them successfully. That may include
bodies and subunits, when pragmas <cite>Inline</cite> are used, or when there are
generic units in specs. This directory cannot point to the object directory
or one of the source directories, but it can point to the library directory,
which is the default value for this attribute.</p>
</div></blockquote>
<p id="index-103"><strong>Library_Symbol_Policy</strong>:</p>
<blockquote>
<div><p>This attribute controls the export of symbols on some platforms (like
Windows, GNU/Linux). It is not supported on all platforms (where it
will just have no effect). It may have one of the
following values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;restricted&quot;</span></code>: The exported symbols will be restricted to the one
from the interface of the stand-alone library. This is either computed
automatically or using the <code class="docutils literal notranslate"><span class="pre">Library_Symbol_File</span></code> if specified.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;unrestricted&quot;</span></code>: All symbols from the stand-alone library are exported.</p></li>
</ul>
</div></blockquote>
<p id="index-104"><strong>Library_Symbol_File</strong></p>
<blockquote>
<div><p>This attribute may define the name of the symbol file to be used when
building a stand-alone library when the symbol policy is
<code class="docutils literal notranslate"><span class="pre">&quot;restricted&quot;</span></code>, on platforms that support symbol control. This file
must contain one symbol per line and only those symbols will be
exported from the stand-alone library.</p>
</div></blockquote>
</div>
<div class="section" id="installing-a-library-with-project-files">
<span id="id22"></span><h3><span class="section-number">2.5.4. </span>Installing a Library with Project Files<a class="headerlink" href="#installing-a-library-with-project-files" title="Permalink to this headline">¶</a></h3>
<p>When using project files, a usable version of the library is created in the
directory specified by the <code class="docutils literal notranslate"><span class="pre">Library_Dir</span></code> attribute of the library
project file. Thus no further action is needed in order to make use of
the libraries that are built as part of the general application build.</p>
<p>You may want to install a library in a context different from where the library
is built. This situation arises with third party suppliers, who may want
to distribute a library in binary form where the user is not expected to be
able to recompile the library. The simplest option in this case is to provide
a project file slightly different from the one used to build the library, by
using the <code class="docutils literal notranslate"><span class="pre">Externally_Built</span></code> attribute. See <a class="reference internal" href="#using-library-projects"><span class="std std-ref">Using Library Projects</span></a>.</p>
<p id="index-105">Another option is to use <em>gprinstall</em> to install the library in a
different context than the build location. The <em>gprinstall</em> tool automatically
generates a project to use this library, and also copies the minimum set of
sources needed to use the library to the install location.
See <a class="reference internal" href="#package-install-attributes"><span class="std std-ref">Package Install Attributes</span></a>.</p>
<span class="target" id="index-106"></span></div>
</div>
<div class="section" id="project-extension">
<span id="index-107"></span><span id="id23"></span><h2><span class="section-number">2.6. </span>Project Extension<a class="headerlink" href="#project-extension" title="Permalink to this headline">¶</a></h2>
<p>During development of a large system, it is sometimes necessary to use
modified versions of some of the source files, without changing the original
sources. This can be achieved through the <em>project extension</em> facility.</p>
<p>Suppose that our example <code class="docutils literal notranslate"><span class="pre">Build</span></code> project is built every night for the whole
team, in some shared directory. A developer usually needs to work on a small
part of the system, and might not want to have a copy of all the sources and
all the object files since that could require too much disk space and too
much time to recompile everything. A better approach is to override some of
the source files in a separate directory, while still using the object files
generated at night for the non-overridden shared sources.</p>
<p>Another use case is a large software system with multiple implementations of
a common interface; in Ada terms, multiple versions of a package body for the
same spec, or perhaps different versions of a package spec that have the same
visible part but different private parts. For example, one package might be
safe for use in tasking programs, while another might be used only in
sequential applications.</p>
<p>A third example is different versions of the same system. For instance,
assume that a <code class="docutils literal notranslate"><span class="pre">Common</span></code> project is used by two development branches. One of
the branches has now been frozen, and no further change can be done to it or
to <code class="docutils literal notranslate"><span class="pre">Common</span></code>. However, on the other development branch the sources in <code class="docutils literal notranslate"><span class="pre">Common</span></code>
are still evolving. A new version of the subsystem is needed, which reuses
as much as possible from the original.</p>
<p id="index-108">Each of these can be implemented in GNAT using <strong>project extension</strong>:</p>
<blockquote>
<div><p>If one project <em>extends</em> another project (the <em>base project</em>) then by default
all source files of the base project are inherited by the extending project,
but the latter can override any of the base project’s source files with a
new version, and can also add new files or remove unnecessary ones. A project
can extend at most one base project.</p>
</div></blockquote>
<p>This facility is somewhat analogous to class extension (with single
inheritance) in object-oriented programming. Project extension hierarchies
are permitted (an extending project may itself serve as a base project and
be extended), and a project that extends a project can also import other projects.</p>
<p>An extending project implicitly inherits all the sources and objects from
its base project. It is possible to create a new version of some of
the sources in one of the additional source directories of the extending
project. Those new versions hide the original versions. As noted above,
adding new sources or removing existing ones is also possible. Here is an
example of how to extend the project <cite>Build</cite> from previous examples:</p>
<blockquote>
<div><div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="k">project </span><span class="nf">Work</span> <span class="kr">extends</span><span class="p"> </span><span class="s">&quot;../bld/build.gpr&quot;</span> <span class="kr">is</span><span class="p"></span>
<span class="k">end </span><span class="nf">Work</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>The project after the <code class="docutils literal notranslate"><span class="pre">extends</span></code> keyword is the base project being extended.
As usual, it can be specified using an absolute path, or a path relative
to any of the directories in the project path. The <code class="docutils literal notranslate"><span class="pre">Work</span></code> project does not
specify source or object directories, so the default values for these
attributes will be used; that is, the current directory (where project
<code class="docutils literal notranslate"><span class="pre">Work</span></code> is placed). We can compile that project with</p>
<blockquote>
<div><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>gprbuild -Pwork
</pre></div>
</div>
</div></blockquote>
<p>If no sources have been placed in the current directory, this command
has no effect, since this project does not change the
sources it inherited from <code class="docutils literal notranslate"><span class="pre">Build</span></code> and thus all the object files
in <code class="docutils literal notranslate"><span class="pre">Build</span></code> and its dependencies are still valid and are reused
automatically.</p>
<p>Suppose we now want to supply an alternative version of <code class="file docutils literal notranslate"><span class="pre">pack.adb</span></code>
but use the existing versions of <code class="file docutils literal notranslate"><span class="pre">pack.ads</span></code> and <code class="file docutils literal notranslate"><span class="pre">proc.adb</span></code>.
We can create the new file in the <code class="docutils literal notranslate"><span class="pre">Work</span></code> project’s directory (for example by
copying the one from the <code class="docutils literal notranslate"><span class="pre">Build</span></code> project and making changes to it).
If new packages are needed at the same time, we simply create new files
in the source directory of the extending project.</p>
<p>When we recompile, <em>GPRbuild</em> will now automatically recompile
this file (thus creating <code class="file docutils literal notranslate"><span class="pre">pack.o</span></code> in the current directory) and
any file that depends on it (thus creating <code class="file docutils literal notranslate"><span class="pre">proc.o</span></code>). Finally, the
executable is also linked locally.</p>
<p>Note that we could have obtained the desired behavior using project import
rather than project inheritance. Some project <code class="docutils literal notranslate"><span class="pre">proj</span></code> would contain
the sources for <code class="file docutils literal notranslate"><span class="pre">pack.ads</span></code> and <code class="file docutils literal notranslate"><span class="pre">proc.adb</span></code>, and <code class="docutils literal notranslate"><span class="pre">Work</span></code> would
import <code class="docutils literal notranslate"><span class="pre">proj</span></code> and add <code class="file docutils literal notranslate"><span class="pre">pack.adb</span></code>. In this situation  <code class="docutils literal notranslate"><span class="pre">proj</span></code>
cannot contain the original version of <code class="file docutils literal notranslate"><span class="pre">pack.adb</span></code> since otherwise
two versions of the same unit would be in project import closure of <code class="docutils literal notranslate"><span class="pre">proj</span></code>,
which is not allowed. In general we do not recommended placing the spec and
body of a unit in different projects, since this affects their autonomy and
reusability.</p>
<p>In a project file that extends another project, it is possible to
indicate that an inherited source is <strong>not part</strong> of the sources of the
extending project. This is necessary, for example, when a package spec has
been overridden in such a way that a body is forbidden. In this case, it is
necessary to indicate that the inherited body is not part of the sources
of the project, otherwise there will be a compilation error.</p>
<span class="target" id="index-109"></span><p id="index-110">Two attributes are available for this purpose:</p>
<ul>
<li><p><strong>Excluded_Source_Files</strong>, whose value is a list of file names, and</p></li>
<li><p><strong>Excluded_Source_List_File</strong>, whose value is the path of a text file
containing one file name per line.</p>
<div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="k">project </span><span class="nf">Work</span> <span class="kr">extends</span><span class="p"> </span><span class="s">&quot;../bld/build.gpr&quot;</span> <span class="kr">is</span><span class="p"></span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Source_Files</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;pack.ads&quot;</span><span class="o">)</span><span class="p">;</span>
   <span class="c">--  New spec of Pkg does not need a completion</span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Excluded_Source_Files</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;pack.adb&quot;</span><span class="o">)</span><span class="p">;</span>
<span class="k">end </span><span class="nf">Work</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ul>
<p>All tool packages that are not declared in the extending project are inherited from
the base project, with their attributes, with the exception of
<code class="docutils literal notranslate"><span class="pre">Linker'Linker_Options</span></code> which is never inherited. In particular, an
extending project retains all the switches specified in its base project.</p>
<p>At the project level, if they are not declared in the extending project, some
attributes are inherited from the base project. They are:
<code class="docutils literal notranslate"><span class="pre">Languages</span></code>, <code class="docutils literal notranslate"><span class="pre">Main</span></code> (for a root non library project) and
<code class="docutils literal notranslate"><span class="pre">Library_Name</span></code> (for a project extending a library project).</p>
<div class="section" id="importing-and-project-extension">
<span id="id24"></span><h3><span class="section-number">2.6.1. </span>Importing and Project Extension<a class="headerlink" href="#importing-and-project-extension" title="Permalink to this headline">¶</a></h3>
<p>One of the fundamental restrictions for project extension is the following:</p>
<blockquote>
<div><p><strong>A project is not allowed to import, directly or indirectly, both an extending
project P and also some project that P extends either directly or
indirectly</strong></p>
</div></blockquote>
<p>In the absence of this rule, two imports might access different versions of the
same source file, or different sets of tool switches for the same source file
(one from the base project and the other from an extending project).</p>
<p>As an example of this problem, consider the following set of project files:</p>
<ul class="simple">
<li><p><code class="file docutils literal notranslate"><span class="pre">a.gpr</span></code> which contains the source files <code class="file docutils literal notranslate"><span class="pre">foo.ads</span></code> and
<code class="file docutils literal notranslate"><span class="pre">foo.adb</span></code>, among others</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">b.gpr</span></code> which imports <code class="file docutils literal notranslate"><span class="pre">a.gpr</span></code> (one of its source files
<code class="samp docutils literal notranslate"><span class="pre">with</span></code>s <code class="docutils literal notranslate"><span class="pre">foo</span></code>)</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">c.gpr</span></code> which imports <code class="file docutils literal notranslate"><span class="pre">b.gpr</span></code></p></li>
</ul>
<p>Suppose we want to extend the projects as follows:</p>
<ul class="simple">
<li><p><code class="file docutils literal notranslate"><span class="pre">a_ext.gpr</span></code> extends <code class="file docutils literal notranslate"><span class="pre">a.gpr</span></code> and overrides <code class="file docutils literal notranslate"><span class="pre">foo.adb</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">c_ext.gpr</span></code> extends <code class="file docutils literal notranslate"><span class="pre">c.gpr</span></code>, overriding one of its source files</p></li>
</ul>
<p>Since <code class="file docutils literal notranslate"><span class="pre">c_ext.gpr</span></code> needs to access sources in <code class="file docutils literal notranslate"><span class="pre">b.gpr</span></code>, it will
import <code class="file docutils literal notranslate"><span class="pre">b.gpr</span></code></p>
<p>Finally, <code class="file docutils literal notranslate"><span class="pre">main.gpr</span></code> needs to access the overridden source files in
<code class="file docutils literal notranslate"><span class="pre">a_ext.gpr</span></code> and <code class="file docutils literal notranslate"><span class="pre">c_ext.gpr</span></code> and thus will import these two
projects.</p>
<p>This project structure is shown in <code class="xref std std-numref docutils literal notranslate"><span class="pre">figure</span> <span class="pre">#</span></code>.</p>
<div class="figure align-center" id="id66">
<span id="fig-badproject"></span><img alt="../_images/importing_and_project_extension_figure_1.png" src="../_images/importing_and_project_extension_figure_1.png" />
<p class="caption"><span class="caption-number">Fig. 2.1 </span><span class="caption-text">Example of Source File Ambiguity from <cite>imports</cite>/<cite>extends</cite> Violation</span><a class="headerlink" href="#id66" title="Permalink to this image">¶</a></p>
</div>
<p>This violates the restriction above, since <code class="file docutils literal notranslate"><span class="pre">main.gpr</span></code> imports the extending project
<code class="file docutils literal notranslate"><span class="pre">a_ext.gpr</span></code> and also (indirectly through <code class="file docutils literal notranslate"><span class="pre">c_ext.gpr</span></code> and <code class="file docutils literal notranslate"><span class="pre">b.gpr</span></code>)
the project <code class="file docutils literal notranslate"><span class="pre">a.gpr</span></code> that <code class="file docutils literal notranslate"><span class="pre">a_ext.gpr</span></code> extends.
The problem is that the import path through <code class="file docutils literal notranslate"><span class="pre">c_ext.gpr</span></code> and <code class="file docutils literal notranslate"><span class="pre">b.gpr</span></code> would build with the version
of <code class="file docutils literal notranslate"><span class="pre">foo.adb</span></code> from <code class="file docutils literal notranslate"><span class="pre">a.gpr</span></code>, whereas the import path through <code class="file docutils literal notranslate"><span class="pre">a_ext.gpr</span></code> would use that project’s
version of <code class="file docutils literal notranslate"><span class="pre">foo.adb</span></code>.
The error will be detected and reported by <code class="docutils literal notranslate"><span class="pre">gprbuild</span></code>.</p>
<p>A solution is to introduce an “empty” extension of <code class="file docutils literal notranslate"><span class="pre">b.gpr</span></code>, which is imported by
<code class="file docutils literal notranslate"><span class="pre">c_ext.gpr</span></code> and imports <code class="file docutils literal notranslate"><span class="pre">a_ext.gpr</span></code>:</p>
<blockquote>
<div><div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="kr">with</span><span class="p"> </span><span class="s">&quot;a_ext.gpr&quot;</span><span class="p">;</span>
<span class="k">project </span><span class="nf">B_Ext</span> <span class="kr">extends</span><span class="p"> </span><span class="s">&quot;b.gpr&quot;</span> <span class="kr">is</span><span class="p"></span>
<span class="k">end </span><span class="nf">B_Ext</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>This project structure is shown in <code class="xref std std-numref docutils literal notranslate"><span class="pre">figure</span> <span class="pre">#</span></code>.</p>
<div class="figure align-center" id="id67">
<span id="fig-goodproject"></span><img alt="../_images/importing_and_project_extension_figure_2.png" src="../_images/importing_and_project_extension_figure_2.png" />
<p class="caption"><span class="caption-number">Fig. 2.2 </span><span class="caption-text">Using “Empty” Project Extension to Avoid <cite>imports</cite>/<cite>extends</cite> Violation</span><a class="headerlink" href="#id67" title="Permalink to this image">¶</a></p>
</div>
<p>There is now no ambiguity over which version of <code class="file docutils literal notranslate"><span class="pre">foo.adb</span></code> to use;
it will be the one from <code class="file docutils literal notranslate"><span class="pre">a_ext.gpr</span></code>.</p>
<p id="index-111">When extending a large system spanning multiple projects, it is often
inconvenient to extend every project in the project import closure that
is impacted by a small change introduced in a low layer. In such cases,
it is possible to create an <strong>implicit extension</strong> of an entire hierarchy
using the <strong>extends all</strong> relationship.</p>
<p>When a project <code class="docutils literal notranslate"><span class="pre">P</span></code> is extended using <cite>extends all</cite> inheritance, all projects
that are imported by <code class="docutils literal notranslate"><span class="pre">P</span></code>, both directly and indirectly, are considered virtually
extended. That is, the project manager creates implicit projects
that extend every project in the project import closure; all these implicit
projects do not control sources on their own and use the object directory of
the <cite>extends all</cite> project.</p>
<p>It is possible to explicitly extend one or more projects in the import closure
in order to adapt the sources. These extending projects must be imported by
the <code class="docutils literal notranslate"><span class="pre">extends</span> <span class="pre">all</span></code> project, which will replace the corresponding virtual
projects with the explicit ones.</p>
<p>When building such a project closure extension, the project manager will
ensure recompilation of both the modified sources and the sources in implicit
extending projects that depend on them.</p>
<p>To illustrate the <code class="docutils literal notranslate"><span class="pre">extends</span> <span class="pre">all</span></code> feature, here’s a slight variation on the
earlier examples.  We have a <code class="docutils literal notranslate"><span class="pre">Main</span></code> project that imports project <code class="docutils literal notranslate"><span class="pre">C</span></code>,
which imports <code class="docutils literal notranslate"><span class="pre">B</span></code>, which imports <code class="docutils literal notranslate"><span class="pre">A</span></code>. The source files in <code class="docutils literal notranslate"><span class="pre">Main</span></code> refer
to compilation units whose sources are in <code class="docutils literal notranslate"><span class="pre">C</span></code> and <code class="docutils literal notranslate"><span class="pre">A</span></code>.  (Recall that
<code class="docutils literal notranslate"><span class="pre">imports</span></code> is transitive, so <code class="docutils literal notranslate"><span class="pre">A</span></code> is implicitly accessible in <code class="docutils literal notranslate"><span class="pre">Main</span></code>.)</p>
<p>This project structure is shown in <code class="xref std std-numref docutils literal notranslate"><span class="pre">figure</span> <span class="pre">#</span></code>.</p>
<div class="figure align-center" id="id68">
<span id="fig-simpleproject"></span><img alt="../_images/importing_and_project_extension_figure_3.png" src="../_images/importing_and_project_extension_figure_3.png" />
<p class="caption"><span class="caption-number">Fig. 2.3 </span><span class="caption-text">Simple Project Structure before Extension</span><a class="headerlink" href="#id68" title="Permalink to this image">¶</a></p>
</div>
<p>Suppose that we want to extend <code class="file docutils literal notranslate"><span class="pre">a.gpr</span></code>, overriding one of
its source files, and create a new version of <code class="file docutils literal notranslate"><span class="pre">main.gpr</span></code>
that can access the overridden file in the extending project
<code class="file docutils literal notranslate"><span class="pre">a_ext.gpr</span></code> and otherwise use the sources in <code class="file docutils literal notranslate"><span class="pre">b.gpr</span></code>
and <code class="file docutils literal notranslate"><span class="pre">c.gpr</span></code>.</p>
<p>Instead of explicitly defining  empty projects to extend <code class="file docutils literal notranslate"><span class="pre">b.gpr</span></code> and
<code class="file docutils literal notranslate"><span class="pre">c.gpr</span></code>, we can create a new project <code class="file docutils literal notranslate"><span class="pre">main_ext.gpr</span></code> that does an
<code class="docutils literal notranslate"><span class="pre">extends</span> <span class="pre">all</span></code> of <code class="file docutils literal notranslate"><span class="pre">main.gpr</span></code> and imports <code class="file docutils literal notranslate"><span class="pre">a_ext.gpr</span></code>. The
<code class="docutils literal notranslate"><span class="pre">extends_all</span></code> will implicitly create the empty projects <code class="file docutils literal notranslate"><span class="pre">b_ext.gpr</span></code>
and <code class="file docutils literal notranslate"><span class="pre">c_ext.gpr</span></code> as well as the relevant import relationships:</p>
<ul class="simple">
<li><p><code class="file docutils literal notranslate"><span class="pre">c_ext.gpr</span></code> will import
<code class="file docutils literal notranslate"><span class="pre">b_ext.gpr</span></code>, which will import <code class="file docutils literal notranslate"><span class="pre">a_ext.gpr</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">main_ext.gpr</span></code> will implicitly import <code class="file docutils literal notranslate"><span class="pre">c_ext.gpr</span></code> since
<code class="file docutils literal notranslate"><span class="pre">main.gpr</span></code> imports <code class="file docutils literal notranslate"><span class="pre">c.gpr</span></code>.</p></li>
</ul>
<p>The resulting project structure is shown in <code class="xref std std-numref docutils literal notranslate"><span class="pre">figure</span> <span class="pre">#</span></code>,
where the italicized labels, dashed arrows, and dashed boxes indicate what was
added implicitly as an effect of the <code class="docutils literal notranslate"><span class="pre">extends_all</span></code>.</p>
<div class="figure align-center" id="id69">
<span id="fig-extends-all"></span><img alt="../_images/importing_and_project_extension_figure_4.png" src="../_images/importing_and_project_extension_figure_4.png" />
<p class="caption"><span class="caption-number">Fig. 2.4 </span><span class="caption-text">Project Structure with <code class="docutils literal notranslate"><span class="pre">extends_all</span></code></span><a class="headerlink" href="#id69" title="Permalink to this image">¶</a></p>
</div>
<p>When project <code class="file docutils literal notranslate"><span class="pre">main_ext.gpr</span></code> is built, the entire modified project space is
considered for recompilation, including the sources from <code class="file docutils literal notranslate"><span class="pre">b.gpr</span></code> and
<code class="file docutils literal notranslate"><span class="pre">c.gpr</span></code> that are affected by the changes to <code class="file docutils literal notranslate"><span class="pre">a.gpr</span></code>.</p>
<span class="target" id="index-112"></span></div>
</div>
<div class="section" id="child-projects">
<span id="index-113"></span><span id="id25"></span><h2><span class="section-number">2.7. </span>Child Projects<a class="headerlink" href="#child-projects" title="Permalink to this headline">¶</a></h2>
<p>In order to more clearly express the relationship between
a project <code class="docutils literal notranslate"><span class="pre">Q</span></code> and some other project <code class="docutils literal notranslate"><span class="pre">P</span></code> that <code class="docutils literal notranslate"><span class="pre">Q</span></code>
either imports or extends, you can use the notation <code class="docutils literal notranslate"><span class="pre">P.Q</span></code>
to declare <code class="docutils literal notranslate"><span class="pre">Q</span></code> as a <strong>child</strong> of <code class="docutils literal notranslate"><span class="pre">P</span></code>.
The project <code class="docutils literal notranslate"><span class="pre">P</span></code> is then referred to as the <strong>parent</strong> of <code class="docutils literal notranslate"><span class="pre">Q</span></code>.
This is useful, for example, when the purpose of the child
is to serve as a testing subsystem for the parent.</p>
<p>The visibility of the child on the sources and other properties
of the parent is determined by whether the child imports or
extends the parent. No additional visibility is obtained by
declaring the project as a child; the <cite>parent.child</cite> notation
serves solely as a naming convention  to convey to the reader
the closeness of the relationship between the projects.</p>
<p>For example:</p>
<blockquote>
<div><div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="c">-- math_proj.gpr</span>
<span class="k">project </span><span class="nf">Math_Proj</span> <span class="kr">is</span><span class="p"></span>
   <span class="o">...</span>
<span class="k">end </span><span class="nf">Math_Proj</span><span class="p">;</span>

<span class="c">---------------</span>

<span class="kr">with</span><span class="p"> </span><span class="s">&quot;math_proj.gpr&quot;</span><span class="p">;</span>
<span class="k">project </span><span class="nf">Math_Proj.Tests</span> <span class="kr">is</span><span class="p"> </span>     <span class="c">-- Legal; child imports parent</span>
   <span class="o">...</span>
<span class="k">end </span><span class="nf">Math_Proj.Tests</span><span class="p">;</span>

<span class="c">---------------</span>

<span class="k">project </span><span class="nf">Math_Proj.High_Performance</span>
   <span class="kr">extends</span><span class="p"> </span><span class="s">&quot;math_proj.gpr&quot;</span> <span class="kr">is</span><span class="p"> </span>  <span class="c">-- Legal; child extends parent</span>
   <span class="o">...</span>
<span class="k">end </span><span class="nf">Math_Proj.High_Performance</span><span class="p">;</span>

<span class="c">---------------</span>

<span class="k">project </span><span class="nf">GUI_Proj.Tests</span> <span class="kr">is</span><span class="p"> </span>      <span class="c">-- Illegal</span>
   <span class="o">...</span>
<span class="k">end </span><span class="nf">GUI_Proj.Tests</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>Child projects may in turn be the parents of other projects, so
in general a project hierarchy can be created. A project
may be the parent of many child projects, but a child project
can only have one parent.</p>
<p>Note that child projects have slightly different semantics from
their Ada language analog (child units). An Ada child unit implicitly
<code class="samp docutils literal notranslate"><span class="pre">with</span></code>s its parent, whereas a child project must have an explicit
<code class="samp docutils literal notranslate"><span class="pre">with</span></code> clause (or else extend its parent). The need to explicitly
<code class="samp docutils literal notranslate"><span class="pre">with</span></code> or extend the parent project helps avoid the error of
unintentionally creating a child of some project that happens
to be on the project path.</p>
</div>
<div class="section" id="aggregate-projects">
<span id="index-114"></span><span id="id26"></span><h2><span class="section-number">2.8. </span>Aggregate Projects<a class="headerlink" href="#aggregate-projects" title="Permalink to this headline">¶</a></h2>
<p>Aggregate projects are an extension of the project paradigm, and are
designed to handle a few specific situations that cannot be solved directly
using standard projects. This section will present several such use
cases.</p>
<div class="section" id="building-all-main-programs-from-a-single-project-closure">
<span id="id27"></span><h3><span class="section-number">2.8.1. </span>Building all main programs from a single project closure<a class="headerlink" href="#building-all-main-programs-from-a-single-project-closure" title="Permalink to this headline">¶</a></h3>
<p>A large application is typically organized into modules and submodules,
which are conveniently represented as a project graph (the project import
closure): a “root” project <cite>A</cite> <code class="samp docutils literal notranslate"><span class="pre">with</span></code>s the projects for modules <cite>B</cite> and <cite>C</cite>,
which in turn <code class="samp docutils literal notranslate"><span class="pre">with</span></code> projects for submodules.</p>
<p>Very often, modules will build their own executables (for testing
purposes for instance) or libraries (for easier reuse in various
contexts).</p>
<p>However, if you build your project through <em>GPRbuild</em>, using a syntax similar to</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gprbuild</span> <span class="o">-</span><span class="n">PA</span><span class="o">.</span><span class="n">gpr</span>
</pre></div>
</div>
</div></blockquote>
<p>this will only rebuild the main programs of project A, not those of the
imported projects B and C. Therefore you have to spawn several
<em>GPRbuild</em> commands, one per project, to build all executables.
This is somewhat inconvenient, but more importantly is inefficient
because <em>GPRbuild</em> needs to do duplicate work to ensure that sources are
up-to-date, and cannot easily compile things in parallel when using
the <code class="xref std std-option docutils literal notranslate"><span class="pre">-j</span></code> switch.</p>
<p>Also, libraries are always rebuilt when building a project.</p>
<p>To solve this problem you can define an <em>aggregate project</em> <code class="docutils literal notranslate"><span class="pre">Agg</span></code> that
groups <code class="docutils literal notranslate"><span class="pre">A</span></code>, <code class="docutils literal notranslate"><span class="pre">B</span></code> and <code class="docutils literal notranslate"><span class="pre">C</span></code>:</p>
<blockquote>
<div><div class="highlight-gpr notranslate" id="index-115"><div class="highlight"><pre><span></span><span class="kr">aggregate</span><span class="p"> </span><span class="k">project </span><span class="nf">Agg</span> <span class="kr">is</span><span class="p"></span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Project_Files</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;a.gpr&quot;</span><span class="p">,</span> <span class="s">&quot;b.gpr&quot;</span><span class="p">,</span> <span class="s">&quot;c.gpr&quot;</span><span class="o">)</span><span class="p">;</span>
<span class="k">end </span><span class="nf">Agg</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>Then, when you build with</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gprbuild</span> <span class="o">-</span><span class="n">PAgg</span><span class="o">.</span><span class="n">gpr</span>
</pre></div>
</div>
</div></blockquote>
<p>this will build all main programs from <code class="docutils literal notranslate"><span class="pre">A</span></code>, <code class="docutils literal notranslate"><span class="pre">B</span></code> and <code class="docutils literal notranslate"><span class="pre">C</span></code>.</p>
<p>If <cite>B</cite> or <cite>C</cite> do not define any main program (through their <cite>Main</cite>
attribute), all their sources are built. When you do not group them
in an aggregate project, only those sources that are needed by <cite>A</cite>
will be built.</p>
<p>If you add a main to a project <code class="docutils literal notranslate"><span class="pre">P</span></code> not already explicitly referenced in the
aggregate project, you will need to add <code class="file docutils literal notranslate"><span class="pre">p.gpr</span></code> in the list of project
files for the aggregate project, or the main will not be built when
building the aggregate project.</p>
</div>
<div class="section" id="building-a-set-of-projects-with-a-single-command">
<span id="id28"></span><h3><span class="section-number">2.8.2. </span>Building a set of projects with a single command<a class="headerlink" href="#building-a-set-of-projects-with-a-single-command" title="Permalink to this headline">¶</a></h3>
<p>Another application of aggregate projects is when you have multiple
applications and libraries that are built independently
(but can be built in parallel). For instance, you might have a project graph
rooted at <code class="docutils literal notranslate"><span class="pre">A</span></code>, and another one (which might share some subprojects) rooted
at <code class="docutils literal notranslate"><span class="pre">B</span></code>.</p>
<p>Using only <em>GPRbuild</em>, you could do</p>
<blockquote>
<div><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>gprbuild -PA.gpr
gprbuild -PB.gpr
</pre></div>
</div>
</div></blockquote>
<p>to build both. But again, <em>GPRbuild</em> has to do some duplicate work for
those files that are shared between the two, and cannot truly build
things in parallel efficiently.</p>
<p>If the two projects are really independent, share no sources other
than through a common subproject, and have no source files with a
common basename, you could create a project <code class="docutils literal notranslate"><span class="pre">C</span></code> that imports <code class="docutils literal notranslate"><span class="pre">A</span></code> and
<code class="docutils literal notranslate"><span class="pre">B</span></code>. But these restrictions are often too strong, and one has to build
them independently. An aggregate project does not have these
limitations and can aggregate two project graphs that have common
sources:</p>
<blockquote>
<div><div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="kr">aggregate</span><span class="p"> </span><span class="k">project </span><span class="nf">Agg</span> <span class="kr">is</span><span class="p"></span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Project_Files</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;a.gpr&quot;</span><span class="p">,</span> <span class="s">&quot;b.gpr&quot;</span><span class="o">)</span><span class="p">;</span>
<span class="k">end </span><span class="nf">Agg</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>This scenario is particularly useful in environments like VxWorks 653
where the applications running in the multiple partitions can be built
in parallel through a single <em>GPRbuild</em> command. This also works well
with Annex E of the Ada Language Reference Manual.</p>
</div>
<div class="section" id="defining-a-build-environment">
<span id="id29"></span><h3><span class="section-number">2.8.3. </span>Defining a build environment<a class="headerlink" href="#defining-a-build-environment" title="Permalink to this headline">¶</a></h3>
<p>The environment variables at the time you launch <em>GPRbuild</em>
will influence the view these tools have of the project
(for example <span class="target" id="index-116"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code> to find the compiler, <span class="target" id="index-117"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">ADA_PROJECT_PATH</span></code> or
<span class="target" id="index-118"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">GPR_PROJECT_PATH</span></code> to find the projects, and environment variables
that are referenced in project files
through the <code class="docutils literal notranslate"><span class="pre">external</span></code> built-in function). Several command line switches
can be used to override those (<code class="xref std std-option docutils literal notranslate"><span class="pre">-X</span></code> or <code class="xref std std-option docutils literal notranslate"><span class="pre">-aP</span></code>), but on some
systems and with some projects, this might make the command line too long,
and on all systems often make it hard to read.</p>
<p>An aggregate project can be used to set the environment for all
projects built through that aggregate. One of the benefits is that
you can put the aggregate project under configuration management, and
make sure all your users have a consistent environment when
building. For example:</p>
<blockquote>
<div><div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="kr">aggregate</span><span class="p"> </span><span class="k">project </span><span class="nf">Agg</span> <span class="kr">is</span><span class="p"></span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Project_Files</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;A.gpr&quot;</span><span class="p">,</span> <span class="s">&quot;B.gpr&quot;</span><span class="o">)</span><span class="p">;</span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Project_Path</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;../dir1&quot;</span><span class="p">,</span> <span class="s">&quot;../dir1/dir2&quot;</span><span class="o">)</span><span class="p">;</span>
   <span class="kr">for</span><span class="p"> </span><span class="kr">External</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;BUILD&quot;</span><span class="o">)</span> <span class="kr">use</span><span class="p"> </span><span class="s">&quot;PRODUCTION&quot;</span><span class="p">;</span>

   <span class="k">package </span><span class="nf">Builder</span> <span class="kr">is</span><span class="p"></span>
      <span class="kr">for</span><span class="p"> </span><span class="n">Global_Compilation_Switches</span> <span class="o">(</span><span class="s">&quot;Ada&quot;</span><span class="o">)</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;-g&quot;</span><span class="o">)</span><span class="p">;</span>
   <span class="k">end </span><span class="nf">Builder</span><span class="p">;</span>
<span class="k">end </span><span class="nf">Agg</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>Another use of aggregate projects is to simulate the
referencing of external variables in <code class="samp docutils literal notranslate"><span class="pre">with</span></code> clauses,
For technical reasons the following project file is not
allowed:</p>
<blockquote>
<div><div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="kr">with</span><span class="p"> </span><span class="n">external</span><span class="o">(</span><span class="s">&quot;SETUP&quot;</span><span class="o">)</span> <span class="o">&amp;</span> <span class="s">&quot;path/prj.gpr&quot;</span><span class="p">;</span>   <span class="c">--  ILLEGAL</span>
<span class="k">project </span><span class="nf">MyProject</span> <span class="kr">is</span><span class="p"></span>
   <span class="o">...</span>
<span class="k">end </span><span class="nf">MyProject</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>However, you can use aggregate projects to obtain an equivalent effect:</p>
<blockquote>
<div><div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="kr">aggregate</span><span class="p"> </span><span class="k">project </span><span class="nf">Agg</span> <span class="kr">is</span><span class="p"></span>
    <span class="kr">for</span><span class="p"> </span><span class="n">Project_Path</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="n">external</span><span class="o">(</span><span class="s">&quot;SETUP&quot;</span><span class="o">)</span> <span class="o">&amp;</span> <span class="s">&quot;path&quot;</span><span class="o">)</span><span class="p">;</span>
    <span class="kr">for</span><span class="p"> </span><span class="n">Project_Files</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;myproject.gpr&quot;</span><span class="o">)</span><span class="p">;</span>
<span class="k">end </span><span class="nf">Agg</span><span class="p">;</span>
</pre></div>
</div>
<div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="kr">with</span><span class="p"> </span><span class="s">&quot;prj.gpr&quot;</span><span class="p">;</span>  <span class="c">--  searched on Agg&#39;Project_Path</span>
<span class="k">project </span><span class="nf">MyProject</span> <span class="kr">is</span><span class="p"></span>
   <span class="o">...</span>
<span class="k">end </span><span class="nf">MyProject</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="improving-builder-performance">
<span id="id30"></span><h3><span class="section-number">2.8.4. </span>Improving builder performance<a class="headerlink" href="#improving-builder-performance" title="Permalink to this headline">¶</a></h3>
<p>The loading of aggregate projects is optimized in <em>GPRbuild</em>,
so that all files are searched for only once on the disk
(thus reducing the number of system calls and yielding faster
compilation times, especially on systems with sources on remote
servers). As part of the loading, <em>GPRbuild</em>
computes how and where a source file should be compiled, and even if it is
located several times in the aggregated projects it will be compiled only
once.</p>
<p id="index-119">Since there is no ambiguity as to which switches should be used, individual
compilations, binds and links can be performed in parallel (through the usual
<code class="xref std std-option docutils literal notranslate"><span class="pre">-j</span></code> switch) and this can be done while maximizing the use of CPUs
(compared to launching multiple <em>GPRbuild</em> commands in parallel). The -j
option can control parallelization of compilation, binding, and linking
separately with -jc, -jb, and -jl variants accordingly.</p>
</div>
<div class="section" id="syntax-of-aggregate-projects">
<span id="id31"></span><h3><span class="section-number">2.8.5. </span>Syntax of aggregate projects<a class="headerlink" href="#syntax-of-aggregate-projects" title="Permalink to this headline">¶</a></h3>
<p>An aggregate project follows the general syntax of project files. The
recommended extension is still <code class="file docutils literal notranslate"><span class="pre">.gpr</span></code>. However, a special
<code class="docutils literal notranslate"><span class="pre">aggregate</span></code> qualifier must appear before the keyword
<code class="docutils literal notranslate"><span class="pre">project</span></code>.</p>
<p>An aggregate project cannot <code class="samp docutils literal notranslate"><span class="pre">with</span></code> any other project (standard or
aggregate), except an abstract project (which can be used to share attribute
values). Also, aggregate projects cannot be extended or imported though a
<code class="samp docutils literal notranslate"><span class="pre">with</span></code> clause by any other project. Building other aggregate projects from
an aggregate project is done through the <code class="docutils literal notranslate"><span class="pre">Project_Files</span></code> attribute (see below).</p>
<p>An aggregate project does not have any source files directly (only
through other standard projects). Therefore a number of the standard
attributes and packages are forbidden in an aggregate project. Here is a
(non exhaustive) list:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Languages</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Source_Files</span></code>, <code class="docutils literal notranslate"><span class="pre">Source_List_File</span></code> and other attributes dealing with
list of sources.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Source_Dirs</span></code> and <code class="docutils literal notranslate"><span class="pre">Exec_Dir</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Library_Dir</span></code>, <code class="docutils literal notranslate"><span class="pre">Library_Name</span></code> and other library-related attributes</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Main</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Roots</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Externally_Built</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Inherit_Source_Path</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Excluded_Source_Dirs</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Locally_Removed_Files</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Excluded_Source_Files</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Excluded_Source_List_File</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Interfaces</span></code></p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">Object_Dir</span></code> attribute is allowed and used by some analysis tools such
as <cite>gnatcheck</cite> to store intermediate files and aggregated results. The
attribute value is just ignored by the compilation toolchain, for which every
artifact of interest is best associated with the leaf non aggregate projects
and stored in the corresponding <code class="docutils literal notranslate"><span class="pre">Object_Dir</span></code>.</p>
<p>The only package that is allowed (and optional) is
<code class="docutils literal notranslate"><span class="pre">Builder</span></code>. Other packages (in particular <code class="docutils literal notranslate"><span class="pre">Compiler</span></code>, <code class="docutils literal notranslate"><span class="pre">Binder</span></code> and <code class="docutils literal notranslate"><span class="pre">Linker</span></code>)
are forbidden.</p>
<p>The following three attributes can be used only in an aggregate project:</p>
<p id="index-120"><strong>Project_Files</strong>:</p>
<blockquote>
<div><p>This attribute is compulsory.
It specifies a list of constituent <code class="file docutils literal notranslate"><span class="pre">.gpr</span></code> files
that are grouped in the aggregate. The list may be empty. The project
files can be any projects except configuration or abstract projects;
they can be other aggregate projects. When
grouping standard projects, you can have both the root of a project import
closure (and you do not need to specify all its imported projects), and
any project within the closure.</p>
<p>The basic idea is to specify all those projects that have
main programs you want to build and link, or libraries you want to
build. You can specify projects that do not use the <code class="docutils literal notranslate"><span class="pre">Main</span></code>
attribute or the <code class="docutils literal notranslate"><span class="pre">Library_*</span></code> attributes, and the result will be to
build all their source files (not just the ones needed by other
projects).</p>
<p>The file can include paths (absolute or relative). Paths are relative to
the location of the aggregate project file itself (if you use a base name,
the <code class="file docutils literal notranslate"><span class="pre">.gpr</span></code> file is expected in the same directory as the aggregate
project file). The environment variables <span class="target" id="index-121"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">ADA_PROJECT_PATH</span></code>,
<span class="target" id="index-122"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">GPR_PROJECT_PATH</span></code> and <span class="target" id="index-123"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">GPR_PROJECT_PATH_FILE</span></code> are not used to
find the project files. The extension <code class="file docutils literal notranslate"><span class="pre">.gpr</span></code> is mandatory, since
this attribute contains file names, not project names.</p>
<p>Paths can also include the <code class="docutils literal notranslate"><span class="pre">&quot;*&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;**&quot;</span></code> globbing patterns. The
latter indicates that any subdirectory (recursively) will be
searched for matching files. The <code class="docutils literal notranslate"><span class="pre">&quot;**&quot;</span></code> pattern can only occur at the
last position in the directory part (i.e. <code class="docutils literal notranslate"><span class="pre">&quot;a/**/*.gpr&quot;</span></code> is supported, but
not <code class="docutils literal notranslate"><span class="pre">&quot;**/a/*.gpr&quot;</span></code>). Starting the pattern with <code class="docutils literal notranslate"><span class="pre">&quot;**&quot;</span></code> is equivalent
to starting with <code class="docutils literal notranslate"><span class="pre">&quot;./**&quot;</span></code>.</p>
<p>At present the pattern <code class="docutils literal notranslate"><span class="pre">&quot;*&quot;</span></code> is only allowed in the filename part, not
in the directory part. This is mostly for efficiency reasons to limit the
number of system calls that are needed.</p>
<p>Here are a few examples:</p>
<blockquote>
<div><div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="kr">for</span><span class="p"> </span><span class="n">Project_Files</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;a.gpr&quot;</span><span class="p">,</span> <span class="s">&quot;subdir/b.gpr&quot;</span><span class="o">)</span><span class="p">;</span>
<span class="c">--  two specific projects relative to the directory of agg.gpr</span>

<span class="kr">for</span><span class="p"> </span><span class="n">Project_Files</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;**/*.gpr&quot;</span><span class="o">)</span><span class="p">;</span>
<span class="c">--  all projects recursively, except in the current directory</span>

<span class="kr">for</span><span class="p"> </span><span class="n">Project_Files</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;**/*.gpr&quot;</span><span class="p">,</span> <span class="s">&quot;*.gpr&quot;</span><span class="o">)</span><span class="p">;</span>
<span class="c">--  all projects recursively</span>
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
<p id="index-124"><strong>Project_Path</strong>:</p>
<blockquote>
<div><p>This attribute can be used to specify a list of directories in
which to search for project files in <code class="samp docutils literal notranslate"><span class="pre">with</span></code> clauses.</p>
<p>When you specify a project in <code class="docutils literal notranslate"><span class="pre">Project_Files</span></code> (say <code class="file docutils literal notranslate"><span class="pre">x/y/a.gpr</span></code>), and
<code class="file docutils literal notranslate"><span class="pre">a.gpr</span></code> imports a project <code class="file docutils literal notranslate"><span class="pre">b.gpr</span></code>, only <code class="file docutils literal notranslate"><span class="pre">b.gpr</span></code> is
searched in the project path. The file <code class="file docutils literal notranslate"><span class="pre">a.gpr</span></code> must be exactly at
<code class="samp docutils literal notranslate"><em><span class="pre">dir</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">aggregate</span></em><span class="pre">/x/y/a.gpr</span></code>.</p>
<p>This attribute, however, does not affect the search for the aggregated
project files specified with <code class="docutils literal notranslate"><span class="pre">Project_Files</span></code>.</p>
<p>Each aggregate project has its own <code class="docutils literal notranslate"><span class="pre">Project_Path</span></code> (thus if
<code class="file docutils literal notranslate"><span class="pre">agg1.gpr</span></code> includes <code class="file docutils literal notranslate"><span class="pre">agg2.gpr</span></code>, they can potentially both have a
different <cite>Project_Path</cite>).</p>
<p>This project path is defined as the concatenation, in this order, of:</p>
<ul class="simple">
<li><p>the current directory;</p></li>
<li><p>followed by the command line <code class="xref std std-option docutils literal notranslate"><span class="pre">-aP</span></code> switches;</p></li>
<li><p>then the directories from the <span class="target" id="index-125"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">GPR_PROJECT_PATH</span></code> and
<span class="target" id="index-126"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">ADA_PROJECT_PATH</span></code> environment variables;</p></li>
<li><p>then the directories from the <code class="docutils literal notranslate"><span class="pre">Project_Path</span></code> attribute;</p></li>
<li><p>and finally the predefined directories.</p></li>
</ul>
<p>In the example above, the project path for <code class="file docutils literal notranslate"><span class="pre">agg2.gpr</span></code> is not influenced by
the attribute <cite>agg1’Project_Path</cite>, nor is <cite>agg1</cite> influenced by
<cite>agg2’Project_Path</cite>.</p>
<p>This can potentially lead to errors. Consider the example in
<code class="xref std std-numref docutils literal notranslate"><span class="pre">figure</span> <span class="pre">#</span></code>.</p>
<div class="figure align-center" id="id70">
<span id="fig-aggproject-error"></span><img alt="../_images/project-manager-figure.png" src="../_images/project-manager-figure.png" />
<p class="caption"><span class="caption-number">Fig. 2.5 </span><span class="caption-text">Example of <code class="docutils literal notranslate"><span class="pre">Project_Path</span></code> Error</span><a class="headerlink" href="#id70" title="Permalink to this image">¶</a></p>
</div>
<p>When looking for <code class="file docutils literal notranslate"><span class="pre">p.gpr</span></code>, both aggregates find the same physical
file on the disk. However, it might happen that with their different
project paths, both aggregate projects would in fact find a different
<code class="file docutils literal notranslate"><span class="pre">r.gpr</span></code>.
Since we have a common project <code class="file docutils literal notranslate"><span class="pre">p.gpr</span></code> <code class="samp docutils literal notranslate"><span class="pre">with</span></code>ing two different
<code class="file docutils literal notranslate"><span class="pre">r.gpr</span></code>, this will be reported as an error by the builder.</p>
<p>Directories are relative to the location of the aggregate project file.</p>
<p>Example:</p>
<blockquote>
<div><div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="kr">for</span><span class="p"> </span><span class="n">Project_Path</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;/usr/local/gpr&quot;</span><span class="p">,</span> <span class="s">&quot;gpr/&quot;</span><span class="o">)</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
<p id="index-127"><strong>External</strong>:</p>
<blockquote>
<div><p>This attribute can be used to set the value of environment
variables as retrieved through the <code class="docutils literal notranslate"><span class="pre">external</span></code> function
in projects. It does not affect the environment variables
themselves (so for instance you cannot use it to change the value
of your <span class="target" id="index-128"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code> as seen from the spawned compiler).</p>
<p>This attribute affects the external values as seen in the rest of
the aggregate project, and in the aggregated projects.</p>
<p>The exact value of an external variable comes from one of three
sources (each level overrides the previous levels):</p>
<ul class="simple">
<li><p>An External attribute in aggregate project, for instance
<cite>for External (“BUILD_MODE”) use “DEBUG”</cite>;</p></li>
<li><p>Environment variables.
These override the value given by the attribute, so that
users can override the value set in the (presumably shared
with others team members) aggregate project.</p></li>
<li><p>The <code class="xref std std-option docutils literal notranslate"><span class="pre">-X</span></code> command line switch to <em>gprbuild</em>.
This always takes precedence.</p></li>
</ul>
<p>This attribute is only taken into account in the main aggregate
project (i.e. the one specified on the command line to <em>GPRbuild</em>),
and ignored in other aggregate projects. It is invalid
in standard projects.
The goal is to have a consistent value in all
projects that are built through the aggregate, which would not
be the case in a “diamond” situation: <code class="docutils literal notranslate"><span class="pre">A</span></code> groups the aggregate
projects <code class="docutils literal notranslate"><span class="pre">B</span></code> and <code class="docutils literal notranslate"><span class="pre">C</span></code>, which both (either directly or indirectly)
build the project <code class="docutils literal notranslate"><span class="pre">P</span></code>. If <code class="docutils literal notranslate"><span class="pre">B</span></code> and <code class="docutils literal notranslate"><span class="pre">C</span></code> could set different values for
the environment variables, we would have two different views of
<code class="docutils literal notranslate"><span class="pre">P</span></code>, which in particular might impact the list of source files in <code class="docutils literal notranslate"><span class="pre">P</span></code>.</p>
</div></blockquote>
</div>
<div class="section" id="package-builder-in-aggregate-projects">
<span id="index-129"></span><span id="id32"></span><h3><span class="section-number">2.8.6. </span>package Builder in aggregate projects<a class="headerlink" href="#package-builder-in-aggregate-projects" title="Permalink to this headline">¶</a></h3>
<p>As mentioned above, only the package <code class="docutils literal notranslate"><span class="pre">Builder</span></code> can be specified in
an aggregate project. In this package, only the following attributes
are valid:</p>
<p id="index-130"><strong>Switches</strong>:</p>
<blockquote>
<div><p>This attribute gives the list of switches to use for <em>GPRbuild</em>.
Because no mains can be specified for aggregate projects, the only possible
index for attribute <code class="docutils literal notranslate"><span class="pre">Switches</span></code> is <code class="docutils literal notranslate"><span class="pre">others</span></code>. All other indexes will
be ignored.</p>
<p>Example:</p>
<div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="kr">for</span><span class="p"> </span><span class="n">Switches</span> <span class="o">(</span><span class="n">others</span><span class="o">)</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;-v&quot;</span><span class="p">,</span> <span class="s">&quot;-k&quot;</span><span class="p">,</span> <span class="s">&quot;-j8&quot;</span><span class="o">)</span><span class="p">;</span>
</pre></div>
</div>
<p>These switches are only read from the main aggregate project (the
one passed on the command line), and ignored in all other aggregate
projects or projects.</p>
<p>It can only contain builder switches, not compiler switches.</p>
</div></blockquote>
<p id="index-131"><strong>Global_Compilation_Switches</strong></p>
<blockquote>
<div><p>This attribute gives the list of compiler switches for the various
languages. For instance,</p>
<div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="kr">for</span><span class="p"> </span><span class="n">Global_Compilation_Switches</span> <span class="o">(</span><span class="s">&quot;Ada&quot;</span><span class="o">)</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;O1&quot;</span><span class="p">,</span> <span class="s">&quot;-g&quot;</span><span class="o">)</span><span class="p">;</span>
<span class="kr">for</span><span class="p"> </span><span class="n">Global_Compilation_Switches</span> <span class="o">(</span><span class="s">&quot;C&quot;</span><span class="o">)</span>   <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;-O2&quot;</span><span class="o">)</span><span class="p">;</span>
</pre></div>
</div>
<p>This attribute is only taken into account in the aggregate project
specified on the command line, not in other aggregate projects.</p>
<p>In the projects grouped by that aggregate, the attribute
<code class="docutils literal notranslate"><span class="pre">Builder'Global_Compilation_Switches</span></code> is also ignored. However, the
attribute <code class="docutils literal notranslate"><span class="pre">Compiler'Default_Switches</span></code> will be taken into account (but
that of the aggregate has higher priority). The attribute
<code class="docutils literal notranslate"><span class="pre">Compiler'Switches</span></code> is also taken into account and can be used to
override the switches for a specific file. As a result, it always
has priority.</p>
<p>The rules are meant to avoid ambiguities when compiling. For
instance, aggregate project <code class="docutils literal notranslate"><span class="pre">Agg</span></code> groups the projects <code class="docutils literal notranslate"><span class="pre">A</span></code> and <code class="docutils literal notranslate"><span class="pre">B</span></code>, which
both depend on <code class="docutils literal notranslate"><span class="pre">C</span></code>. Here is an example for all of these projects:</p>
<div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="kr">aggregate</span><span class="p"> </span><span class="k">project </span><span class="nf">Agg</span> <span class="kr">is</span><span class="p"></span>
    <span class="kr">for</span><span class="p"> </span><span class="n">Project_Files</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;a.gpr&quot;</span><span class="p">,</span> <span class="s">&quot;b.gpr&quot;</span><span class="o">)</span><span class="p">;</span>
    <span class="k">package </span><span class="nf">Builder</span> <span class="kr">is</span><span class="p"></span>
       <span class="kr">for</span><span class="p"> </span><span class="n">Global_Compilation_Switches</span> <span class="o">(</span><span class="s">&quot;Ada&quot;</span><span class="o">)</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;-O2&quot;</span><span class="o">)</span><span class="p">;</span>
    <span class="k">end </span><span class="nf">Builder</span><span class="p">;</span>
<span class="k">end </span><span class="nf">Agg</span><span class="p">;</span>
</pre></div>
</div>
<div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="kr">with</span><span class="p"> </span><span class="s">&quot;c.gpr&quot;</span><span class="p">;</span>
<span class="k">project </span><span class="nf">A</span> <span class="kr">is</span><span class="p"></span>
    <span class="k">package </span><span class="nf">Builder</span> <span class="kr">is</span><span class="p"></span>
       <span class="kr">for</span><span class="p"> </span><span class="n">Global_Compilation_Switches</span> <span class="o">(</span><span class="s">&quot;Ada&quot;</span><span class="o">)</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;-O1&quot;</span><span class="o">)</span><span class="p">;</span>
       <span class="c">--  ignored</span>
    <span class="k">end </span><span class="nf">Builder</span><span class="p">;</span>

    <span class="k">package </span><span class="nf">Compiler</span> <span class="kr">is</span><span class="p"></span>
       <span class="kr">for</span><span class="p"> </span><span class="n">Default_Switches</span> <span class="o">(</span><span class="s">&quot;Ada&quot;</span><span class="o">)</span>
           <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;-O1&quot;</span><span class="p">,</span> <span class="s">&quot;-g&quot;</span><span class="o">)</span><span class="p">;</span>
       <span class="kr">for</span><span class="p"> </span><span class="n">Switches</span> <span class="o">(</span><span class="s">&quot;a_file1.adb&quot;</span><span class="o">)</span>
           <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;-O0&quot;</span><span class="o">)</span><span class="p">;</span>
    <span class="k">end </span><span class="nf">Compiler</span><span class="p">;</span>
<span class="k">end </span><span class="nf">A</span><span class="p">;</span>
</pre></div>
</div>
<div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="kr">with</span><span class="p"> </span><span class="s">&quot;c.gpr&quot;</span><span class="p">;</span>
<span class="k">project </span><span class="nf">B</span> <span class="kr">is</span><span class="p"></span>
    <span class="k">package </span><span class="nf">Compiler</span> <span class="kr">is</span><span class="p"></span>
       <span class="kr">for</span><span class="p"> </span><span class="n">Default_Switches</span> <span class="o">(</span><span class="s">&quot;Ada&quot;</span><span class="o">)</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;-O0&quot;</span><span class="o">)</span><span class="p">;</span>
    <span class="k">end </span><span class="nf">Compiler</span><span class="p">;</span>
<span class="k">end </span><span class="nf">B</span><span class="p">;</span>
</pre></div>
</div>
<div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="k">project </span><span class="nf">C</span> <span class="kr">is</span><span class="p"></span>
    <span class="k">package </span><span class="nf">Compiler</span> <span class="kr">is</span><span class="p"></span>
       <span class="kr">for</span><span class="p"> </span><span class="n">Default_Switches</span> <span class="o">(</span><span class="s">&quot;Ada&quot;</span><span class="o">)</span>
           <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;-O3&quot;</span><span class="p">,</span>
                <span class="s">&quot;-gnatn&quot;</span><span class="o">)</span><span class="p">;</span>
       <span class="kr">for</span><span class="p"> </span><span class="n">Switches</span> <span class="o">(</span><span class="s">&quot;c_file1.adb&quot;</span><span class="o">)</span>
           <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;-O0&quot;</span><span class="p">,</span> <span class="s">&quot;-g&quot;</span><span class="o">)</span><span class="p">;</span>
    <span class="k">end </span><span class="nf">Compiler</span><span class="p">;</span>
<span class="k">end </span><span class="nf">C</span><span class="p">;</span>
</pre></div>
</div>
<p>The following switches are used:</p>
<ul class="simple">
<li><p>all files from project <code class="docutils literal notranslate"><span class="pre">A</span></code> except <code class="file docutils literal notranslate"><span class="pre">a_file1.adb</span></code> are compiled
with <code class="xref std std-option docutils literal notranslate"><span class="pre">-O2</span> <span class="pre">-g</span></code>, since the aggregate project has priority.</p></li>
<li><p>the file <code class="file docutils literal notranslate"><span class="pre">a_file1.adb</span></code> is compiled with
:option”<cite>-O0</cite>, since <code class="docutils literal notranslate"><span class="pre">Compiler'Switches</span></code> has priority</p></li>
<li><p>all files from project <code class="docutils literal notranslate"><span class="pre">B</span></code> are compiled with
<code class="xref std std-option docutils literal notranslate"><span class="pre">-O2</span></code>, since the aggregate project has priority</p></li>
<li><p>all files from <code class="docutils literal notranslate"><span class="pre">C</span></code> are compiled with <code class="xref std std-option docutils literal notranslate"><span class="pre">-O2</span> <span class="pre">-gnatn</span></code>, except for
<code class="file docutils literal notranslate"><span class="pre">c_file1.adb</span></code> which is compiled with <code class="xref std std-option docutils literal notranslate"><span class="pre">-O0</span> <span class="pre">-g</span></code></p></li>
</ul>
<p>Even though <code class="docutils literal notranslate"><span class="pre">C</span></code> is seen through two paths (through <code class="docutils literal notranslate"><span class="pre">A</span></code> and through
<code class="docutils literal notranslate"><span class="pre">B</span></code>), the switches used by the compiler are unambiguous.</p>
</div></blockquote>
<p id="index-132"><strong>Global_Configuration_Pragmas</strong></p>
<blockquote>
<div><p>This attribute can be used to specify a file containing
configuration pragmas, to be passed to the Ada compiler.  Since we
ignore the package <code class="docutils literal notranslate"><span class="pre">Builder</span></code> in other aggregate projects and projects,
only those pragmas defined in the main aggregate project will be
taken into account.</p>
<p>Projects can locally add to those by using the
<code class="docutils literal notranslate"><span class="pre">Compiler'Local_Configuration_Pragmas</span></code> attribute if they need.</p>
</div></blockquote>
<p id="index-133"><strong>Global_Config_File</strong></p>
<blockquote>
<div><p>This attribute, indexed with a language name, can be used to specify a config
when compiling sources of the language. For Ada, these files are configuration
pragmas files.</p>
</div></blockquote>
<p>For projects that are built through the aggregate mechanism, the package <code class="docutils literal notranslate"><span class="pre">Builder</span></code>
is ignored, except for the <code class="docutils literal notranslate"><span class="pre">Executable</span></code> attribute which specifies the
name of the executables resulting from the link of the main programs, and
for the <code class="docutils literal notranslate"><span class="pre">Executable_Suffix</span></code>.</p>
</div>
</div>
<div class="section" id="aggregate-library-projects">
<span id="index-134"></span><span id="id33"></span><h2><span class="section-number">2.9. </span>Aggregate Library Projects<a class="headerlink" href="#aggregate-library-projects" title="Permalink to this headline">¶</a></h2>
<p>Aggregate library projects make it possible to build a single library
using object files built using other standard or library
projects. This gives the flexibility to describe an application as
having multiple modules (for example a GUI, database access, and other)
using different project files (so possibly built with different compiler
options) and yet create a single library (static or relocatable) out of the
corresponding object files.</p>
<div class="section" id="building-aggregate-library-projects">
<span id="id34"></span><h3><span class="section-number">2.9.1. </span>Building aggregate library projects<a class="headerlink" href="#building-aggregate-library-projects" title="Permalink to this headline">¶</a></h3>
<p>For example, we can define an aggregate project <code class="docutils literal notranslate"><span class="pre">Agg</span></code> that groups <code class="docutils literal notranslate"><span class="pre">A</span></code>, <code class="docutils literal notranslate"><span class="pre">B</span></code>
and <code class="docutils literal notranslate"><span class="pre">C</span></code>:</p>
<blockquote>
<div><div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="kr">aggregate</span><span class="p"> </span><span class="kr">library</span><span class="p"> </span><span class="k">project </span><span class="nf">Agg</span> <span class="kr">is</span><span class="p"></span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Project_Files</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;a.gpr&quot;</span><span class="p">,</span> <span class="s">&quot;b.gpr&quot;</span><span class="p">,</span> <span class="s">&quot;c.gpr&quot;</span><span class="o">)</span><span class="p">;</span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Library_Name</span>  <span class="kr">use</span><span class="p"> </span><span class="s">&quot;agg&quot;</span><span class="p">;</span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Library_Dir</span>   <span class="kr">use</span><span class="p"> </span><span class="s">&quot;lagg&quot;</span><span class="p">;</span>
<span class="k">end </span><span class="nf">Agg</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>Then, when you build with:</p>
<blockquote>
<div><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>gprbuild agg.gpr
</pre></div>
</div>
</div></blockquote>
<p>this will build all units from projects <code class="docutils literal notranslate"><span class="pre">A</span></code>, <code class="docutils literal notranslate"><span class="pre">B</span></code> and <code class="docutils literal notranslate"><span class="pre">C</span></code> and will create a
static library named <code class="file docutils literal notranslate"><span class="pre">libagg.a</span></code> in the <code class="file docutils literal notranslate"><span class="pre">lagg</span></code>
directory. An aggregate library project has the same set of
restrictions as a standard library project.</p>
<p>Note that a shared aggregate library project cannot aggregate a
static library project. In platforms where a compiler option is
required to create relocatable object files, a <code class="docutils literal notranslate"><span class="pre">Builder</span> <span class="pre">package</span></code> in the
aggregate library project may be used:</p>
<blockquote>
<div><div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="kr">aggregate</span><span class="p"> </span><span class="kr">library</span><span class="p"> </span><span class="k">project </span><span class="nf">Agg</span> <span class="kr">is</span><span class="p"></span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Project_Files</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;a.gpr&quot;</span><span class="p">,</span> <span class="s">&quot;b.gpr&quot;</span><span class="p">,</span> <span class="s">&quot;c.gpr&quot;</span><span class="o">)</span><span class="p">;</span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Library_Name</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;agg&quot;</span><span class="o">)</span><span class="p">;</span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Library_Dir</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;lagg&quot;</span><span class="o">)</span><span class="p">;</span>
   <span class="kr">for</span><span class="p"> </span><span class="n">Library_Kind</span> <span class="kr">use</span><span class="p"> </span><span class="s">&quot;relocatable&quot;</span><span class="p">;</span>

   <span class="k">package </span><span class="nf">Builder</span> <span class="kr">is</span><span class="p"></span>
      <span class="kr">for</span><span class="p"> </span><span class="n">Global_Compilation_Switches</span> <span class="o">(</span><span class="s">&quot;Ada&quot;</span><span class="o">)</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;-fPIC&quot;</span><span class="o">)</span><span class="p">;</span>
   <span class="k">end </span><span class="nf">Builder</span><span class="p">;</span>
<span class="k">end </span><span class="nf">Agg</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>With the above aggregate library Builder package, the <code class="xref std std-option docutils literal notranslate"><span class="pre">-fPIC</span></code>
option will be passed to the compiler when building any source code
from projects <code class="file docutils literal notranslate"><span class="pre">a.gpr</span></code>, <code class="file docutils literal notranslate"><span class="pre">b.gpr</span></code> and <code class="file docutils literal notranslate"><span class="pre">c.gpr</span></code>.</p>
</div>
<div class="section" id="syntax-of-aggregate-library-projects">
<span id="id35"></span><h3><span class="section-number">2.9.2. </span>Syntax of aggregate library projects<a class="headerlink" href="#syntax-of-aggregate-library-projects" title="Permalink to this headline">¶</a></h3>
<p>An aggregate library project follows the general syntax of project
files. The recommended extension is still <code class="file docutils literal notranslate"><span class="pre">.gpr</span></code>. However, a special
<code class="docutils literal notranslate"><span class="pre">aggregate</span> <span class="pre">library</span></code> qualifier must appear before the keyword
<code class="docutils literal notranslate"><span class="pre">project</span></code>.</p>
<p>An aggregate library project cannot <code class="samp docutils literal notranslate"><span class="pre">with</span></code> any other project
(standard or aggregate), except an abstract project which can be used
to share attribute values.</p>
<p>An aggregate library project does not have any source files directly (only
through other standard projects). Therefore a number of the standard
attributes and packages are forbidden in an aggregate library
project. Here is a (non-exhaustive) list:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Languages</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Source_Files</span></code>, <code class="docutils literal notranslate"><span class="pre">Source_List_File</span></code> and other attributes dealing with
a list of sources.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Source_Dirs</span></code> and <code class="docutils literal notranslate"><span class="pre">Exec_Dir</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Main</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Roots</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Externally_Built</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Inherit_Source_Path</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Excluded_Source_Dirs</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Locally_Removed_Files</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Excluded_Source_Files</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Excluded_Source_List_File</span></code></p></li>
</ul>
<p>The only package that is allowed (and optional) is <code class="docutils literal notranslate"><span class="pre">Builder</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Project_Files</span></code> attribute is used to
describe the aggregated projects whose object files have to be
included into the aggregate library. The environment variables
<span class="target" id="index-135"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">ADA_PROJECT_PATH</span></code>, <span class="target" id="index-136"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">GPR_PROJECT_PATH</span></code> and
<span class="target" id="index-137"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">GPR_PROJECT_PATH_FILE</span></code> are not used to find the project files.</p>
<p>As for regular (not library) aggregate projects, the <code class="docutils literal notranslate"><span class="pre">Object_Dir</span></code> attribute
is allowed and used by some analysis tools in the same fashion.</p>
</div>
</div>
<div class="section" id="project-file-reference">
<span id="id36"></span><h2><span class="section-number">2.10. </span>Project File Reference<a class="headerlink" href="#project-file-reference" title="Permalink to this headline">¶</a></h2>
<p>This section describes the syntactic structure of project files, explains
the various constructs that can be used, and summarizes the available
attributes.</p>
<p>The syntax is presented in a notation similar to what is used in the Ada
Language Reference Manual. Curly braces ‘{‘ and ‘}’ indicate 0 or more
occurrences of the enclosed construct, and square brackets ‘[‘ and ‘]’ indicate
0 or 1 occurrence of the enclosed construct. Reserved words are enclosed
between apostrophes.</p>
<div class="section" id="project-declaration">
<span id="id37"></span><h3><span class="section-number">2.10.1. </span>Project Declaration<a class="headerlink" href="#project-declaration" title="Permalink to this headline">¶</a></h3>
<p>Project files have an Ada-like syntax. The minimal project file is:</p>
<blockquote>
<div><div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="k">project </span><span class="nf">Empty</span> <span class="kr">is</span><span class="p"></span>
<span class="k">end </span><span class="nf">Empty</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>The identifier <code class="docutils literal notranslate"><span class="pre">Empty</span></code> is the name of the project.
This project name must be present after the reserved
word <code class="docutils literal notranslate"><span class="pre">end</span></code> at the end of the project file, followed by a semicolon.</p>
<p><strong>Identifiers</strong> (i.e., the user-defined names such as project or variable names)
have the same syntax as Ada identifiers: they must start with a letter,
and be followed by zero or more letters, digits or underscore characters;
it is also illegal to have two underscores next to each other. Identifiers
are always case-insensitive (<code class="docutils literal notranslate"><span class="pre">&quot;Name&quot;</span></code> is the same as <code class="docutils literal notranslate"><span class="pre">&quot;name&quot;</span></code>).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">simple_name</span> <span class="p">:</span><span class="o">:=</span> <span class="n">identifier</span>
<span class="n">name</span>        <span class="p">:</span><span class="o">:=</span> <span class="n">simple_name</span> <span class="p">{</span> <span class="o">.</span> <span class="n">simple_name</span> <span class="p">}</span>
</pre></div>
</div>
<p><strong>Strings</strong> are used for values of attributes or as indexes for these
attributes. They are in general case sensitive, except when noted
otherwise (in particular, strings representing file names will be case
insensitive on some systems, so that <code class="docutils literal notranslate"><span class="pre">&quot;file.adb&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;File.adb&quot;</span></code> both
represent the same file).</p>
<p id="index-138"><strong>Reserved words</strong> are the standard Ada 95 reserved words, plus several
others listed below, and cannot be used for identifiers.
In particular, the following Ada 95 reserved words are currently
used in project files:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">abstract</span>  <span class="nb">all</span>     <span class="n">at</span>       <span class="n">case</span>
<span class="n">end</span>       <span class="k">for</span>     <span class="ow">is</span>       <span class="n">limited</span>
<span class="n">null</span>      <span class="n">others</span>  <span class="n">package</span>  <span class="n">renames</span>
<span class="nb">type</span>      <span class="n">use</span>     <span class="n">when</span>     <span class="k">with</span>
</pre></div>
</div>
</div></blockquote>
<p>The additional project file reserved words are:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">extends</span> <span class="n">external</span> <span class="n">external_as_list</span> <span class="n">project</span>
</pre></div>
</div>
</div></blockquote>
<p>Note that <code class="docutils literal notranslate"><span class="pre">aggregate</span></code> and <code class="docutils literal notranslate"><span class="pre">library</span></code> are qualifiers that may appear before
the keyword <code class="docutils literal notranslate"><span class="pre">project</span></code>, but they are not themselves keywords.</p>
<p>To avoid possible compatibility issues in the future, we recommend that
the reserved words introduced by Ada 2005 and Ada 2012 not be used as
identifiers in project files. Note also that new reserved words
may be added to the project file syntax in a later release.</p>
<p><strong>Comments</strong> in project files have the same syntax as in Ada, two consecutive
hyphens through the end of the line.</p>
<p id="independent-project"><span id="index-139"></span>A project may be an <strong>independent project</strong>, entirely defined by a single
project file. Any source file in an independent project depends only
on the predefined library and other source files in the same project.
Alternatively, a project may depend on other projects in various ways:</p>
<ul class="simple">
<li><p>by <strong>importing</strong> them through context clauses (<code class="samp docutils literal notranslate"><span class="pre">with</span></code> clauses), or</p></li>
<li><p>by <strong>extending</strong> at most one other project (its base project).</p></li>
</ul>
<p>A given project may exhibit either or both of these dependencies; for example:</p>
<blockquote>
<div><div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="kr">with</span><span class="p"> </span><span class="s">&quot;imported_proj.gpr&quot;</span><span class="p">;</span>
<span class="k">project </span><span class="nf">My_Project</span> <span class="kr">extends</span><span class="p"> </span><span class="s">&quot;base_proj.gpr&quot;</span> <span class="kr">is</span><span class="p"></span>
<span class="k">end </span><span class="nf">My_Project</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>The import dependencies form a <strong>directed graph</strong>, potentially cyclic when using
<strong>limited with</strong>. The subgraph reflecting the <strong>extends</strong> relationship is a tree
(hierarchy).</p>
<p>A path name denotes a project file. It can be absolute or relative.
An absolute path name includes a sequence of directories, in the syntax of
the host operating system, that uniquely identifies the project file in the
file system. A relative path name identifies the project file, relative
to the directory that contains the current project, or relative to a
directory listed in the environment variables <span class="target" id="index-140"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">ADA_PROJECT_PATH</span></code> and
<span class="target" id="index-141"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">GPR_PROJECT_PATH</span></code>. Path names are case sensitive if file names in the host
operating system are case sensitive. As a special case, the directory
separator can always be <code class="docutils literal notranslate"><span class="pre">'/'</span></code> even on Windows systems, so that project files
can be made portable across architectures.
The syntax of the environment variables <span class="target" id="index-142"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">ADA_PROJECT_PATH</span></code> and
<span class="target" id="index-143"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">GPR_PROJECT_PATH</span></code> is a list of directory names separated by colons on Unix and
semicolons on Windows.</p>
<p>A given project name can appear only once in a context clause, and may not
appear in different context clauses for the same project.</p>
<p>It is illegal for a project imported by a context clause to refer, directly
or indirectly, to the project in which this context clause appears (the
dependency graph cannot contain cycles), except when one of the <code class="samp docutils literal notranslate"><span class="pre">with</span></code> clauses
in the cycle is a <code class="samp docutils literal notranslate"><span class="pre">limited</span> <span class="pre">with</span></code>.</p>
<span class="target" id="index-144"></span><p id="index-145">A project’s <strong>immediate sources</strong> are the source files directly defined by
that project, either implicitly by residing in the project source directories,
or explicitly through any of the source-related attributes.
More generally, a project’s <strong>sources</strong> are the immediate sources of the
project together with the immediate sources (unless overridden) of any project
on which it depends directly or indirectly.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">project</span>        <span class="p">:</span><span class="o">:=</span> <span class="n">context_clause</span> <span class="n">project_declaration</span>

 <span class="n">context_clause</span> <span class="p">:</span><span class="o">:=</span> <span class="p">{</span><span class="n">with_clause</span><span class="p">}</span>
 <span class="n">with_clause</span>    <span class="p">:</span><span class="o">:=</span> <span class="p">[</span> <span class="s1">&#39;limited&#39;</span> <span class="p">]</span> <span class="s1">&#39;with&#39;</span> <span class="n">path_name</span> <span class="p">{</span> <span class="p">,</span> <span class="n">path_name</span> <span class="p">}</span> <span class="p">;</span>
 <span class="n">path_name</span>      <span class="p">:</span><span class="o">:=</span> <span class="n">string_literal</span>

 <span class="n">project_declaration</span> <span class="p">:</span><span class="o">:=</span> <span class="n">simple_project_declaration</span> <span class="o">|</span> <span class="n">project_extension</span>

 <span class="n">simple_project_declaration</span> <span class="p">:</span><span class="o">:=</span>
   <span class="p">[</span> <span class="n">qualifier</span> <span class="p">]</span> <span class="s1">&#39;project&#39;</span> <span class="o">&lt;</span><span class="n">project_</span><span class="o">&gt;</span><span class="n">name</span> <span class="s1">&#39;is&#39;</span>
     <span class="p">{</span><span class="n">declarative_item</span><span class="p">}</span>
   <span class="s1">&#39;end&#39;</span> <span class="o">&lt;</span><span class="n">project_</span><span class="o">&gt;</span><span class="n">name</span> <span class="p">;</span>

 <span class="n">project_extension</span> <span class="p">:</span><span class="o">:=</span>
  <span class="p">[</span> <span class="n">qualifier</span> <span class="p">]</span> <span class="s1">&#39;project&#39;</span> <span class="o">&lt;</span><span class="n">project_</span><span class="o">&gt;</span><span class="n">name</span> <span class="s1">&#39;extends&#39;</span> <span class="p">[</span> <span class="s1">&#39;all&#39;</span> <span class="p">]</span> <span class="o">&lt;</span><span class="n">base_project_</span><span class="o">&gt;</span><span class="n">name</span> <span class="s1">&#39;is&#39;</span>
    <span class="p">{</span><span class="n">declarative_item</span><span class="p">}</span>
  <span class="s1">&#39;end&#39;</span> <span class="o">&lt;</span><span class="n">project_</span><span class="o">&gt;</span><span class="n">name</span> <span class="p">;</span>

<span class="n">qualifier</span> <span class="p">:</span><span class="o">:=</span>
  <span class="s1">&#39;abstract&#39;</span> <span class="o">|</span> <span class="n">identifier</span> <span class="p">[</span> <span class="n">identifier</span> <span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="qualified-projects">
<span id="id38"></span><h3><span class="section-number">2.10.2. </span>Qualified Projects<a class="headerlink" href="#qualified-projects" title="Permalink to this headline">¶</a></h3>
<p>Immediately preceding the reserved  <code class="docutils literal notranslate"><span class="pre">project</span></code>, a <strong>qualifier</strong> may be
specified which identifies the nature of the project. The following
qualifiers are allowed:</p>
<span id="index-146"></span><dl class="simple" id="standard-project">
<dt><strong>standard</strong>:</dt><dd><p>A standard project is a non-library project with source files.
This is the default (implicit) qualifier.</p>
</dd>
</dl>
<dl class="simple" id="index-147">
<dt><strong>abstract</strong>:</dt><dd><p>A project with no source files.
Such a project must either have no declaration for attributes <code class="docutils literal notranslate"><span class="pre">Source_Dirs</span></code>,
<code class="docutils literal notranslate"><span class="pre">Source_Files</span></code>, <code class="docutils literal notranslate"><span class="pre">Languages</span></code> or <code class="docutils literal notranslate"><span class="pre">Source_List_File</span></code>, or one of
<code class="docutils literal notranslate"><span class="pre">Source_Dirs</span></code>, <code class="docutils literal notranslate"><span class="pre">Source_Files</span></code>, or <code class="docutils literal notranslate"><span class="pre">Languages</span></code> must be declared
as empty. If it extends another project, the base project must also be
an abstract project.</p>
</dd>
</dl>
<dl class="simple" id="index-148">
<dt><strong>aggregate</strong>:</dt><dd><p>A project whose sources are aggregated from other project files.</p>
</dd>
<dt><strong>aggregate library</strong>:</dt><dd><p>A library whose sources are aggregated from other project
or library project files.</p>
</dd>
</dl>
<dl class="simple" id="index-149">
<dt><strong>library</strong>:</dt><dd><p>A library project must define both of the attributes
<cite>Library_Name</cite> and <cite>Library_Dir</cite>.</p>
</dd>
</dl>
<span id="index-150"></span><dl class="simple" id="configuration-project">
<dt><strong>configuration</strong>:</dt><dd><p>A configuration project cannot be in a project tree.
It describes compilers and other tools to <em>gprbuild</em>.</p>
</dd>
</dl>
</div>
<div class="section" id="declarations">
<span id="index-151"></span><span id="id39"></span><h3><span class="section-number">2.10.3. </span>Declarations<a class="headerlink" href="#declarations" title="Permalink to this headline">¶</a></h3>
<p>Declarations introduce new entities that denote types, variables, attributes,
and packages. Some declarations can only appear immediately within a project
declaration. Others can appear within a project or within a package.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">declarative_item</span> <span class="p">:</span><span class="o">:=</span> <span class="n">simple_declarative_item</span>
  <span class="o">|</span> <span class="n">typed_string_declaration</span>
  <span class="o">|</span> <span class="n">package_declaration</span>

<span class="n">simple_declarative_item</span> <span class="p">:</span><span class="o">:=</span> <span class="n">variable_declaration</span>
  <span class="o">|</span> <span class="n">typed_variable_declaration</span>
  <span class="o">|</span> <span class="n">attribute_declaration</span>
  <span class="o">|</span> <span class="n">case_construction</span>
  <span class="o">|</span> <span class="n">empty_declaration</span>

<span class="n">empty_declaration</span> <span class="p">:</span><span class="o">:=</span> <span class="s1">&#39;null&#39;</span> <span class="p">;</span>
</pre></div>
</div>
<p>An empty declaration is allowed anywhere a declaration is allowed. It has
no effect.</p>
</div>
<div class="section" id="packages">
<span id="index-152"></span><span id="id40"></span><h3><span class="section-number">2.10.4. </span>Packages<a class="headerlink" href="#packages" title="Permalink to this headline">¶</a></h3>
<p>A project file may contain <strong>packages</strong>, which group attributes (typically
all the attributes that are used by one of the GNAT tools).</p>
<p>A package with a given name may only appear once in a project file.
The following packages are currently supported in project files
(See <a class="reference internal" href="#attributes"><span class="std std-ref">Attributes</span></a> for the list of attributes that each can contain).</p>
<dl class="simple" id="index-153">
<dt><em>Binder</em></dt><dd><p>This package specifies characteristics useful when invoking the binder either
directly via the <em>gnat</em> driver or when using <em>GPRbuild</em>.
See <a class="reference internal" href="#main-subprograms"><span class="std std-ref">Main Subprograms</span></a>.</p>
</dd>
</dl>
<dl class="simple" id="index-154">
<dt><em>Builder</em></dt><dd><p>This package specifies the compilation options used when building an
executable or a library for a project. Most of the options should be
set in one of <code class="docutils literal notranslate"><span class="pre">Compiler</span></code>, <code class="docutils literal notranslate"><span class="pre">Binder</span></code> or <code class="docutils literal notranslate"><span class="pre">Linker</span></code> packages,
but there are some general options that should be defined in this
package. See <a class="reference internal" href="#main-subprograms"><span class="std std-ref">Main Subprograms</span></a>, and <a class="reference internal" href="#executable-file-names"><span class="std std-ref">Executable File Names</span></a> in
particular.</p>
</dd>
</dl>
<span class="target" id="index-155"></span><dl class="simple" id="index-156">
<dt><em>Check</em></dt><dd><p>This package specifies the options used when calling the coding standard
verification tool <em>gnatcheck</em>. Its attributes
<code class="docutils literal notranslate"><span class="pre">Default_Switches</span></code> and <code class="docutils literal notranslate"><span class="pre">Switches</span></code> have the same semantics as for the package
<code class="docutils literal notranslate"><span class="pre">Builder</span></code>. The first string should always be <code class="xref std std-option docutils literal notranslate"><span class="pre">-rules</span></code> to specify
that all the other options belong to the <code class="docutils literal notranslate"><span class="pre">-rules</span></code> section of the
parameters to <em>gnatcheck</em>.</p>
</dd>
</dl>
<span class="target" id="index-157"></span><dl class="simple" id="index-158">
<dt><em>Clean</em></dt><dd><p>This package specifies the options used when cleaning a project or a project
tree using the tools <em>gnatclean</em> or <em>gprclean</em>.</p>
</dd>
</dl>
<dl class="simple" id="index-159">
<dt><em>Compiler</em></dt><dd><p>This package specifies the compilation options used by the compiler for
each language. See <a class="reference internal" href="#tools-options-in-project-files"><span class="std std-ref">Tools Options in Project Files</span></a>.</p>
</dd>
</dl>
<span class="target" id="index-160"></span><dl class="simple" id="index-161">
<dt><em>Cross_Reference</em></dt><dd><p>This package specifies the options used when calling the library tool
<em>gnatxref</em> via the <em>gnat</em> driver. Its attributes
<code class="docutils literal notranslate"><span class="pre">Default_Switches</span></code> and <code class="docutils literal notranslate"><span class="pre">Switches</span></code> have the same semantics as for the
package <code class="docutils literal notranslate"><span class="pre">Builder</span></code>.</p>
</dd>
</dl>
<span class="target" id="index-162"></span><dl class="simple" id="index-163">
<dt><em>Documentation</em></dt><dd><p>This package specifies the options used when calling the tool
<em>gnatdoc</em>.</p>
</dd>
</dl>
<span class="target" id="index-164"></span><dl class="simple" id="index-165">
<dt><em>Eliminate</em></dt><dd><p>This package specifies the options used when calling the tool
<em>gnatelim</em>. Its attributes
<code class="docutils literal notranslate"><span class="pre">Default_Switches</span></code> and <code class="docutils literal notranslate"><span class="pre">Switches</span></code> have the same semantics as for the
package <code class="docutils literal notranslate"><span class="pre">Builder</span></code>.</p>
</dd>
</dl>
<span class="target" id="index-166"></span><dl class="simple" id="index-167">
<dt><em>Finder</em></dt><dd><p>This package specifies the options used when calling the search tool
<em>gnatfind</em> via the <em>gnat</em> driver. Its attributes
<code class="docutils literal notranslate"><span class="pre">Default_Switches</span></code> and <code class="docutils literal notranslate"><span class="pre">Switches</span></code> have the same semantics as for the
package <code class="docutils literal notranslate"><span class="pre">Builder</span></code>.</p>
</dd>
</dl>
<span class="target" id="index-168"></span><dl class="simple" id="index-169">
<dt><em>Gnatls</em></dt><dd><p>This package specifies the options to use when invoking <em>gnatls</em>
via the <em>gnat</em> driver.</p>
</dd>
</dl>
<span class="target" id="index-170"></span><dl class="simple" id="index-171">
<dt><em>Gnatstub</em></dt><dd><p>This package specifies the options used when calling the tool
<em>gnatstub</em>. Its attributes
<code class="docutils literal notranslate"><span class="pre">Default_Switches</span></code> and <code class="docutils literal notranslate"><span class="pre">Switches</span></code> have the same semantics as for the
package <code class="docutils literal notranslate"><span class="pre">Builder</span></code>.</p>
</dd>
</dl>
<dl class="simple" id="index-172">
<dt><em>IDE</em></dt><dd><p>This package specifies the options used when starting an integrated
development environment, for instance <em>GPS</em> or <em>GNATbench</em>.</p>
</dd>
</dl>
<span class="target" id="index-173"></span><dl class="simple" id="index-174">
<dt><em>Install</em></dt><dd><p>This package specifies the options used when installing a project
with <em>gprinstall</em>. See <a class="reference internal" href="#package-install-attributes"><span class="std std-ref">Package Install Attributes</span></a>.</p>
</dd>
</dl>
<dl class="simple" id="index-175">
<dt><em>Linker</em></dt><dd><p>This package specifies the options used by the linker.
See <a class="reference internal" href="#main-subprograms"><span class="std std-ref">Main Subprograms</span></a>.</p>
</dd>
</dl>
<span class="target" id="index-176"></span><dl class="simple" id="index-177">
<dt><em>Metrics</em></dt><dd><p>This package specifies the options used when calling the tool
<em>gnatmetric</em>. Its attributes
<code class="docutils literal notranslate"><span class="pre">Default_Switches</span></code> and <code class="docutils literal notranslate"><span class="pre">Switches</span></code> have the same semantics as for the
package <code class="docutils literal notranslate"><span class="pre">Builder</span></code>.</p>
</dd>
</dl>
<dl class="simple" id="index-178">
<dt><em>Naming</em></dt><dd><p>This package specifies the naming conventions that apply
to the source files in a project. In particular, these conventions are
used to automatically find all source files in the source directories,
or given a file name to find out its language for proper processing.
See <a class="reference internal" href="#naming-schemes"><span class="std std-ref">Naming Schemes</span></a>.</p>
</dd>
</dl>
<span class="target" id="index-179"></span><dl class="simple" id="index-180">
<dt><em>Pretty_Printer</em></dt><dd><p>This package specifies the options used when calling the formatting tool
<em>gnatpp</em>. Its attributes
<code class="docutils literal notranslate"><span class="pre">Default_Switches</span></code> and <code class="docutils literal notranslate"><span class="pre">Switches</span></code> have the same semantics as for the
package <code class="docutils literal notranslate"><span class="pre">Builder</span></code>.</p>
</dd>
</dl>
<span class="target" id="index-181"></span><dl class="simple" id="index-182">
<dt><em>Remote</em></dt><dd><p>This package is used by <em>GPRbuild</em> to describe how distributed
compilation should be done.</p>
</dd>
</dl>
<span class="target" id="index-183"></span><dl class="simple" id="index-184">
<dt><em>Stack</em></dt><dd><p>This package specifies the options used when calling the tool
<em>gnatstack</em>. Its attributes
<strong>Default_Switches</strong> and <strong>Switches</strong> have the same semantics as for the
package <cite>Builder</cite>.</p>
</dd>
</dl>
<span class="target" id="index-185"></span><dl class="simple" id="index-186">
<dt><em>Synchronize</em></dt><dd><p>This package specifies the options used when calling the tool
<em>gnatsync</em> via the <em>gnat</em> driver.</p>
</dd>
</dl>
<p>In its simplest form, a package may be empty:</p>
<blockquote>
<div><div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="k">project </span><span class="nf">Simple</span> <span class="kr">is</span><span class="p"></span>
  <span class="k">package </span><span class="nf">Builder</span> <span class="kr">is</span><span class="p"></span>
  <span class="k">end </span><span class="nf">Builder</span><span class="p">;</span>
<span class="k">end </span><span class="nf">Simple</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>A package may contain <strong>attribute declarations</strong>,
<strong>variable declarations</strong> and <strong>case constructions</strong>, as will be
described below.</p>
<p>When there is ambiguity between a project name and a package name,
the name always designates the project. To avoid possible confusion, it is
always a good idea to avoid naming a project with one of the
names allowed for packages or any name that starts with <cite>gnat</cite>.</p>
<span class="target" id="index-187"></span><p class="rubric" id="index-188">Package renaming</p>
<p>A package may be defined by a <strong>renaming declaration</strong>. The new package
renames a package declared in a different project file, and has the same
attributes as the package it renames. The name of the renamed package
must be the same as the name of the renaming package. The project must
contain a package declaration with this name, and the project
must appear in the context clause of the current project, or be its
base or
parent project. It is not possible to add or override attributes to the renaming
project. If you need to do so, you should use an <strong>extending declaration</strong>
(see below).</p>
<p>Packages that are renamed in other project files often come from project files
that have no sources: they are just used as templates. Any modification in the
template will be reflected automatically in all the project files that rename
a package from the template. This is a very common way to share settings
between projects.</p>
<span class="target" id="index-189"></span><p class="rubric" id="package-extension"><span id="index-190"></span>Package extension</p>
<p>A package can also be defined by an <strong>extending declaration</strong>. This is
similar to a <strong>renaming declaration</strong>, except that it is possible to add or
override attributes.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">package_declaration</span> <span class="p">:</span><span class="o">:=</span> <span class="n">package_spec</span> <span class="o">|</span> <span class="n">package_renaming</span> <span class="o">|</span> <span class="n">package_extension</span>

<span class="n">package_spec</span> <span class="p">:</span><span class="o">:=</span>
  <span class="s1">&#39;package&#39;</span> <span class="o">&lt;</span><span class="n">package_</span><span class="o">&gt;</span><span class="n">simple_name</span> <span class="s1">&#39;is&#39;</span>
     <span class="p">{</span> <span class="n">simple_declarative_item</span> <span class="p">}</span>
  <span class="s1">&#39;end&#39;</span> <span class="n">package_identifier</span> <span class="p">;</span>

<span class="n">package_renaming</span> <span class="p">:</span><span class="o">:=</span>
  <span class="s1">&#39;package&#39;</span> <span class="o">&lt;</span><span class="n">package_</span><span class="o">&gt;</span><span class="n">simple_name</span> <span class="s1">&#39;renames&#39;</span>
        <span class="o">&lt;</span><span class="n">project_</span><span class="o">&gt;</span><span class="n">simple_name</span><span class="o">.</span><span class="n">package_identifier</span> <span class="p">;</span>

<span class="n">package_extension</span> <span class="p">:</span><span class="o">:=</span>
  <span class="s1">&#39;package&#39;</span> <span class="o">&lt;</span><span class="n">package_</span><span class="o">&gt;</span><span class="n">simple_name</span> <span class="s1">&#39;extends&#39;</span>
        <span class="o">&lt;</span><span class="n">project_</span><span class="o">&gt;</span><span class="n">simple_name</span><span class="o">.</span><span class="n">package_identifier</span> <span class="s1">&#39;is&#39;</span>
     <span class="p">{</span> <span class="n">simple_declarative_item</span> <span class="p">}</span>
  <span class="s1">&#39;end&#39;</span> <span class="n">package_identifier</span> <span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="expressions">
<span id="index-191"></span><span id="id41"></span><h3><span class="section-number">2.10.5. </span>Expressions<a class="headerlink" href="#expressions" title="Permalink to this headline">¶</a></h3>
<p>An expression is any value that can be assigned to an attribute or a
variable. It is either a literal value, or a construct requiring run-time
computation by the Project Manager. In a project file, the computed value of
an expression is either a string or a list of strings.</p>
<p>A string value is one of:</p>
<ul class="simple">
<li><p>A literal string, for instance <code class="docutils literal notranslate"><span class="pre">&quot;comm/my_proj.gpr&quot;</span></code></p></li>
<li><p>The name of a variable that evaluates to a string (see <a class="reference internal" href="#variables"><span class="std std-ref">Variables</span></a>)</p></li>
<li><p>The name of an attribute that evaluates to a string (see <a class="reference internal" href="#attributes"><span class="std std-ref">Attributes</span></a>)</p></li>
<li><p>An external reference (see <span class="xref std std-ref">External_Values</span>)</p></li>
<li><p>A concatenation of the above, as in <code class="docutils literal notranslate"><span class="pre">&quot;prefix_&quot;</span> <span class="pre">&amp;</span> <span class="pre">Var</span></code>.</p></li>
</ul>
<p>A list of strings is one of the following:</p>
<ul class="simple">
<li><p>A parenthesized comma-separated list of zero or more string expressions, for
instance <code class="docutils literal notranslate"><span class="pre">(File_Name,</span> <span class="pre">&quot;gnat.adc&quot;,</span> <span class="pre">File_Name</span> <span class="pre">&amp;</span> <span class="pre">&quot;.orig&quot;)</span></code> or <code class="docutils literal notranslate"><span class="pre">()</span></code>.</p></li>
<li><p>The name of a variable that evaluates to a list of strings</p></li>
<li><p>The name of an attribute that evaluates to a list of strings</p></li>
<li><p>A concatenation of a list of strings and a string (as defined above), for
instance <code class="docutils literal notranslate"><span class="pre">(&quot;A&quot;,</span> <span class="pre">&quot;B&quot;)</span> <span class="pre">&amp;</span> <span class="pre">&quot;C&quot;</span></code></p></li>
<li><p>A concatenation of two lists of strings</p></li>
</ul>
<p>The following is the grammar for expressions</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">string_literal</span> <span class="p">:</span><span class="o">:=</span> <span class="s2">&quot;</span><span class="si">{string_element}</span><span class="s2">&quot;</span>  <span class="o">--</span>  <span class="n">Same</span> <span class="k">as</span> <span class="n">Ada</span>

<span class="n">string_expression</span> <span class="p">:</span><span class="o">:=</span> <span class="n">string_literal</span>
    <span class="o">|</span> <span class="o">&lt;</span><span class="n">variable_</span><span class="o">&gt;</span><span class="n">name</span>
    <span class="o">|</span> <span class="n">external_value</span>
    <span class="o">|</span> <span class="n">attribute_reference</span>
    <span class="o">|</span> <span class="p">(</span> <span class="n">string_expression</span> <span class="p">{</span> <span class="o">&amp;</span> <span class="n">string_expression</span> <span class="p">}</span> <span class="p">)</span>

<span class="n">string_list</span>  <span class="p">:</span><span class="o">:=</span> <span class="p">(</span> <span class="n">string_expression</span> <span class="p">{</span> <span class="p">,</span> <span class="n">string_expression</span> <span class="p">}</span> <span class="p">)</span>
   <span class="o">|</span> <span class="o">&lt;</span><span class="n">string_variable</span><span class="o">&gt;</span><span class="n">_name</span>
   <span class="o">|</span> <span class="o">&lt;</span><span class="n">string_</span><span class="o">&gt;</span><span class="n">attribute_reference</span>

<span class="n">term</span> <span class="p">:</span><span class="o">:=</span> <span class="n">string_expression</span> <span class="o">|</span> <span class="n">string_list</span>

<span class="n">expression</span> <span class="p">:</span><span class="o">:=</span> <span class="n">term</span> <span class="p">{</span> <span class="o">&amp;</span> <span class="n">term</span> <span class="p">}</span>     <span class="o">--</span>  <span class="n">Concatenation</span>
</pre></div>
</div>
<p>Concatenation involves strings and list of strings. As soon as a list of
strings is involved, the result of the concatenation is a list of strings. The
following Ada declarations show the existing operators:</p>
<blockquote>
<div><div class="highlight-ada notranslate"><div class="highlight"><pre><span></span><span class="kr">function</span><span class="p"> </span><span class="s">&quot;&amp;&quot;</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">String</span><span class="p">;</span>      <span class="n">Y</span> <span class="o">:</span> <span class="n">String</span><span class="o">)</span>      <span class="kr">return</span><span class="p"> </span><span class="n">String</span><span class="p">;</span>
<span class="kr">function</span><span class="p"> </span><span class="s">&quot;&amp;&quot;</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">String_List</span><span class="p">;</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">String</span><span class="o">)</span>      <span class="kr">return</span><span class="p"> </span><span class="n">String_List</span><span class="p">;</span>
<span class="kr">function</span><span class="p"> </span><span class="s">&quot;&amp;&quot;</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">String_List</span><span class="p">;</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">String_List</span><span class="o">)</span> <span class="kr">return</span><span class="p"> </span><span class="n">String_List</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>Here are some specific examples:</p>
<blockquote>
<div><div class="highlight-ada notranslate"><div class="highlight"><pre><span></span><span class="n">List</span> <span class="o">:=</span> <span class="o">()</span> <span class="o">&amp;</span> <span class="n">File_Name</span><span class="p">;</span> <span class="c">--  One string in this list</span>
<span class="n">List2</span> <span class="o">:=</span> <span class="n">List</span> <span class="o">&amp;</span> <span class="o">(</span><span class="n">File_Name</span> <span class="o">&amp;</span> <span class="s">&quot;.orig&quot;</span><span class="o">)</span><span class="p">;</span> <span class="c">-- Two strings</span>
<span class="n">Big_List</span> <span class="o">:=</span> <span class="n">List</span> <span class="o">&amp;</span> <span class="n">Lists2</span><span class="p">;</span>  <span class="c">--  Three strings</span>
<span class="n">Illegal</span> <span class="o">:=</span> <span class="s">&quot;gnat.adc&quot;</span> <span class="o">&amp;</span> <span class="n">List2</span><span class="p">;</span>  <span class="c">--  Illegal, must start with list</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="built-in-functions">
<span id="builtin-functions"></span><span id="index-192"></span><h3><span class="section-number">2.10.6. </span>Built-in Functions<a class="headerlink" href="#built-in-functions" title="Permalink to this headline">¶</a></h3>
<p>Built-in functions may be used in expression. The names of built-in functions
are not reserved words and may also be used as variable names.
In an expression, a built-in function is recognized if its name is immediately
followed by an open parenthesis (‘(‘).</p>
<span class="target" id="external-values"></span><div class="section" id="the-function-external">
<span id="index-193"></span><h4><span class="section-number">2.10.6.1. </span>The function <code class="docutils literal notranslate"><span class="pre">external</span></code><a class="headerlink" href="#the-function-external" title="Permalink to this headline">¶</a></h4>
<p>An external value is an expression whose value is obtained from the command
that invoked the processing of the current project file (typically a
<em>gprbuild</em> command).</p>
<p>The syntax of a single string external value is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">external_value</span> <span class="p">:</span><span class="o">:=</span> <span class="s1">&#39;external&#39;</span> <span class="p">(</span> <span class="n">string_literal</span> <span class="p">[,</span> <span class="n">string_literal</span><span class="p">]</span> <span class="p">)</span>
</pre></div>
</div>
<p>The first string_literal is the name of the external variable, whose
value (a string) may be specified by an environment variable with this name,
or on the command line via the <code class="samp docutils literal notranslate"><span class="pre">-X</span><em><span class="pre">name</span></em><span class="pre">=</span><em><span class="pre">value</span></em></code> option.
The command line takes precedence if the name is defined in both contexts,
thus allowing the user to locally override an environment variable.
The second string_literal,
if present, is the default to use if there is no specification for this
external value either on the command line or in the environment.
If the value of the external variable is not obtained from an
environment variable or the command line, and the invocation of
the <code class="docutils literal notranslate"><span class="pre">external</span></code> function does not supply a second parameter, then
an error is reported.</p>
<p>An external reference may be part of a string expression or of a string
list expression, and can therefore appear in a variable declaration or
an attribute declaration.</p>
<p id="scenario-variable">This construct is typically used to initialize <em>typed variables</em>, which
are then used in <em>case</em> constructions to control the value assigned to
attributes in various scenarios. Thus such variables are often called
<em>scenario variables</em>.</p>
</div>
<div class="section" id="the-function-external-as-list">
<span id="index-194"></span><h4><span class="section-number">2.10.6.2. </span>The function <code class="docutils literal notranslate"><span class="pre">external_as_list</span></code><a class="headerlink" href="#the-function-external-as-list" title="Permalink to this headline">¶</a></h4>
<p>An external value is an expression whose value is obtained from the command
that invoked the processing of the current project file (typically a
<em>gprbuild</em> command).</p>
<p>The syntax for a string list external value is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">external_value</span> <span class="p">:</span><span class="o">:=</span> <span class="s1">&#39;external_as_list&#39;</span> <span class="p">(</span> <span class="n">string_literal</span> <span class="p">,</span> <span class="n">string_literal</span> <span class="p">)</span>
</pre></div>
</div>
<p>The first string_literal is the name of the external variable, with
the same interpretation as for the <code class="docutils literal notranslate"><span class="pre">external</span></code> function; it is
looked up first on the command line (as the name in a <code class="samp docutils literal notranslate"><span class="pre">-X</span><em><span class="pre">name</span></em><span class="pre">=</span><em><span class="pre">value</span></em></code>
option) and, if not so specified, then as an environment variable.
If it is not defined by either of these, then the function returns
an empty list.
The second string_literal is the separator between each component of the
string list.
An empty list is returned if the separator
is an empty string or if the external value is only one separator.</p>
<p>Any separator at the beginning or at the end of the external value is
discarded. Then, if there is no separator in the external value, the result is
a string list with only one string. Otherwise, any string between the beginning
and the first separator, between two consecutive separators and between the
last separator and the end are components of the string list.</p>
<p>Note the following differences between <code class="docutils literal notranslate"><span class="pre">external</span></code> and <code class="docutils literal notranslate"><span class="pre">external_as_list</span></code>:</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">external_as_list</span></code> function has no default value for the external
variable</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">external_as_list</span></code> function returns an empty list, and does not
report an error, when the value of the external variable is undefined.</p></li>
</ul>
<p>These differences reflect the different use cases for the two functions.
External variables evaluated by the <code class="docutils literal notranslate"><span class="pre">external</span></code> function are
often used for configuration control, and misspellings should be
detected as errors rather than silently returning the empty string. If the
user intended an empty string as the result when the external variable
was undefined, then this could easily be obtained:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">external</span> <span class="p">(</span><span class="s2">&quot;SOME_VAR&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>In contrast, the <code class="docutils literal notranslate"><span class="pre">external_as_list</span></code> function more typically is used
for external variables that may or may not have definitions (for example,
lists of options or paths) and then the desired result in the undefined
case is an empty list, not a reported error.</p>
<p>Here is an example of the <code class="docutils literal notranslate"><span class="pre">external_as_list</span></code> function:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">external_as_list</span> <span class="p">(</span><span class="s2">&quot;SWITCHES&quot;</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>If the external value of <code class="docutils literal notranslate"><span class="pre">SWITCHES</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;-O2,-g&quot;</span></code>,
the result is <code class="docutils literal notranslate"><span class="pre">(&quot;-O2&quot;,</span> <span class="pre">&quot;-g&quot;)</span></code>.</p>
<p>If the external value is <code class="docutils literal notranslate"><span class="pre">&quot;,-O2,-g,&quot;</span></code>,
the result is also <code class="docutils literal notranslate"><span class="pre">(&quot;-O2&quot;,</span> <span class="pre">&quot;-g&quot;)</span></code>.</p>
<p>if the external value is <code class="docutils literal notranslate"><span class="pre">&quot;-gnatv&quot;</span></code>,
the result is <code class="docutils literal notranslate"><span class="pre">(&quot;-gnatv&quot;)</span></code>.</p>
<p>If the external value is <code class="docutils literal notranslate"><span class="pre">&quot;,,&quot;</span></code>, the result is (<code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>).</p>
<p>If the external value is <code class="docutils literal notranslate"><span class="pre">&quot;,&quot;</span></code>, the result is <code class="docutils literal notranslate"><span class="pre">()</span></code>, the empty string list.</p>
</div>
<div class="section" id="split">
<span id="id42"></span><h4><span class="section-number">2.10.6.3. </span>Split<a class="headerlink" href="#split" title="Permalink to this headline">¶</a></h4>
<p>Function Split takes two single string parameters and return a string list.</p>
<p>Example:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Split</span> <span class="p">(</span><span class="s2">&quot;-gnatf,-gnatv&quot;</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">)</span>

<span class="o">=&gt;</span> <span class="p">(</span><span class="s2">&quot;-gnatf&quot;</span><span class="p">,</span> <span class="s2">&quot;gnatv&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>The first string argument is the string to be split. The second argument is
the separator. Each occurrence of the separator in the first argument is a place
where it is split. If the first argument is an empty string or contains only
occurrences of the separator, then the result is an empty string list.
If the argument does not contains any occurrence of the separator, then the
result is a list with only one string: the first argument. Empty strings are
not included in the result.</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Split</span> <span class="p">(</span><span class="s2">&quot;-gnatf   -gnatv&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span>

<span class="o">=&gt;</span> <span class="p">(</span><span class="s2">&quot;-gnatf&quot;</span><span class="p">,</span> <span class="s2">&quot;gnatv&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="typed-string-declaration">
<span id="index-195"></span><span id="id43"></span><h3><span class="section-number">2.10.7. </span>Typed String Declaration<a class="headerlink" href="#typed-string-declaration" title="Permalink to this headline">¶</a></h3>
<p>A <strong>type declaration</strong> introduces a discrete set of string literals.
If a string variable is declared to have this type, its value
is restricted to the given set of literals. These are the only named
types in project files. A type declaration may only appear at the project
level, not inside a package.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">typed_string_declaration</span> <span class="p">:</span><span class="o">:=</span>
  <span class="s1">&#39;type&#39;</span> <span class="o">&lt;</span><span class="n">typed_string_</span><span class="o">&gt;</span><span class="n">simple_name</span> <span class="s1">&#39;is&#39;</span> <span class="p">(</span> <span class="n">string_literal</span> <span class="p">{,</span> <span class="n">string_literal</span><span class="p">}</span> <span class="p">);</span>
</pre></div>
</div>
<p>The string literals in the list are case sensitive and must all be different.
They may include any graphic characters allowed in Ada, including spaces.
Here is an example of a string type declaration:</p>
<blockquote>
<div><div class="highlight-ada notranslate"><div class="highlight"><pre><span></span><span class="kr">type</span><span class="p"> </span><span class="n">OS</span> <span class="kr">is</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;GNU/Linux&quot;</span><span class="p">,</span> <span class="s">&quot;Unix&quot;</span><span class="p">,</span> <span class="s">&quot;Windows&quot;</span><span class="p">,</span> <span class="s">&quot;VMS&quot;</span><span class="o">)</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>Variables of a string type are called <strong>typed variables</strong>; all other
variables are called <strong>untyped variables</strong>. Typed variables are
particularly useful in <cite>case</cite> constructions, to support conditional
attribute declarations. (See <a class="reference internal" href="#case-constructions"><span class="std std-ref">Case Constructions</span></a>).</p>
<p>A string type may be referenced by its name if it has been declared in the same
project file, or by an expanded name whose prefix is the name of the project
in which it is declared.</p>
</div>
<div class="section" id="variables">
<span id="index-196"></span><span id="id44"></span><h3><span class="section-number">2.10.8. </span>Variables<a class="headerlink" href="#variables" title="Permalink to this headline">¶</a></h3>
<p><strong>Variables</strong> store values (strings or list of strings) and can appear
as part of an expression. The declaration of a variable creates the
variable and assigns the value of the expression to it. The name of the
variable is available immediately after the assignment symbol, if you
need to reuse its old value to compute the new value. Before the completion
of its first declaration, the value of a variable defaults to the empty
string (<code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>).</p>
<p>A <strong>typed</strong> variable can be used as part of a <strong>case</strong> expression to
compute the value, but it can only be declared once in the project file,
so that all case constructions see the same value for the variable. This
provides more consistency and makes the project easier to understand.
The syntax for its declaration is identical to the Ada syntax for an
object declaration. In effect, a typed variable acts as a constant.</p>
<p>An <strong>untyped</strong> variable can be declared and overridden multiple times
within the same project. It is declared implicitly through an Ada
assignment. The first declaration establishes the kind of the variable
(string or list of strings) and successive declarations must respect
the initial kind. Assignments are executed in the order in which they
appear, so the new value replaces the old one and any subsequent reference
to the variable uses the new value.</p>
<p>A variable may be declared at the project file level, or within a package.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">typed_variable_declaration</span> <span class="p">:</span><span class="o">:=</span>
  <span class="o">&lt;</span><span class="n">typed_variable_</span><span class="o">&gt;</span><span class="n">simple_name</span> <span class="p">:</span> <span class="o">&lt;</span><span class="n">typed_string_</span><span class="o">&gt;</span><span class="n">name</span> <span class="o">:=</span> <span class="n">string_expression</span><span class="p">;</span>

<span class="n">variable_declaration</span> <span class="p">:</span><span class="o">:=</span> <span class="o">&lt;</span><span class="n">variable_</span><span class="o">&gt;</span><span class="n">simple_name</span> <span class="o">:=</span> <span class="n">expression</span><span class="p">;</span>
</pre></div>
</div>
<p>Here are some examples of variable declarations:</p>
<blockquote>
<div><div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="n">This_OS</span> <span class="o">:</span> <span class="n">OS</span> <span class="o">:=</span> <span class="kr">external</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;OS&quot;</span><span class="o">)</span><span class="p">;</span> <span class="c">--  a typed variable declaration</span>
<span class="n">That_OS</span> <span class="o">:=</span> <span class="s">&quot;GNU/Linux&quot;</span><span class="p">;</span>          <span class="c">--  an untyped variable declaration</span>

<span class="n">Name</span>      <span class="o">:=</span> <span class="s">&quot;readme.txt&quot;</span><span class="p">;</span>
<span class="n">Save_Name</span> <span class="o">:=</span> <span class="n">Name</span> <span class="o">&amp;</span> <span class="s">&quot;.saved&quot;</span><span class="p">;</span>

<span class="n">Empty_List</span> <span class="o">:=</span> <span class="o">()</span><span class="p">;</span>
<span class="n">List_With_One_Element</span> <span class="o">:=</span> <span class="o">(</span><span class="s">&quot;-gnaty&quot;</span><span class="o">)</span><span class="p">;</span>
<span class="n">List_With_Two_Elements</span> <span class="o">:=</span> <span class="n">List_With_One_Element</span> <span class="o">&amp;</span> <span class="s">&quot;-gnatg&quot;</span><span class="p">;</span>
<span class="n">Long_List</span> <span class="o">:=</span> <span class="o">(</span><span class="s">&quot;main.ada&quot;</span><span class="p">,</span> <span class="s">&quot;pack1_.ada&quot;</span><span class="p">,</span> <span class="s">&quot;pack1.ada&quot;</span><span class="p">,</span> <span class="s">&quot;pack2_.ada&quot;</span><span class="o">)</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>A <strong>variable reference</strong> may take several forms:</p>
<ul class="simple">
<li><p>The simple variable name, for a variable in the current package (if any)
or in the current project</p></li>
<li><p>An expanded name, whose prefix is a context name.</p></li>
</ul>
<p>A <strong>context</strong> may be one of the following:</p>
<ul class="simple">
<li><p>The name of an existing package in the current project</p></li>
<li><p>The name of an imported project of the current project</p></li>
<li><p>The name of a direct or indirect base project (i.e., a project extended by the current
project, either directly or indirectly)</p></li>
<li><p>An expanded name whose prefix is an imported/parent project name, and
whose selector is a package name in that project.</p></li>
</ul>
</div>
<div class="section" id="case-constructions">
<span id="index-197"></span><span id="id45"></span><h3><span class="section-number">2.10.9. </span>Case Constructions<a class="headerlink" href="#case-constructions" title="Permalink to this headline">¶</a></h3>
<p>A <strong>case</strong> construction is used in a project file to effect conditional
behavior. Through this construction, you can set the value of attributes
and variables depending on the value previously assigned to a typed
variable.</p>
<p>All choices in a choice list must be distinct. Unlike Ada, the choice
lists of all alternatives do not need to include all values of the type.
An <cite>others</cite> choice must appear last in the list of alternatives.</p>
<p>The syntax of a <code class="docutils literal notranslate"><span class="pre">case</span></code> construction is based on the Ada case construction
(although the <code class="docutils literal notranslate"><span class="pre">null</span></code> declaration for empty alternatives is optional).</p>
<p>The case expression must be a string variable, either typed or not, whose value
is often given by an external reference (see <span class="xref std std-ref">External_Values</span>).</p>
<p>Each alternative starts with the reserved word <code class="docutils literal notranslate"><span class="pre">when</span></code>, either a list of
literal strings separated by the <code class="docutils literal notranslate"><span class="pre">&quot;|&quot;</span></code> character or the reserved word
<code class="docutils literal notranslate"><span class="pre">others</span></code>, and the <code class="docutils literal notranslate"><span class="pre">&quot;=&gt;&quot;</span></code> token.
When the case expression is a typed string variable, each literal string must
belong to the string type that is the type of the case variable.
After each <code class="docutils literal notranslate"><span class="pre">=&gt;</span></code>, there are zero or more declarations.  The only
declarations allowed in a case construction are other case constructions,
attribute declarations, and variable declarations. String type declarations and
package declarations are not allowed. Variable declarations are restricted to
variables that have already been declared before the case construction.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">case_construction</span> <span class="p">:</span><span class="o">:=</span>
  <span class="s1">&#39;case&#39;</span> <span class="o">&lt;</span><span class="n">variable_</span><span class="o">&gt;</span><span class="n">name</span> <span class="s1">&#39;is&#39;</span> <span class="p">{</span><span class="n">case_item</span><span class="p">}</span> <span class="s1">&#39;end&#39;</span> <span class="s1">&#39;case&#39;</span> <span class="p">;</span>

<span class="n">case_item</span> <span class="p">:</span><span class="o">:=</span>
  <span class="s1">&#39;when&#39;</span> <span class="n">discrete_choice_list</span> <span class="o">=&gt;</span>
    <span class="p">{</span><span class="n">case_declaration</span>
      <span class="o">|</span> <span class="n">attribute_declaration</span>
      <span class="o">|</span> <span class="n">variable_declaration</span>
      <span class="o">|</span> <span class="n">empty_declaration</span><span class="p">}</span>

<span class="n">discrete_choice_list</span> <span class="p">:</span><span class="o">:=</span> <span class="n">string_literal</span> <span class="p">{</span><span class="o">|</span> <span class="n">string_literal</span><span class="p">}</span> <span class="o">|</span> <span class="s1">&#39;others&#39;</span>
</pre></div>
</div>
<p>Here is a typical example, with a typed string variable:</p>
<blockquote>
<div><div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="k">project </span><span class="nf">MyProj</span> <span class="kr">is</span><span class="p"></span>
   <span class="kr">type</span><span class="p"> </span><span class="n">OS_Type</span> <span class="kr">is</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;GNU/Linux&quot;</span><span class="p">,</span> <span class="s">&quot;Unix&quot;</span><span class="p">,</span> <span class="s">&quot;Windows&quot;</span><span class="p">,</span> <span class="s">&quot;VMS&quot;</span><span class="o">)</span><span class="p">;</span>
   <span class="n">OS</span> <span class="o">:</span> <span class="n">OS_Type</span> <span class="o">:=</span> <span class="kr">external</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;OS&quot;</span><span class="p">,</span> <span class="s">&quot;GNU/Linux&quot;</span><span class="o">)</span><span class="p">;</span>

   <span class="k">package </span><span class="nf">Compiler</span> <span class="kr">is</span><span class="p"></span>
     <span class="kr">case</span><span class="p"> </span><span class="n">OS</span> <span class="kr">is</span><span class="p"></span>
       <span class="kr">when</span><span class="p"> </span><span class="s">&quot;GNU/Linux&quot;</span> <span class="o">|</span> <span class="s">&quot;Unix&quot;</span> <span class="o">=&gt;</span>
         <span class="kr">for</span><span class="p"> </span><span class="n">Switches</span> <span class="o">(</span><span class="s">&quot;Ada&quot;</span><span class="o">)</span>
             <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;-gnath&quot;</span><span class="o">)</span><span class="p">;</span>
       <span class="kr">when</span><span class="p"> </span><span class="s">&quot;Windows&quot;</span> <span class="o">=&gt;</span>
         <span class="kr">for</span><span class="p"> </span><span class="n">Switches</span> <span class="o">(</span><span class="s">&quot;Ada&quot;</span><span class="o">)</span>
             <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;-gnatP&quot;</span><span class="o">)</span><span class="p">;</span>
       <span class="kr">when</span><span class="p"> </span><span class="kr">others</span><span class="p"> </span><span class="o">=&gt;</span>
         <span class="kr">null</span><span class="p">;</span>
     <span class="k">end </span><span class="nf">case</span><span class="p">;</span>
   <span class="k">end </span><span class="nf">Compiler</span><span class="p">;</span>
<span class="k">end </span><span class="nf">MyProj</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="attributes">
<span id="index-198"></span><span id="id46"></span><h3><span class="section-number">2.10.10. </span>Attributes<a class="headerlink" href="#attributes" title="Permalink to this headline">¶</a></h3>
<p>A project (and its packages) may have <strong>attributes</strong> that define
the project’s properties.  Some attributes have values that are strings;
others have values that are string lists.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">attribute_declaration</span> <span class="p">:</span><span class="o">:=</span>
   <span class="n">simple_attribute_declaration</span> <span class="o">|</span> <span class="n">indexed_attribute_declaration</span>

<span class="n">simple_attribute_declaration</span> <span class="p">:</span><span class="o">:=</span> <span class="s1">&#39;for&#39;</span> <span class="n">attribute_designator</span> <span class="s1">&#39;use&#39;</span> <span class="n">expression</span> <span class="p">;</span>

<span class="n">indexed_attribute_declaration</span> <span class="p">:</span><span class="o">:=</span>
  <span class="s1">&#39;for&#39;</span> <span class="o">*&lt;</span><span class="n">indexed_attribute_</span><span class="o">&gt;*</span><span class="n">simple_name</span> <span class="p">(</span> <span class="n">string_literal</span><span class="p">)</span> <span class="s1">&#39;use&#39;</span> <span class="n">expression</span> <span class="p">;</span>

<span class="n">attribute_designator</span> <span class="p">:</span><span class="o">:=</span>
  <span class="o">&lt;</span><span class="n">simple_attribute_</span><span class="o">&gt;</span><span class="n">simple_name</span>
  <span class="o">|</span> <span class="o">&lt;</span><span class="n">indexed_attribute_</span><span class="o">&gt;</span><span class="n">simple_name</span> <span class="p">(</span> <span class="n">string_literal</span> <span class="p">)</span>
</pre></div>
</div>
<p>There are two categories of attributes: <strong>simple attributes</strong>
and <strong>indexed attributes</strong>.
Each simple attribute has a default value: the empty string (for string
attributes) and the empty list (for string list attributes).
An attribute declaration defines a new value for an attribute, and overrides
the previous value. The syntax of a simple attribute declaration is similar to
that of an attribute definition clause in Ada.</p>
<p>Some attributes are indexed. These attributes are mappings whose
domain is a set of strings. They are declared one association
at a time, by specifying a point in the domain and the corresponding image
of the attribute.
Like untyped variables and simple attributes, indexed attributes
may be declared several times. Each declaration supplies a new value for the
attribute, and replaces the previous setting.</p>
<p>Here are some examples of attribute declarations:</p>
<blockquote>
<div><div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="c">--  simple attributes</span>
<span class="kr">for</span><span class="p"> </span><span class="n">Object_Dir</span> <span class="kr">use</span><span class="p"> </span><span class="s">&quot;objects&quot;</span><span class="p">;</span>
<span class="kr">for</span><span class="p"> </span><span class="n">Source_Dirs</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;units&quot;</span><span class="p">,</span> <span class="s">&quot;test/drivers&quot;</span><span class="o">)</span><span class="p">;</span>

<span class="c">--  indexed attributes</span>
<span class="kr">for</span><span class="p"> </span><span class="kr">Body</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;main&quot;</span><span class="o">)</span> <span class="kr">use</span><span class="p"> </span><span class="s">&quot;Main.ada&quot;</span><span class="p">;</span>
<span class="kr">for</span><span class="p"> </span><span class="n">Switches</span> <span class="o">(</span><span class="s">&quot;main.ada&quot;</span><span class="o">)</span>
    <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;-v&quot;</span><span class="p">,</span> <span class="s">&quot;-gnatv&quot;</span><span class="o">)</span><span class="p">;</span>
<span class="kr">for</span><span class="p"> </span><span class="n">Switches</span> <span class="o">(</span><span class="s">&quot;main.ada&quot;</span><span class="o">)</span> <span class="kr">use</span><span class="p"> </span><span class="n">Builder</span><span class="o">&#39;</span><span class="n">Switches</span> <span class="o">(</span><span class="s">&quot;main.ada&quot;</span><span class="o">)</span> <span class="o">&amp;</span> <span class="s">&quot;-g&quot;</span><span class="p">;</span>

<span class="c">--  indexed attributes copy (from package Builder in project Default)</span>
<span class="c">--  The package name must always be specified, even if it is the current</span>
<span class="c">--  package.</span>
<span class="kr">for</span><span class="p"> </span><span class="n">Default_Switches</span> <span class="kr">use</span><span class="p"> </span><span class="n">Default.Builder</span><span class="o">&#39;</span><span class="n">Default_Switches</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>When an attribute is defined in the configuration project but not in the user
project, it is inherited in the user project.</p>
<p>When a single string attribute is defined in both the configuration project
and the user project, its value in the user project is as declared; the value
in the configuration project does not matter.</p>
<p>For string list attributes, there are two cases. Some of these attributes are
<strong>configuration concatenable</strong>. For these attributes, when they are declared
in both the configuration project and the user project, the final value is
the concatenation of the value in the configuration project with the value
in the user project. The configuration concatenable attributes are indicated
in the list below.</p>
<p>Attributes references may appear anywhere in expressions, and are used
to retrieve the value previously assigned to the attribute. If an attribute
has not been set in a given package or project, its value defaults to the
empty string or the empty list, with some exceptions.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">attribute_reference</span> <span class="p">:</span><span class="o">:=</span>
  <span class="n">attribute_prefix</span> <span class="s1">&#39; &lt;simple_attribute&gt;_simple_name [ (string_literal) ]</span>

<span class="n">attribute_prefix</span> <span class="p">:</span><span class="o">:=</span> <span class="s1">&#39;project&#39;</span>
  <span class="o">|</span> <span class="o">&lt;</span><span class="n">project_</span><span class="o">&gt;</span><span class="n">simple_name</span>
  <span class="o">|</span> <span class="n">package_identifier</span>
  <span class="o">|</span> <span class="o">&lt;</span><span class="n">project_</span><span class="o">&gt;</span><span class="n">simple_name</span> <span class="o">.</span> <span class="n">package_identifier</span>
</pre></div>
</div>
<p>Here are some examples:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">project</span><span class="s1">&#39;Object_Dir</span>
<span class="n">Naming</span><span class="s1">&#39;Dot_Replacement</span>
<span class="n">Imported_Project</span><span class="s1">&#39;Source_Dirs</span>
<span class="n">Imported_Project</span><span class="o">.</span><span class="n">Naming</span><span class="s1">&#39;Casing</span>
<span class="n">Builder</span><span class="s1">&#39;Default_Switches (&quot;Ada&quot;)</span>
</pre></div>
</div>
</div></blockquote>
<p>The exceptions to the empty defaults are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Object_Dir</span></code>: default is <code class="docutils literal notranslate"><span class="pre">&quot;.&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Exec_Dir</span></code>: default is <code class="docutils literal notranslate"><span class="pre">'Object_Dir</span></code>, that is, the value of attribute
<code class="docutils literal notranslate"><span class="pre">Object_Dir</span></code> in the same project, declared or defaulted</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Source_Dirs</span></code>: default is <code class="docutils literal notranslate"><span class="pre">(&quot;.&quot;)</span></code></p></li>
</ul>
<p>The prefix of an attribute may be:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">project</span></code> for an attribute of the current project</p></li>
<li><p>The name of an existing package of the current project</p></li>
<li><p>The name of an imported project</p></li>
<li><p>The name of a parent project that is extended by the current project</p></li>
<li><p>An expanded name whose prefix is imported/base/parent project name,
and whose selector is a package name</p></li>
</ul>
<p>In the following sections, all predefined attributes are succinctly described,
first the project level attributes (that is, those attributes that are not in a
package), then the attributes in the different packages.</p>
<p>It is possible for different tools to dynamically create new packages with
attributes, or new attributes in predefined packages. These attributes are
not documented here.</p>
<p>The attributes under Configuration headings are usually found only in
configuration project files.</p>
<p>The characteristics of each attribute are indicated as follows:</p>
<ul>
<li><p><strong>Type of value</strong></p>
<p>The value of an attribute may be a single string, indicated by the word
“single”, or a string list, indicated by the word “list”.</p>
</li>
<li><p><strong>Read-only</strong></p>
<p>When the attribute is read-only – that is when a declaration for
the attribute is forbidden – this is indicated by the “read-only”.</p>
</li>
<li><p><strong>Optional index</strong></p>
<p>If an optional index is allowed in the value of the attribute (both single
and list), this is indicated by the words “optional index”.</p>
</li>
<li><p><strong>Indexed attribute</strong></p>
<p>An indexed attribute is indicated by the word “indexed”.</p>
</li>
<li><p><strong>Case-sensitivity of the index</strong></p>
<p>For an indexed attribute, if the index is case-insensitive, this is indicated
by the words “case-insensitive index”.</p>
</li>
<li><p><strong>File name index</strong></p>
<p>For an indexed attribute, when the index is a file name, this is indicated by
the words “file name index”. The index may or may not be case-sensitive,
depending on the platform.</p>
</li>
<li><p><strong>others allowed in index</strong></p>
<p>For an indexed attribute, if it is allowed to use <strong>others</strong> as the index,
this is indicated by the words “others allowed”.</p>
<p>When <strong>others</strong> is used as the index of an indexed attribute, the value of
the attribute indexed by <strong>others</strong> is used when no other index would apply.</p>
</li>
<li><p><strong>configuration concatenable</strong></p>
<p>For a string list attribute, the final value if the attribute is declared
in both the configuration project and the user project is the concatenation
of the two value, configuration then user.</p>
</li>
</ul>
<div class="section" id="project-level-attributes">
<span id="id47"></span><h4><span class="section-number">2.10.10.1. </span>Project Level Attributes<a class="headerlink" href="#project-level-attributes" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p><strong>General</strong></p>
<ul>
<li><p><strong>Name</strong>: single, read-only</p>
<p>The name of the project.</p>
</li>
<li><p><strong>Project_Dir</strong>: single, read-only</p>
<p>The path name of the project directory.</p>
</li>
<li><p><strong>Main</strong>: list, optional index</p>
<p>The list of main sources for the executables.</p>
</li>
<li><p><strong>Languages</strong>: list</p>
<p>The list of languages of the sources of the project.</p>
</li>
<li><p><strong>Roots</strong>: list, indexed, file name index</p>
<p>The index is the file name of an executable source. Indicates the list of units
from the main project that need to be bound and linked with their closures
with the executable. The index is either a file name, a language name or “*”.
The roots for an executable source are those in <strong>Roots</strong> with an index that
is the executable source file name, if declared. Otherwise, they are those in
<strong>Roots</strong> with an index that is the language name of the executable source,
if present. Otherwise, they are those in <strong>Roots (“*”)</strong>, if declared. If none
of these three possibilities are declared, then there are no roots for the
executable source.</p>
</li>
<li><p><strong>Externally_Built</strong>: single</p>
<p>Indicates if the project is externally built.
Only case-insensitive values allowed are “true” and “false”, the default.</p>
</li>
</ul>
</li>
<li><p><strong>Directories</strong></p>
<ul>
<li><p><strong>Object_Dir</strong>: single</p>
<p>Indicates the object directory for the project.</p>
</li>
<li><p><strong>Exec_Dir</strong>: single</p>
<p>Indicates the exec directory for the project, that is the directory where the
executables are.</p>
</li>
<li><p><strong>Create_Missing_Dirs</strong>: single</p>
<p>Indicates if the missing object, library and executable directories should
be created automatically by the project-aware tool.  Taken into account
only in the main project. Only authorized case-insensitive values are
“true” and “false”.</p>
</li>
<li><p><strong>Source_Dirs</strong>: list</p>
<p>The list of source directories of the project.</p>
</li>
<li><p><strong>Inherit_Source_Path</strong>: list, indexed, case-insensitive index</p>
<p>Index is a language name. Value is a list of language names. Indicates that
in the source search path of the index language the source directories of
the languages in the list should be included.</p>
<p>Example:</p>
<div class="highlight-gpr notranslate"><div class="highlight"><pre><span></span><span class="kr">for</span><span class="p"> </span><span class="n">Inherit_Source_Path</span> <span class="o">(</span><span class="s">&quot;C++&quot;</span><span class="o">)</span> <span class="kr">use</span><span class="p"> </span><span class="o">(</span><span class="s">&quot;C&quot;</span><span class="o">)</span><span class="p">;</span>
</pre></div>
</div>
</li>
<li><p><strong>Exclude_Source_Dirs</strong>: list</p>
<p>The list of directories that are included in Source_Dirs but are not source
directories of the project.</p>
</li>
<li><p><strong>Ignore_Source_Sub_Dirs</strong>: list</p>
<p>Value is a list of simple names or patterns for subdirectories that are
removed from the list of source directories, including their subdirectories.</p>
</li>
</ul>
</li>
<li><p><strong>Source Files</strong></p>
<ul>
<li><p><strong>Source_Files</strong>: list</p>
<p>Value is a list of source file simple names.</p>
</li>
<li><p><strong>Locally_Removed_Files</strong>: list</p>
<p>Obsolescent. Equivalent to Excluded_Source_Files.</p>
</li>
<li><p><strong>Excluded_Source_Files</strong>: list</p>
<p>Value is a list of simple file names that are not sources of the project.
Allows to remove sources that are inherited or found in the source directories
and that match the naming scheme.</p>
</li>
<li><p><strong>Source_List_File</strong>: single</p>
<p>Value is a text file name that contains a list of source file simple names,
one on each line.</p>
</li>
<li><p><strong>Excluded_Source_List_File</strong>: single</p>
<p>Value is a text file name that contains a list of file simple names that
are not sources of the project.</p>
</li>
<li><p><strong>Interfaces</strong>: list</p>
<p>Value is a list of file names that constitutes the interfaces of the project.</p>
</li>
</ul>
</li>
<li><p><strong>Aggregate Projects</strong></p>
<ul>
<li><p><strong>Project_Files</strong>: list</p>
<p>Value is the list of aggregated projects.</p>
</li>
<li><p><strong>Project_Path</strong>: list</p>
<p>Value is a list of directories that are added to the project search path when
looking for the aggregated projects.</p>
</li>
<li><p><strong>External</strong>: single, indexed</p>
<p>Index is the name of an external reference. Value is the value of the
external reference to be used when parsing the aggregated projects.</p>
</li>
</ul>
</li>
<li><p><strong>Libraries</strong></p>
<ul>
<li><p><strong>Library_Dir</strong>: single</p>
<p>Value is the name of the library directory. This attribute needs to be
declared for each library project.</p>
</li>
<li><p><strong>Library_Name</strong>: single</p>
<p>Value is the name of the library. This attribute needs to be declared or
inherited for each library project.</p>
</li>
<li><p><strong>Library_Kind</strong>: single</p>
<p>Specifies the kind of library: static library (archive) or shared library.
Case-insensitive values must be one of “static” for archives (the default),
“static-pic” for archives of Position Independent Code, or “dynamic” or
“relocatable” for shared libraries.</p>
</li>
<li><p><strong>Library_Version</strong>: single</p>
<p>Value is the name of the library file.</p>
</li>
<li><p><strong>Library_Interface</strong>: list</p>
<p>Value is the list of unit names that constitutes the interfaces
of a Stand-Alone Library project.</p>
</li>
<li><p><strong>Library_Standalone</strong>: single</p>
<p>Specifies if a Stand-Alone Library (SAL) is encapsulated or not.
Only authorized case-insensitive values are “standard” for non encapsulated
SALs, “encapsulated” for encapsulated SALs or “no” for non SAL library project.</p>
</li>
<li><p><strong>Library_Encapsulated_Options</strong>: list, configuration concatenable</p>
<p>Value is a list of options that need to be used when linking an encapsulated
Stand-Alone Library.</p>
</li>
<li><p><strong>Library_Encapsulated_Supported</strong>: single</p>
<p>Indicates if encapsulated Stand-Alone Libraries are supported. Only
authorized case-insensitive values are “true” and “false” (the default).</p>
</li>
<li><p><strong>Library_Auto_Init</strong>: single</p>
<p>Indicates if a Stand-Alone Library is auto-initialized. Only authorized
case-insensitive values are “true” and “false”.</p>
</li>
<li><p><strong>Leading_Library_Options</strong>: list, configuration concatenable</p>
<p>Value is a list of options that are to be used at the beginning of
the command line when linking a shared library.</p>
</li>
<li><p><strong>Library_Options</strong>: list, configuration concatenable</p>
<p>Value is a list of options that are to be used when linking a shared library.</p>
</li>
<li><p><strong>Library_Rpath_Options</strong>: list, indexed, case-insensitive index, configuration concatenable</p>
<p>Index is a language name. Value is a list of options for an invocation of the
compiler of the language. This invocation is done for a shared library project
with sources of the language. The output of the invocation is the path name
of a shared library file. The directory name is to be put in the run path
option switch when linking the shared library for the project.</p>
</li>
<li><p><strong>Library_Src_Dir</strong>: single</p>
<p>Value is the name of the directory where copies of the sources of the
interfaces of a Stand-Alone Library are to be copied.</p>
</li>
<li><p><strong>Library_ALI_Dir</strong>: single</p>
<p>Value is the name of the directory where the ALI files of the interfaces
of a Stand-Alone Library are to be copied. When this attribute is not declared,
the directory is the library directory.</p>
</li>
<li><p><strong>Library_gcc</strong>: single</p>
<p>Obsolescent attribute. Specify the linker driver used to link a shared library.
Use instead attribute Linker’Driver.</p>
</li>
<li><p><strong>Library_Symbol_File</strong>: single</p>
<p>Value is the name of the library symbol file.</p>
</li>
<li><p><strong>Library_Symbol_Policy</strong>: single</p>
<p>Indicates the symbol policy kind. Only authorized case-insensitive
values are “restricted”, “unrestricted”.</p>
</li>
<li><p><strong>Library_Reference_Symbol_File</strong>: single</p>
<p>Value is the name of the reference symbol file.</p>
</li>
</ul>
</li>
<li><p><strong>Configuration - General</strong></p>
<ul>
<li><p><strong>Default_Language</strong>: single</p>
<p>Value is the case-insensitive name of the language of a project when attribute
Languages is not specified.</p>
</li>
<li><p><strong>Run_Path_Option</strong>: list</p>
<p>Value is the list of switches to be used when specifying the run path option
in an executable.</p>
</li>
<li><p><strong>Run_Path_Origin</strong>: single</p>
<p>Value is the string that may replace the path name of the executable
directory in the run path options.</p>
</li>
<li><p><strong>Separate_Run_Path_Options</strong>: single</p>
<p>Indicates if there may be several run path options specified when linking an
executable. Only authorized case-insensitive values are “true” or “false” (the
default).</p>
</li>
<li><p><strong>Toolchain_Version</strong>: single, indexed, case-insensitive index</p>
<p>Index is a language name. Specify the version of a toolchain for a language.</p>
</li>
<li><p><strong>Required_Toolchain_Version</strong>: single, indexed, case-insensitive index</p>
<p>Index is a language name. Specify the value expected for the Toolchain_Version
attribute for this language, typically provided by an auto-generated configuration
project. If Required_Toolchain_Version and Toolchain_Version do not match, the
project processing aborts with an error.</p>
</li>
<li><p><strong>Toolchain_Description</strong>: single, indexed, case-insensitive index</p>
<p>Obsolescent. No longer used.</p>
</li>
<li><p><strong>Object_Generated</strong>: single, indexed, case-insensitive index</p>
<p>Index is a language name. Indicates if invoking the compiler for a language
produces an object file. Only authorized case-insensitive values are “false”
and “true” (the default).</p>
</li>
<li><p><strong>Objects_Linked</strong>: single, indexed, case-insensitive index</p>
<p>Index is a language name. Indicates if the object files created by the compiler
for a language need to be linked in the executable. Only authorized
case-insensitive values are “false” and “true” (the default).</p>
</li>
<li><p><strong>Target</strong>: single</p>
<p>Value is the name of the target platform. Taken into account only in the main
project.</p>
<p>Note that when the target is specified on the command line (usually with
a switch –target=), the value of attribute reference ‘Target is the one
specified on the command line.</p>
</li>
<li><p><strong>Runtime</strong>: single, indexed, case-insensitive index</p>
<p>Index is a language name. Indicates the runtime directory that is to be used
when using the compiler of the language. Taken into account only in the main
project, or its extended projects if any.</p>
<p>Note that when the runtime is specified for a language on the command line
(usually with a switch –RTS), the value of attribute reference ‘Runtime
for this language is the one specified on the command line.</p>
</li>
<li><p><strong>Runtime_Dir</strong>: single, indexed, case-insensitive index</p>
<p>Index is a language name. Value is the path name of the runtime directory
for the language.</p>
</li>
<li><p><strong>Runtime_Library_Dirs</strong>: list, indexed, case-insensitive index</p>
<p>Index is a language name. Value is the path names of the directories where
the runtime libraries are located. This attribute is not normally declared.</p>
</li>
<li><p><strong>Runtime_Library_Dir</strong>: single, indexed, case-insensitive index</p>
<p>Index is a language name. Value is the path name of the directory where the
runtime libraries are located. This attribute is obsolete.</p>
</li>
<li><p><strong>Runtime_Source_Dirs</strong>: list, indexed, case-insensitive index</p>
<p>Index is a language name. Value is the path names of the directories where
the sources of runtime libraries are located. This attribute is not
normally declared.</p>
</li>
<li><p><strong>Runtime_Source_Dir</strong>: single, indexed, case-insensitive index</p>
<p>Index is a language name. Value is the path name of the directory where the
sources of runtime libraries are located. This attribute is obsolete.</p>
</li>
<li><p><strong>Runtime_Library_Version</strong>: single, indexed, case-insensitive index</p>
<p>Index is a language name. Value is library version for the language. This
attribute is not normally declared.</p>
</li>
<li><p><strong>Toolchain_Name</strong>: single, indexed, case-insensitive index</p>
<p>Index is a language name. Indicates the toolchain name that is to be used
when using the compiler of the language. Taken into account only in the main
project, or its extended projects if any.</p>
</li>
</ul>
</li>
<li><p><strong>Configuration - Libraries</strong></p>
<ul>
<li><p><strong>Library_Builder</strong>: single</p>
<p>Value is the path name of the application that is to be used to build
libraries. Usually the path name of “gprlib”.</p>
</li>
<li><p><strong>Library_Support</strong>: single</p>
<p>Indicates the level of support of libraries. Only authorized case-insensitive
values are “static_only”, “full” or “none” (the default).</p>
</li>
</ul>
</li>
<li><p><strong>Configuration - Archives</strong></p>
<ul>
<li><p><strong>Archive_Builder</strong>: list</p>
<p>Value is the name of the application to be used to create a static library
(archive), followed by the options to be used.</p>
</li>
<li><p><strong>Archive_Builder_Append_Option</strong>: list</p>
<p>Value is the list of options to be used when invoking the archive builder
to add project files into an archive.</p>
</li>
<li><p><strong>Archive_Indexer</strong>: list</p>
<p>Value is the name of the archive indexer, followed by the required options.</p>
</li>
<li><p><strong>Archive_Suffix</strong>: single</p>
<p>Value is the extension of archives. When not declared, the extension is “.a”.</p>
</li>
<li><p><strong>Library_Partial_Linker</strong>: list</p>
<p>Value is the name of the partial linker executable, followed by the required
options.</p>
</li>
</ul>
</li>
<li><p><strong>Configuration - Shared Libraries</strong></p>
<ul>
<li><p><strong>Shared_Library_Prefix</strong>: single</p>
<p>Value is the prefix in the name of shared library files. When not declared,
the prefix is “lib”.</p>
</li>
<li><p><strong>Shared_Library_Suffix</strong>: single</p>
<p>Value is the extension of the name of shared library files. When not
declared, the extension is “.so”.</p>
</li>
<li><p><strong>Symbolic_Link_Supported</strong>: single</p>
<p>Indicates if symbolic links are supported on the platform. Only authorized
case-insensitive values are “true” and “false” (the default).</p>
</li>
<li><p><strong>Library_Major_Minor_Id_Supported</strong>: single</p>
<p>Indicates if major and minor ids for shared library names are supported on
the platform. Only authorized case-insensitive values are “true” and “false”
(the default).</p>
</li>
<li><p><strong>Library_Auto_Init_Supported</strong>: single</p>
<p>Indicates if auto-initialization of Stand-Alone Libraries is supported. Only
authorized case-insensitive values are “true” and “false” (the default).</p>
</li>
<li><p><strong>Shared_Library_Minimum_Switches</strong>: list, configuration concatenable</p>
<p>Value is the list of required switches when linking a shared library.</p>
</li>
<li><p><strong>Library_Version_Switches</strong>: list, configuration concatenable</p>
<p>Value is the list of switches to specify a internal name for a shared library.</p>
</li>
<li><p><strong>Library_Install_Name_Option</strong>: single</p>
<p>Value is the name of the option that needs to be used, concatenated with the
path name of the library file, when linking a shared library.</p>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="package-binder-attributes">
<span id="id48"></span><h4><span class="section-number">2.10.10.2. </span>Package Binder Attributes<a class="headerlink" href="#package-binder-attributes" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p><strong>General</strong></p>
<ul>
<li><p><strong>Default_Switches</strong>: list, indexed, case-insensitive index,
configuration concatenable</p>
<p>Index is a language name. Value is the list of switches to be used when binding
code of the language, if there is no applicable attribute Switches.</p>
</li>
<li><p><strong>Switches</strong>: list, optional index, indexed, case-insensitive index,
others allowed, configuration concatenable</p>
<p>Index is either a language name or a source file name. Value is the list of
switches to be used when binding code. Index is either the source file name
of the executable to be bound or the language name of the code to be bound.</p>
</li>
</ul>
</li>
<li><p><strong>Configuration - Binding</strong></p>
<ul>
<li><p><strong>Driver</strong>: single, indexed, case-insensitive index</p>
<p>Index is a language name. Value is the name of the application to be used when
binding code of the language.</p>
</li>
<li><p><strong>Required_Switches</strong>: list, indexed, case-insensitive index,
configuration concatenable</p>
<p>Index is a language name. Value is the list of the required switches to be
used when binding code of the language.</p>
</li>
<li><p><strong>Prefix</strong>: single, indexed, case-insensitive index</p>
<p>Index is a language name. Value is a prefix to be used for the binder exchange
file name for the language. Used to have different binder exchange file names
when binding different languages.</p>
</li>
<li><p><strong>Objects_Path</strong>: single,indexed, case-insensitive index</p>
<p>Index is a language name. Value is the name of the environment variable that
contains the path for the object directories.</p>
</li>
<li><p><strong>Object_Path_File</strong>: single,indexed, case-insensitive index</p>
<p>Index is a language name. Value is the name of the environment variable. The
value of the environment variable is the path name of a text file that
contains the list of object directories.</p>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="package-builder-attributes">
<span id="id49"></span><h4><span class="section-number">2.10.10.3. </span>Package Builder Attributes<a class="headerlink" href="#package-builder-attributes" title="Permalink to this headline">¶</a></h4>
<ul>
<li><dl class="simple">
<dt><strong>Default_Switches</strong>: list, indexed, case-insensitive index,</dt><dd><p>configuration concatenable</p>
</dd>
</dl>
<p>Index is a language name. Value is the list of builder switches to be used when
building an executable of the language, if there is no applicable attribute
Switches.</p>
</li>
<li><dl class="simple">
<dt><strong>Switches</strong>: list, optional index, indexed, case-insensitive index,</dt><dd><p>others allowed, configuration concatenable</p>
</dd>
</dl>
<p>Index is either a language name or a source file name. Value is the list of
builder switches to be used when building an executable. Index is either the
source file name of the executable to be built or its language name.</p>
</li>
<li><dl class="simple">
<dt><strong>Global_Compilation_Switches</strong>: list, optional index, indexed,</dt><dd><p>case-insensitive index, configuration concatenable</p>
</dd>
</dl>
<p>Index is a language name. Value is the list of compilation switches to be
used when building an executable. Index is either the source file name of
the executable to be built or its language name.</p>
</li>
<li><p><strong>Executable</strong>: single, indexed, case-insensitive index</p>
<p>Index is an executable source file name. Value is the simple file name of the
executable to be built.</p>
</li>
<li><p><strong>Executable_Suffix</strong>: single</p>
<p>Value is the extension of the file names of executable. When not specified,
the extension is the default extension of executables on the platform.</p>
</li>
<li><p><strong>Global_Configuration_Pragmas</strong>: single</p>
<p>Value is the file name of a configuration pragmas file that is specified to
the Ada compiler when compiling any Ada source in the project tree.</p>
</li>
<li><p><strong>Global_Config_File</strong>: single, indexed, case-insensitive index</p>
<p>Index is a language name. Value is the file name of a configuration file that
is specified to the compiler when compiling any source of the language in the
project tree.</p>
</li>
</ul>
</div>
<div class="section" id="package-check-attributes">
<span id="id50"></span><h4><span class="section-number">2.10.10.4. </span>Package Check Attributes<a class="headerlink" href="#package-check-attributes" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p><strong>Default_Switches</strong>: list, indexed, case-insensitive index,
configuration concatenable</p>
<p>Index is a language name. Value is a list of switches to be used when invoking
<cite>gnatcheck</cite> for a source of the language, if there is no applicable
attribute Switches.</p>
</li>
<li><p><strong>Switches</strong>: list, optional index, indexed, case-insensitive index,
others allowed, configuration concatenable</p>
<p>Index is a source file name. Value is the list of switches to be used when
invoking <cite>gnatcheck</cite> for the source.</p>
</li>
</ul>
</div>
<div class="section" id="package-clean-attributes">
<span id="id51"></span><h4><span class="section-number">2.10.10.5. </span>Package Clean Attributes<a class="headerlink" href="#package-clean-attributes" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p><strong>Switches</strong>: list, configuration concatenable</p>
<p>Value is a list of switches to be used by the cleaning application.</p>
</li>
<li><p><strong>Source_Artifact_Extensions</strong>: list, indexed, case-insensitive index</p>
<p>Index is a language names. Value is the list of extensions for file names
derived from object file names that need to be cleaned in the object
directory of the project.</p>
</li>
<li><p><strong>Object_Artifact_Extensions</strong>: list, indexed, case-insensitive index</p>
<p>Index is a language names. Value is the list of extensions for file names
derived from source file names that need to be cleaned in the object
directory of the project.</p>
</li>
<li><p><strong>Artifacts_In_Object_Dir</strong>: single</p>
<p>Value is a list of file names expressed as regular expressions that are to be
deleted by gprclean in the object directory of the project.</p>
</li>
<li><p><strong>Artifacts_In_Exec_Dir</strong>: single</p>
<p>Value is list of file names expressed as regular expressions that are to be
deleted by gprclean in the exec directory of the main project.</p>
</li>
</ul>
</div>
<div class="section" id="package-compiler-attributes">
<span id="id52"></span><h4><span class="section-number">2.10.10.6. </span>Package Compiler Attributes<a class="headerlink" href="#package-compiler-attributes" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p><strong>General</strong></p>
<ul>
<li><p><strong>Default_Switches</strong>: list, indexed, case-insensitive index,
configuration concatenable</p>
<p>Index is a language name. Value is a list of switches to be used when invoking
the compiler for the language for a source of the project, if there is no
applicable attribute Switches.</p>
</li>
<li><p><strong>Switches</strong>: list, optional index, indexed, case-insensitive index,
others allowed, configuration concatenable</p>
<p>Index is a source file name or a language name. Value is the list of switches
to be used when invoking the compiler for the source or for its language.</p>
</li>
<li><p><strong>Local_Configuration_Pragmas</strong>: single</p>
<p>Value is the file name of a configuration pragmas file that is specified to
the Ada compiler when compiling any Ada source in the project.</p>
</li>
<li><p><strong>Local_Config_File</strong>: single, indexed, case-insensitive index</p>
<p>Index is a language name. Value is the file name of a configuration file that
is specified to the compiler when compiling any source of the language in the
project.</p>
</li>
</ul>
</li>
<li><p><strong>Configuration - Compiling</strong></p>
<ul>
<li><p><strong>Driver</strong>: single, indexed, case-insensitive index</p>
<p>Index is a language name. Value is the name of the executable for the compiler
of the language.</p>
</li>
<li><p><strong>Language_Kind</strong>: single, indexed, case-insensitive index</p>
<p>Index is a language name. Indicates the kind of the language, either file based
or unit based. Only authorized case-insensitive values are “unit_based” and
“file_based” (the default).</p>
</li>
<li><p><strong>Dependency_Kind</strong>: single, indexed, case-insensitive index</p>
<p>Index is a language name. Indicates how the dependencies are handled for the
language. Only authorized case-insensitive values are “makefile”, “ali_file”,
“ali_closure” or “none” (the default).</p>
</li>
<li><p><strong>Required_Switches</strong>: list, indexed, case-insensitive index,
configuration concatenable</p>
<p>Equivalent to attribute Leading_Required_Switches.</p>
</li>
<li><p><strong>Leading_Required_Switches</strong>: list, indexed, case-insensitive index,
configuration concatenable</p>
<p>Index is a language name. Value is the list of the minimum switches to be used
at the beginning of the command line when invoking the compiler for the
language.</p>
</li>
<li><p><strong>Trailing_Required_Switches</strong>: list, indexed, case-insensitive index,
configuration concatenable</p>
<p>Index is a language name. Value is the list of the minimum switches to be used
at the end of the command line when invoking the compiler for the language.</p>
</li>
<li><p><strong>PIC_Option</strong>: list, indexed, case-insensitive index</p>
<p>Index is a language name. Value is the list of switches to be used when
compiling a source of the language when the project is a shared library
project.</p>
</li>
<li><p><strong>Source_File_Switches</strong>: single, indexed, case-insensitive index
configuration concatenable</p>
<p>Index is a language name. Value is a list of switches to be used just before
the path name of the source to compile when invoking the compiler for a source
of the language.</p>
</li>
<li><p><strong>Object_File_Suffix</strong>: single, indexed, case-insensitive index</p>
<p>Index is a language name. Value is the extension of the object files created
by the compiler of the language. When not specified, the extension is the
default one for the platform.</p>
</li>
<li><p><strong>Object_File_Switches</strong>: list, indexed, case-insensitive index,
configuration concatenable</p>
<p>Index is a language name. Value is the list of switches to be used by the
compiler of the language to specify the path name of the object file. When not
specified, the switch used is “-o”.</p>
</li>
<li><p><strong>Multi_Unit_Switches</strong>: list, indexed, case-insensitive index,
configuration concatenable</p>
<p>Index is a language name. Value is the list of switches to be used to compile
a unit in a multi unit source of the language. The index of the unit in the
source is concatenated with the last switches in the list.</p>
</li>
<li><p><strong>Multi_Unit_Object_Separator</strong>: single, indexed, case-insensitive index</p>
<p>Index is a language name. Value is the string to be used in the object file
name before the index of the unit, when compiling a unit in a multi unit source
of the language.</p>
</li>
</ul>
</li>
<li><p><strong>Configuration - Mapping Files</strong></p>
<ul>
<li><p><strong>Mapping_File_Switches</strong>: list, indexed, case-insensitive index,
configuration concatenable</p>
<p>Index is a language name. Value is the list of switches to be used to specify
a mapping file when invoking the compiler for a source of the language.</p>
</li>
<li><p><strong>Mapping_Spec_Suffix</strong>: single, indexed, case-insensitive index</p>
<p>Index is a language name. Value is the suffix to be used in a mapping file
to indicate that the source is a spec.</p>
</li>
<li><p><strong>Mapping_Body_Suffix</strong>: single, indexed, case-insensitive index</p>
<p>Index is a language name. Value is the suffix to be used in a mapping file
to indicate that the source is a body.</p>
</li>
</ul>
</li>
<li><p><strong>Configuration - Config Files</strong></p>
<ul>
<li><p><strong>Config_File_Switches</strong>: list: single, indexed, case-insensitive index,
configuration concatenable</p>
<p>Index is a language name. Value is the list of switches to specify to the
compiler of the language a configuration file.</p>
</li>
<li><p><strong>Config_Body_File_Name</strong>: single, indexed, case-insensitive index</p>
<p>Index is a language name. Value is the template to be used to indicate a
configuration specific to a body of the language in a configuration
file.</p>
</li>
<li><p><strong>Config_Body_File_Name_Index</strong>: single, indexed, case-insensitive index</p>
<p>Index is a language name. Value is the template to be used to indicate a
configuration specific to the body a unit in a multi unit source of the
language in a configuration file.</p>
</li>
<li><p><strong>Config_Body_File_Name_Pattern</strong>: single, indexed,
case-insensitive index</p>
<p>Index is a language name. Value is the template to be used to indicate a
configuration for all bodies of the languages in a configuration file.</p>
</li>
<li><p><strong>Config_Spec_File_Name</strong>: single, indexed, case-insensitive index</p>
<p>Index is a language name. Value is the template to be used to indicate a
configuration specific to a spec of the language in a configuration
file.</p>
</li>
<li><p><strong>Config_Spec_File_Name_Index</strong>: single, indexed, case-insensitive index</p>
<p>Index is a language name. Value is the template to be used to indicate a
configuration specific to the spec a unit in a multi unit source of the
language in a configuration file.</p>
</li>
<li><p><strong>Config_Spec_File_Name_Pattern</strong>: single, indexed,
case-insensitive index</p>
<p>Index is a language name. Value is the template to be used to indicate a
configuration for all specs of the languages in a configuration file.</p>
</li>
<li><p><strong>Config_File_Unique</strong>: single, indexed, case-insensitive index</p>
<p>Index is a language name. Indicates if there should be only one configuration
file specified to the compiler of the language. Only authorized
case-insensitive values are “true” and “false” (the default).</p>
</li>
</ul>
</li>
<li><p><strong>Configuration - Dependencies</strong></p>
<ul>
<li><p><strong>Dependency_Switches</strong>: list, indexed, case-insensitive index,
configuration concatenable</p>
<p>Index is a language name. Value is the list of switches to be used to specify
to the compiler the dependency file when the dependency kind of the language is
file based, and when Dependency_Driver is not specified for the language.</p>
</li>
<li><p><strong>Dependency_Driver</strong>: list, indexed, case-insensitive index</p>
<p>Index is a language name. Value is the name of the executable to be used to
create the dependency file for a source of the language, followed by the
required switches.</p>
</li>
</ul>
</li>
<li><p><strong>Configuration - Search Paths</strong></p>
<ul>
<li><p><strong>Include_Switches</strong>: list, indexed, case-insensitive index,
configuration concatenable</p>
<p>Index is a language name. Value is the list of switches to specify to the
compiler of the language to indicate a directory to look for sources.</p>
</li>
<li><p><strong>Include_Path</strong>: single, indexed, case-insensitive index</p>
<p>Index is a language name. Value is the name of an environment variable that
contains the path of all the directories that the compiler of the language
may search for sources.</p>
</li>
<li><p><strong>Include_Path_File</strong>: single, indexed, case-insensitive index</p>
<p>Index is a language name. Value is the name of an environment variable the
value of which is the path name of a text file that contains the directories
that the compiler of the language may search for sources.</p>
</li>
<li><p><strong>Object_Path_Switches</strong>: list, indexed, case-insensitive index,
configuration concatenable</p>
<p>Index is a language name. Value is the list of switches to specify to the
compiler of the language the name of a text file that contains the list of
object directories. When this attribute is not declared, the text file is
not created.</p>
</li>
</ul>
</li>
<li><p><strong>Configuration - Response Files</strong></p>
<ul>
<li><p><strong>Max_Command_Line_Length</strong>: single</p>
<p>Value is the maximum number of character in the command line when invoking
a compiler that supports response files.</p>
</li>
<li><p><strong>Response_File_Format</strong>: single, indexed, case-insensitive index</p>
<p>Indicates the kind of response file to create when the length of the compiling
command line is too large. The index is the name of the language for the compiler.
Only authorized case-insensitive values are “none”,
“gnu”, “object_list”, “gcc_gnu”, “gcc_option_list” and “gcc_object_list”.</p>
</li>
<li><p><strong>Response_File_Switches</strong>: list, indexed, case-insensitive index,
configuration concatenable</p>
<p>Value is the list of switches to specify a response file for a compiler.
The index is the name of the language for the compiler.</p>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="package-cross-reference-attributes">
<span id="id53"></span><h4><span class="section-number">2.10.10.7. </span>Package Cross_Reference Attributes<a class="headerlink" href="#package-cross-reference-attributes" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p><strong>Default_Switches</strong>: list, indexed, case-insensitive index,
configuration concatenable</p>
<p>Index is a language name. Value is a list of switches to be used when invoking
<cite>gnatxref</cite> for a source of the language, if there is no applicable
attribute Switches.</p>
</li>
<li><p><strong>Switches</strong>: list, optional index, indexed, case-insensitive index,
others allowed, configuration concatenable</p>
<p>Index is a source file name. Value is the list of switches to be used when
invoking <cite>gnatxref</cite> for the source.</p>
</li>
</ul>
</div>
<div class="section" id="package-documentation-attributes">
<span id="id54"></span><h4><span class="section-number">2.10.10.8. </span>Package Documentation Attributes<a class="headerlink" href="#package-documentation-attributes" title="Permalink to this headline">¶</a></h4>
<p>Please refer to GNATdoc documentation for the list of supported attributes and
their meaning.</p>
</div>
<div class="section" id="package-eliminate-attributes">
<span id="id55"></span><h4><span class="section-number">2.10.10.9. </span>Package Eliminate Attributes<a class="headerlink" href="#package-eliminate-attributes" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p><strong>Default_Switches</strong>: list, indexed, case-insensitive index,
configuration concatenable</p>
<p>Index is a language name. Value is a list of switches to be used when invoking
<cite>gnatelim</cite> for a source of the language, if there is no applicable
attribute Switches.</p>
</li>
<li><p><strong>Switches</strong>: list, optional index, indexed, case-insensitive index,
others allowed, configuration concatenable</p>
<p>Index is a source file name. Value is the list of switches to be used when
invoking <cite>gnatelim</cite> for the source.</p>
</li>
</ul>
</div>
<div class="section" id="package-finder-attributes">
<span id="id56"></span><h4><span class="section-number">2.10.10.10. </span>Package Finder Attributes<a class="headerlink" href="#package-finder-attributes" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p><strong>Default_Switches</strong>: list, indexed, case-insensitive index,
configuration concatenable</p>
<p>Index is a language name. Value is a list of switches to be used when invoking
<cite>gnatfind</cite> for a source of the language, if there is no applicable
attribute Switches.</p>
</li>
<li><p><strong>Switches</strong>: list, optional index, indexed, case-insensitive index,
others allowed, configuration concatenable</p>
<p>Index is a source file name. Value is the list of switches to be used when
invoking <cite>gnatfind</cite> for the source.</p>
</li>
</ul>
</div>
<div class="section" id="package-gnatls-attributes">
<span id="id57"></span><h4><span class="section-number">2.10.10.11. </span>Package Gnatls Attributes<a class="headerlink" href="#package-gnatls-attributes" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p><strong>Switches</strong>: list</p>
<p>Value is a list of switches to be used when invoking <cite>gnatls</cite>.</p>
</li>
</ul>
</div>
<div class="section" id="package-gnatstub-attributes">
<h4><span class="section-number">2.10.10.12. </span>Package gnatstub Attributes<a class="headerlink" href="#package-gnatstub-attributes" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p><strong>Default_Switches</strong>: list, indexed, case-insensitive index,
configuration concatenable</p>
<p>Index is a language name. Value is a list of switches to be used when invoking
<cite>gnatstub</cite> for a source of the language, if there is no applicable
attribute Switches.</p>
</li>
<li><p><strong>Switches</strong>: list, optional index, indexed, case-insensitive index,
others allowed, configuration concatenable</p>
<p>Index is a source file name. Value is the list of switches to be used when
invoking <cite>gnatstub</cite> for the source.</p>
</li>
</ul>
</div>
<div class="section" id="package-ide-attributes">
<span id="id58"></span><h4><span class="section-number">2.10.10.13. </span>Package IDE Attributes<a class="headerlink" href="#package-ide-attributes" title="Permalink to this headline">¶</a></h4>
<p>Please refer to your IDE documentation for the list of supported attributes and their meaning.</p>
</div>
<div class="section" id="package-install-attributes">
<span id="id59"></span><h4><span class="section-number">2.10.10.14. </span>Package Install Attributes<a class="headerlink" href="#package-install-attributes" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p><strong>Artifacts</strong>: list, indexed</p>
<p>An indexed attribute to declare a set of files not part of the sources
to be installed. The array index is the directory where the
file is to be installed. If a relative directory then Prefix (see
below) is prepended. Note also that if the same file name occurs
multiple time in the attribute list, the last one will be the one
installed. If an artifact is not found a warning is displayed.</p>
</li>
<li><p><strong>Required_Artifacts</strong>: list, indexed</p>
<p>As above, but artifacts must be present or an error is reported.</p>
</li>
<li><p><strong>Prefix</strong>: single</p>
<p>Value is the install destination directory. If the value is a
relative path, it is taken as relative to the global prefix
directory. That is, either the value passed to <cite>–prefix</cite> option or
the default installation prefix.</p>
</li>
<li><p><strong>Sources_Subdir</strong>: single</p>
<p>Value is the sources directory or subdirectory of Prefix.</p>
</li>
<li><p><strong>Exec_Subdir</strong>: single</p>
<p>Value is the executables directory or subdirectory of Prefix.</p>
</li>
<li><p><strong>ALI_Subdir</strong>: single</p>
<p>Value is ALI directory or subdirectory of Prefix.</p>
</li>
<li><p><strong>Lib_Subdir</strong>: single</p>
<p>Value is library directory or subdirectory of Prefix.</p>
</li>
<li><p><strong>Project_Subdir</strong>: single</p>
<p>Value is the project directory or subdirectory of Prefix.</p>
</li>
<li><p><strong>Active</strong>: single</p>
<p>Indicates that the project is to be installed or not. Case-insensitive value
“false” means that the project is not to be installed, all other values mean
that the project is to be installed.</p>
</li>
<li><p><strong>Mode</strong>: single</p>
<p>Value is the installation mode, it is either <strong>dev</strong> (default) or <strong>usage</strong>.</p>
</li>
<li><p><strong>Install_Name</strong>: single</p>
<p>Specify the name to use for recording the installation. The default is
the project name without the extension.</p>
</li>
<li><p><strong>Side_Debug</strong>: single</p>
<p>Indicates that the project’s executable and shared libraries are to
be stripped of the debug symbols. Those debug symbols are written
into a side file named after the original file with the “.debug”
extension added. Case-insensitive value “false” (default) disables
this feature. Set it to “true” to activate.</p>
</li>
<li><p><strong>Install_Project</strong>: single</p>
<p>Indicates that a project is to be generated and installed. The
value is either “true” to “false”. Default is “true”.</p>
</li>
</ul>
</div>
<div class="section" id="package-linker-attributes">
<span id="id60"></span><h4><span class="section-number">2.10.10.15. </span>Package Linker Attributes<a class="headerlink" href="#package-linker-attributes" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p><strong>General</strong></p>
<ul>
<li><p><strong>Required_Switches</strong>: list, configuration concatenable</p>
<p>Value is a list of switches that are required when invoking the linker to link
an executable.</p>
</li>
<li><p><strong>Default_Switches</strong>: list, indexed, case-insensitive index,
configuration concatenable</p>
<p>Index is a language name. Value is a list of switches for the linker when
linking an executable for a main source of the language, when there is no
applicable Switches.</p>
</li>
<li><p><strong>Leading_Switches</strong>: list, optional index, indexed,
case-insensitive index, others allowed, configuration concatenable</p>
<p>Index is a source file name or a language name. Value is the list of switches
to be used at the beginning of the command line when invoking the linker to
build an executable for the source or for its language.</p>
</li>
<li><p><strong>Switches</strong>: list, optional index, indexed, case-insensitive index,
others allowed, configuration concatenable</p>
<p>Index is a source file name or a language name. Value is the list of switches
to be used when invoking the linker to build an executable for the source or
for its language.</p>
</li>
<li><p><strong>Trailing_Switches</strong>: list, optional index, indexed,
case-insensitive index, others allowed, configuration concatenable</p>
<p>Index is a source file name or a language name. Value is the list of switches
to be used at the end of the command line when invoking the linker to
build an executable for the source or for its language. These switches may
override the Required_Switches.</p>
</li>
</ul>
<ul id="index-199">
<li><p><strong>Linker_Options</strong>: list, configuration concatenable</p>
<p>This attribute specifies a list of additional switches to be given to the
linker when linking an executable. It is ignored when defined in the main
project and taken into account in all other projects that are imported
directly or indirectly. These switches complement the <code class="docutils literal notranslate"><span class="pre">Linker'Switches</span></code>
defined in the main project. This is useful when a particular subsystem
depends on an external library: adding this dependency as a
<code class="docutils literal notranslate"><span class="pre">Linker_Options</span></code> in the project of the subsystem is more convenient than
adding it to all the <code class="docutils literal notranslate"><span class="pre">Linker'Switches</span></code> of the main projects that depend
upon this subsystem.</p>
</li>
<li><p><strong>Map_File_Option</strong>: single</p>
<p>Value is the switch to specify the map file name that the linker needs to
create.</p>
</li>
<li><p><strong>Unconditionally_Linked</strong>: single, indexed, case-insensitive index</p>
<p>Index is a language name. Indicates that all object files of this language
going to be linked unconditionally. Only case-insensitive values allowed
are “true” and “false”, the default.</p>
</li>
</ul>
</li>
<li><p><strong>Configuration - Linking</strong></p>
<ul>
<li><p><strong>Driver</strong>: single</p>
<p>Value is the name of the linker executable.</p>
</li>
</ul>
</li>
<li><p><strong>Configuration - Response Files</strong></p>
<ul>
<li><p><strong>Max_Command_Line_Length</strong>: single</p>
<p>Value is the maximum number of character in the command line when invoking
the linker to link an executable.</p>
</li>
<li><p><strong>Response_File_Format</strong>: single</p>
<p>Indicates the kind of response file to create when the length of the linking
command line is too large. Only authorized case-insensitive values are “none”,
“gnu”, “object_list”, “gcc_gnu”, “gcc_option_list” and “gcc_object_list”.</p>
</li>
<li><p><strong>Response_File_Switches</strong>: list, configuration concatenable</p>
<p>Value is the list of switches to specify a response file to the linker.</p>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="package-metrics-attribute">
<span id="id61"></span><h4><span class="section-number">2.10.10.16. </span>Package Metrics Attribute<a class="headerlink" href="#package-metrics-attribute" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p><strong>Default_Switches</strong>: list, indexed, case-insensitive index,
configuration concatenable</p>
<p>Index is a language name. Value is a list of switches to be used when invoking
<cite>gnatmetric</cite> for a source of the language, if there is no applicable
attribute Switches.</p>
</li>
<li><p><strong>Switches</strong>: list, optional index, indexed, case-insensitive index,
others allowed, configuration concatenable</p>
<p>Index is a source file name. Value is the list of switches to be used when
invoking <cite>gnatmetric</cite> for the source.</p>
</li>
</ul>
</div>
<div class="section" id="package-naming-attributes">
<span id="id62"></span><h4><span class="section-number">2.10.10.17. </span>Package Naming Attributes<a class="headerlink" href="#package-naming-attributes" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p><strong>Specification_Suffix</strong>: single, indexed, case-insensitive index</p>
<p>Equivalent to attribute Spec_Suffix.</p>
</li>
<li><p><strong>Spec_Suffix</strong>: single, indexed, case-insensitive index</p>
<p>Index is a language name. Value is the extension of file names for specs of
the language.</p>
</li>
<li><p><strong>Implementation_Suffix</strong>: single, indexed, case-insensitive index</p>
<p>Equivalent to attribute Body_Suffix.</p>
</li>
<li><p><strong>Body_Suffix</strong>: single, indexed, case-insensitive index</p>
<p>Index is a language name. Value is the extension of file names for bodies of
the language.</p>
</li>
<li><p><strong>Separate_Suffix</strong>: single</p>
<p>Value is the extension of file names for subunits of Ada.</p>
</li>
<li><p><strong>Casing</strong>: single</p>
<p>Indicates the casing of sources of the Ada language. Only authorized
case-insensitive values are “lowercase”, “uppercase” and “mixedcase”.</p>
</li>
<li><p><strong>Dot_Replacement</strong>: single</p>
<p>Value is the string that replace the dot of unit names in the source file names
of the Ada language.</p>
</li>
<li><p><strong>Specification</strong>: single, optional index, indexed,
case-insensitive index</p>
<p>Equivalent to attribute Spec.</p>
</li>
<li><p><strong>Spec</strong>: single, optional index, indexed, case-insensitive index</p>
<p>Index is a unit name. Value is the file name of the spec of the unit.</p>
</li>
<li><p><strong>Implementation</strong>: single, optional index, indexed,
case-insensitive index</p>
<p>Equivalent to attribute Body.</p>
</li>
<li><p><strong>Body</strong>: single, optional index, indexed, case-insensitive index</p>
<p>Index is a unit name. Value is the file name of the body of the unit.</p>
</li>
<li><p><strong>Specification_Exceptions</strong>: list, indexed, case-insensitive index</p>
<p>Index is a language name. Value is a list of specs for the language that do not
necessarily follow the naming scheme for the language and that may or may not
be found in the source directories of the project.</p>
</li>
<li><p><strong>Implementation_Exceptions</strong>: list, indexed, case-insensitive index</p>
<p>Index is a language name. Value is a list of bodies for the language that do not
necessarily follow the naming scheme for the language and that may or may not
be found in the source directories of the project.</p>
</li>
</ul>
</div>
<div class="section" id="package-pretty-printer-attributes">
<span id="id63"></span><h4><span class="section-number">2.10.10.18. </span>Package Pretty_Printer Attributes<a class="headerlink" href="#package-pretty-printer-attributes" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p><strong>Default_Switches</strong>: list, indexed, case-insensitive index,
configuration concatenable</p>
<p>Index is a language name. Value is a list of switches to be used when invoking
<cite>gnatpp</cite> for a source of the language, if there is no applicable
attribute Switches.</p>
</li>
<li><p><strong>Switches</strong>: list, optional index, indexed, case-insensitive index,
others allowed, configuration concatenable</p>
<p>Index is a source file name. Value is the list of switches to be used when
invoking <cite>gnatpp</cite> for the source.</p>
</li>
</ul>
</div>
<div class="section" id="package-remote-attributes">
<span id="id64"></span><h4><span class="section-number">2.10.10.19. </span>Package Remote Attributes<a class="headerlink" href="#package-remote-attributes" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p><strong>Included_Patterns</strong>: list</p>
<p>If this attribute is defined it sets the patterns to
synchronized from the master to the slaves. It is exclusive
with Excluded_Patterns, that is it is an error to define
both.</p>
</li>
<li><p><strong>Included_Artifact_Patterns</strong>: list</p>
<p>If this attribute is defined it sets the patterns of compilation
artifacts to synchronized from the slaves to the build master.
This attribute replace the default hard-coded patterns.</p>
</li>
<li><p><strong>Excluded_Patterns</strong>: list</p>
<p>Set of patterns to ignore when synchronizing sources from the build
master to the slaves. A set of predefined patterns are supported
(e.g. *.o, *.ali, *.exe, etc.), this attributes make it possible to
add some more patterns.</p>
</li>
<li><p><strong>Root_Dir</strong>: single</p>
<p>Value is the root directory used by the slave machines.</p>
</li>
</ul>
</div>
<div class="section" id="package-stack-attributes">
<span id="id65"></span><h4><span class="section-number">2.10.10.20. </span>Package Stack Attributes<a class="headerlink" href="#package-stack-attributes" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p><strong>Switches</strong>: list, configuration concatenable</p>
<p>Value is the list of switches to be used when invoking <cite>gnatstack</cite>.</p>
</li>
</ul>
</div>
<div class="section" id="package-synchronize-attributes">
<h4><span class="section-number">2.10.10.21. </span>Package Synchronize Attributes<a class="headerlink" href="#package-synchronize-attributes" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p><strong>Default_Switches</strong>: list, indexed, case-insensitive index</p>
<p>Index is a language name. Value is a list of switches to be used when invoking
<cite>gnatsync</cite> for a source of the language, if there is no applicable
attribute Switches.</p>
</li>
<li><p><strong>Switches</strong>: list, optional index, indexed, case-insensitive index,
others allowed</p>
<p>Index is a source file name. Value is the list of switches to be used when
invoking <cite>gnatsync</cite> for the source.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="section" id="glossary">
<span id="project-file-glossary"></span><h2><span class="section-number">2.11. </span>Glossary<a class="headerlink" href="#glossary" title="Permalink to this headline">¶</a></h2>
<dl class="glossary simple">
<dt id="term-Abstract-project">Abstract project</dt><dd><p>A project with no source files, typically used to define common attributes
that are shared by other project files. See <a class="reference internal" href="#sharing-between-projects"><span class="std std-ref">Sharing between Projects</span></a>.</p>
</dd>
<dt id="term-Aggregate-project">Aggregate project</dt><dd><p>A project that in effect combines several projects in order to efficiently support
concurrent builds or builds of all main programs from the constituent projects,
or the convenient definition of a common environment for the constituent projects.
See <a class="reference internal" href="#aggregate-projects"><span class="std std-ref">Aggregate Projects</span></a>.</p>
</dd>
<dt id="term-Attribute">Attribute</dt><dd><p>A named property of a project or one of its packages.  See <a class="reference internal" href="#attributes"><span class="std std-ref">Attributes</span></a>.</p>
</dd>
<dt id="term-Base-project">Base project</dt><dd><p>A project that is extended by some other project. See <a class="reference internal" href="#project-extension"><span class="std std-ref">Project Extension</span></a>.</p>
</dd>
<dt id="term-Child-project">Child project</dt><dd><p>A project that is defined by a name <code class="docutils literal notranslate"><span class="pre">Parent_proj.Child_proj</span></code>
where <code class="docutils literal notranslate"><span class="pre">Child_proj</span></code> either imports or extends <code class="docutils literal notranslate"><span class="pre">Parent_Proj</span></code>.
This feature is typically used to show a close relationship between
the two projects, for example where the child project serves as a testbed
for the parent. See <a class="reference internal" href="#child-projects"><span class="std std-ref">Child Projects</span></a>.</p>
</dd>
<dt id="term-Configuration-project">Configuration project</dt><dd><p>A project that describes compilers and other tools, for use by <em>GPRbuild</em>.
See <a class="reference internal" href="#configuration-project"><span class="std std-ref">Configuration Project</span></a>.</p>
</dd>
<dt id="term-Extending-a-project">Extending a project</dt><dd><p>The reuse and possible adaption by one project of the source files from
another project (the base project). Somewhat analogous to (single) class inheritance in
object-oriented programming. See <a class="reference internal" href="#project-extension"><span class="std std-ref">Project Extension</span></a>.</p>
</dd>
<dt id="term-External-variable">External variable</dt><dd><p>A variable that is defined on the command line (by the <code class="xref std std-option docutils literal notranslate"><span class="pre">-X</span></code> switch), as the
value of an environment variable, or, by default, as the second parameter to the
<code class="docutils literal notranslate"><span class="pre">external</span></code> function. See <a class="reference internal" href="#scenarios-in-projects"><span class="std std-ref">Scenarios in Projects</span></a>.</p>
</dd>
<dt id="term-Global-attribute">Global attribute</dt><dd><p>An attribute that applies to all projects in the project import closure
of a main project. See <a class="reference internal" href="#global-attributes"><span class="std std-ref">Global Attributes</span></a>.</p>
</dd>
<dt id="term-Importing-a-project">Importing a project</dt><dd><p>The usage of a <code class="samp docutils literal notranslate"><span class="pre">with</span></code> or <code class="samp docutils literal notranslate"><span class="pre">limited</span> <span class="pre">with</span></code> clause on a project file in order
to reuse properties of some other project file. See <a class="reference internal" href="#importing-projects"><span class="std std-ref">Importing Projects</span></a>.</p>
</dd>
<dt id="term-Independent-project">Independent project</dt><dd><p>A project defined by a single project file and thus not dependent on any other
projects. See <a class="reference internal" href="#independent-project"><span class="std std-ref">Independent Project</span></a>.</p>
</dd>
<dt id="term-Library-project">Library project</dt><dd><p>A project that is used to define a library rather than an executable program.
See <a class="reference internal" href="#library-projects"><span class="std std-ref">Library Projects</span></a>.</p>
</dd>
<dt id="term-Main-project">Main project</dt><dd><p>A project that is specified on the command line. See <a class="reference internal" href="#global-attributes"><span class="std std-ref">Global Attributes</span></a>.</p>
</dd>
<dt id="term-Package">Package</dt><dd><p>A grouping of attribute definitions related to a particular GNAT tool.
See <a class="reference internal" href="#packages"><span class="std std-ref">Packages</span></a>.</p>
</dd>
<dt id="term-Parent-project">Parent project</dt><dd><p>A project that has one or more child projects.  See <a class="reference internal" href="#child-projects"><span class="std std-ref">Child Projects</span></a>.</p>
</dd>
<dt id="term-Project">Project</dt><dd><p>A set of named properties and their values, associated with the GNAT tools that
are used during the development of software in Ada and other languages.
Properties include directories for source files, object files, and executables;
the switch settings for the various tools; and the naming scheme for source
files.</p>
</dd>
<dt id="term-Project-extension">Project extension</dt><dd><p>See glossary item <cite>Extending a project</cite></p>
</dd>
<dt id="term-Project-file">Project file</dt><dd><p>A textual representation of a project, which uses an Ada-like notation.
The syntax is presented in <a class="reference internal" href="#project-file-reference"><span class="std std-ref">Project File Reference</span></a>.</p>
</dd>
<dt id="term-Project-import-closure">Project import closure</dt><dd><p>The <em>project import closure</em> for a given project <cite>proj</cite> is the set
of projects consisting of <cite>proj</cite> itself, together with each
project that is directly or indirectly imported by <cite>proj</cite>.
The import may be from either a <code class="samp docutils literal notranslate"><span class="pre">with</span></code> or a <code class="samp docutils literal notranslate"><span class="pre">limited</span> <span class="pre">with</span></code>.
See <a class="reference internal" href="#project-import-closure"><span class="std std-ref">Project Import Closure</span></a>.</p>
</dd>
<dt id="term-Scenario">Scenario</dt><dd><p>The values of a project’s variables and attributes, as determined by
the settings of external variables referenced by a project. A scenario
typically defines a particular mode of usage for the project.
See <a class="reference internal" href="#scenarios-in-projects"><span class="std std-ref">Scenarios in Projects</span></a>.</p>
</dd>
<dt id="term-Scenario-variable">Scenario variable</dt><dd><p>An external variable, typically assigned to a typed variable and queried in
a <cite>case construction</cite>. See <a class="reference internal" href="#scenario-variable"><span class="std std-ref">Scenario variable</span></a>.</p>
</dd>
<dt id="term-Standard-project">Standard project</dt><dd><p>A non-library project with source files. See <a class="reference internal" href="#standard-project"><span class="std std-ref">Standard project</span></a></p>
</dd>
<dt id="term-Typed-variable">Typed variable</dt><dd><p>A project variable that can take any of a specified set of values, analogous
to a variable of an Ada enumeration type but where the values are string literals.
See <a class="reference internal" href="#scenarios-in-projects"><span class="std std-ref">Scenarios in Projects</span></a>.</p>
</dd>
</dl>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../gprbuild_ug.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">2. GNAT Project Manager</a><ul>
<li><a class="reference internal" href="#introduction">2.1. Introduction</a></li>
<li><a class="reference internal" href="#building-with-projects">2.2. Building with Projects</a><ul>
<li><a class="reference internal" href="#source-files-and-directories">2.2.1. Source Files and Directories</a></li>
<li><a class="reference internal" href="#duplicate-sources-in-projects">2.2.2. Duplicate Sources in Projects</a></li>
<li><a class="reference internal" href="#object-and-exec-directory">2.2.3. Object and Exec Directory</a></li>
<li><a class="reference internal" href="#main-subprograms">2.2.4. Main Subprograms</a></li>
<li><a class="reference internal" href="#tools-options-in-project-files">2.2.5. Tools Options in Project Files</a></li>
<li><a class="reference internal" href="#compiling-with-project-files">2.2.6. Compiling with Project Files</a></li>
<li><a class="reference internal" href="#executable-file-names">2.2.7. Executable File Names</a></li>
<li><a class="reference internal" href="#using-variables-to-avoid-duplication">2.2.8. Using Variables to Avoid Duplication</a></li>
<li><a class="reference internal" href="#naming-schemes">2.2.9. Naming Schemes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#organizing-projects-into-subsystems">2.3. Organizing Projects into Subsystems</a><ul>
<li><a class="reference internal" href="#importing-projects">2.3.1. Importing Projects</a></li>
<li><a class="reference internal" href="#cyclic-project-dependencies">2.3.2. Cyclic Project Dependencies</a></li>
<li><a class="reference internal" href="#sharing-between-projects">2.3.3. Sharing between Projects</a></li>
<li><a class="reference internal" href="#global-attributes">2.3.4. Global Attributes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#scenarios-in-projects">2.4. Scenarios in Projects</a></li>
<li><a class="reference internal" href="#library-projects">2.5. Library Projects</a><ul>
<li><a class="reference internal" href="#building-libraries">2.5.1. Building Libraries</a></li>
<li><a class="reference internal" href="#using-library-projects">2.5.2. Using Library Projects</a></li>
<li><a class="reference internal" href="#stand-alone-library-projects">2.5.3. Stand-alone Library Projects</a></li>
<li><a class="reference internal" href="#installing-a-library-with-project-files">2.5.4. Installing a Library with Project Files</a></li>
</ul>
</li>
<li><a class="reference internal" href="#project-extension">2.6. Project Extension</a><ul>
<li><a class="reference internal" href="#importing-and-project-extension">2.6.1. Importing and Project Extension</a></li>
</ul>
</li>
<li><a class="reference internal" href="#child-projects">2.7. Child Projects</a></li>
<li><a class="reference internal" href="#aggregate-projects">2.8. Aggregate Projects</a><ul>
<li><a class="reference internal" href="#building-all-main-programs-from-a-single-project-closure">2.8.1. Building all main programs from a single project closure</a></li>
<li><a class="reference internal" href="#building-a-set-of-projects-with-a-single-command">2.8.2. Building a set of projects with a single command</a></li>
<li><a class="reference internal" href="#defining-a-build-environment">2.8.3. Defining a build environment</a></li>
<li><a class="reference internal" href="#improving-builder-performance">2.8.4. Improving builder performance</a></li>
<li><a class="reference internal" href="#syntax-of-aggregate-projects">2.8.5. Syntax of aggregate projects</a></li>
<li><a class="reference internal" href="#package-builder-in-aggregate-projects">2.8.6. package Builder in aggregate projects</a></li>
</ul>
</li>
<li><a class="reference internal" href="#aggregate-library-projects">2.9. Aggregate Library Projects</a><ul>
<li><a class="reference internal" href="#building-aggregate-library-projects">2.9.1. Building aggregate library projects</a></li>
<li><a class="reference internal" href="#syntax-of-aggregate-library-projects">2.9.2. Syntax of aggregate library projects</a></li>
</ul>
</li>
<li><a class="reference internal" href="#project-file-reference">2.10. Project File Reference</a><ul>
<li><a class="reference internal" href="#project-declaration">2.10.1. Project Declaration</a></li>
<li><a class="reference internal" href="#qualified-projects">2.10.2. Qualified Projects</a></li>
<li><a class="reference internal" href="#declarations">2.10.3. Declarations</a></li>
<li><a class="reference internal" href="#packages">2.10.4. Packages</a></li>
<li><a class="reference internal" href="#expressions">2.10.5. Expressions</a></li>
<li><a class="reference internal" href="#built-in-functions">2.10.6. Built-in Functions</a><ul>
<li><a class="reference internal" href="#the-function-external">2.10.6.1. The function <code class="docutils literal notranslate"><span class="pre">external</span></code></a></li>
<li><a class="reference internal" href="#the-function-external-as-list">2.10.6.2. The function <code class="docutils literal notranslate"><span class="pre">external_as_list</span></code></a></li>
<li><a class="reference internal" href="#split">2.10.6.3. Split</a></li>
</ul>
</li>
<li><a class="reference internal" href="#typed-string-declaration">2.10.7. Typed String Declaration</a></li>
<li><a class="reference internal" href="#variables">2.10.8. Variables</a></li>
<li><a class="reference internal" href="#case-constructions">2.10.9. Case Constructions</a></li>
<li><a class="reference internal" href="#attributes">2.10.10. Attributes</a><ul>
<li><a class="reference internal" href="#project-level-attributes">2.10.10.1. Project Level Attributes</a></li>
<li><a class="reference internal" href="#package-binder-attributes">2.10.10.2. Package Binder Attributes</a></li>
<li><a class="reference internal" href="#package-builder-attributes">2.10.10.3. Package Builder Attributes</a></li>
<li><a class="reference internal" href="#package-check-attributes">2.10.10.4. Package Check Attributes</a></li>
<li><a class="reference internal" href="#package-clean-attributes">2.10.10.5. Package Clean Attributes</a></li>
<li><a class="reference internal" href="#package-compiler-attributes">2.10.10.6. Package Compiler Attributes</a></li>
<li><a class="reference internal" href="#package-cross-reference-attributes">2.10.10.7. Package Cross_Reference Attributes</a></li>
<li><a class="reference internal" href="#package-documentation-attributes">2.10.10.8. Package Documentation Attributes</a></li>
<li><a class="reference internal" href="#package-eliminate-attributes">2.10.10.9. Package Eliminate Attributes</a></li>
<li><a class="reference internal" href="#package-finder-attributes">2.10.10.10. Package Finder Attributes</a></li>
<li><a class="reference internal" href="#package-gnatls-attributes">2.10.10.11. Package Gnatls Attributes</a></li>
<li><a class="reference internal" href="#package-gnatstub-attributes">2.10.10.12. Package gnatstub Attributes</a></li>
<li><a class="reference internal" href="#package-ide-attributes">2.10.10.13. Package IDE Attributes</a></li>
<li><a class="reference internal" href="#package-install-attributes">2.10.10.14. Package Install Attributes</a></li>
<li><a class="reference internal" href="#package-linker-attributes">2.10.10.15. Package Linker Attributes</a></li>
<li><a class="reference internal" href="#package-metrics-attribute">2.10.10.16. Package Metrics Attribute</a></li>
<li><a class="reference internal" href="#package-naming-attributes">2.10.10.17. Package Naming Attributes</a></li>
<li><a class="reference internal" href="#package-pretty-printer-attributes">2.10.10.18. Package Pretty_Printer Attributes</a></li>
<li><a class="reference internal" href="#package-remote-attributes">2.10.10.19. Package Remote Attributes</a></li>
<li><a class="reference internal" href="#package-stack-attributes">2.10.10.20. Package Stack Attributes</a></li>
<li><a class="reference internal" href="#package-synchronize-attributes">2.10.10.21. Package Synchronize Attributes</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#glossary">2.11. Glossary</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="introduction.html"
                        title="previous chapter"><span class="section-number">1. </span>Introduction</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="building_with_gprbuild.html"
                        title="next chapter"><span class="section-number">3. </span>Building with GPRbuild</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/gprbuild_ug/gnat_project_manager.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="building_with_gprbuild.html" title="3. Building with GPRbuild"
             >next</a> |</li>
        <li class="right" >
          <a href="introduction.html" title="1. Introduction"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../gprbuild_ug.html">GPR Tools User&#39;s Guide 2021 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">2. </span>GNAT Project Manager</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2008-2021, Free Software Foundation.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.2.1.
    </div>
  </body>
</html>