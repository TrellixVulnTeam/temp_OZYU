
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>15. Implementation of Specific Ada Features &#8212; GNAT Reference Manual 2021 documentation</title>
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="16. Implementation of Ada 2012 Features" href="implementation_of_ada_2012_features.html" />
    <link rel="prev" title="14. Specialized Needs Annexes" href="specialized_needs_annexes.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="implementation_of_ada_2012_features.html" title="16. Implementation of Ada 2012 Features"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="specialized_needs_annexes.html" title="14. Specialized Needs Annexes"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../gnat_rm.html">GNAT Reference Manual 2021 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">15. </span>Implementation of Specific Ada Features</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="implementation-of-specific-ada-features">
<span id="id1"></span><h1><span class="section-number">15. </span>Implementation of Specific Ada Features<a class="headerlink" href="#implementation-of-specific-ada-features" title="Permalink to this headline">¶</a></h1>
<p>This chapter describes the GNAT implementation of several Ada language
facilities.</p>
<div class="section" id="machine-code-insertions">
<span id="id2"></span><h2><span class="section-number">15.1. </span>Machine Code Insertions<a class="headerlink" href="#machine-code-insertions" title="Permalink to this headline">¶</a></h2>
<p id="index-0">Package <code class="docutils literal notranslate"><span class="pre">Machine_Code</span></code> provides machine code support as described
in the Ada Reference Manual in two separate forms:</p>
<ul class="simple">
<li><p>Machine code statements, consisting of qualified expressions that
fit the requirements of RM section 13.8.</p></li>
<li><p>An intrinsic callable procedure, providing an alternative mechanism of
including machine instructions in a subprogram.</p></li>
</ul>
<p>The two features are similar, and both are closely related to the mechanism
provided by the asm instruction in the GNU C compiler.  Full understanding
and use of the facilities in this package requires understanding the asm
instruction, see the section on Extended Asm in
<cite>Using_the_GNU_Compiler_Collection_(GCC)</cite>.</p>
<p>Calls to the function <code class="docutils literal notranslate"><span class="pre">Asm</span></code> and the procedure <code class="docutils literal notranslate"><span class="pre">Asm</span></code> have identical
semantic restrictions and effects as described below.  Both are provided so
that the procedure call can be used as a statement, and the function call
can be used to form a code_statement.</p>
<p>Consider this C <code class="docutils literal notranslate"><span class="pre">asm</span></code> instruction:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">asm</span> <span class="p">(</span><span class="s2">&quot;fsinx %1 %0&quot;</span> <span class="p">:</span> <span class="s2">&quot;=f&quot;</span> <span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="p">:</span> <span class="s2">&quot;f&quot;</span> <span class="p">(</span><span class="n">angle</span><span class="p">));</span>
</pre></div>
</div>
<p>The equivalent can be written for GNAT as:</p>
<div class="highlight-ada notranslate"><div class="highlight"><pre><span></span><span class="n">Asm</span> <span class="o">(</span><span class="s">&quot;fsinx %1 %0&quot;</span><span class="p">,</span>
     <span class="n">My_Float</span><span class="na">&#39;Asm_Output</span> <span class="o">(</span><span class="s">&quot;=f&quot;</span><span class="p">,</span> <span class="n">result</span><span class="o">)</span><span class="p">,</span>
     <span class="n">My_Float</span><span class="na">&#39;Asm_Input</span>  <span class="o">(</span><span class="s">&quot;f&quot;</span><span class="p">,</span>  <span class="n">angle</span><span class="o">))</span><span class="p">;</span>
</pre></div>
</div>
<p>The first argument to <code class="docutils literal notranslate"><span class="pre">Asm</span></code> is the assembler template, and is
identical to what is used in GNU C.  This string must be a static
expression.  The second argument is the output operand list.  It is
either a single <code class="docutils literal notranslate"><span class="pre">Asm_Output</span></code> attribute reference, or a list of such
references enclosed in parentheses (technically an array aggregate of
such references).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Asm_Output</span></code> attribute denotes a function that takes two
parameters.  The first is a string, the second is the name of a variable
of the type designated by the attribute prefix.  The first (string)
argument is required to be a static expression and designates the
constraint (see the section on Constraints in
<cite>Using_the_GNU_Compiler_Collection_(GCC)</cite>)
for the parameter; e.g., what kind of register is required.  The second
argument is the variable to be written or updated with the
result.  The possible values for constraint are the same as those used in
the RTL, and are dependent on the configuration file used to build the
GCC back end.  If there are no output operands, then this argument may
either be omitted, or explicitly given as <code class="docutils literal notranslate"><span class="pre">No_Output_Operands</span></code>.
No support is provided for GNU C’s symbolic names for output parameters.</p>
<p>The second argument of <code class="docutils literal notranslate"><span class="pre">my_float'Asm_Output</span></code> functions as
though it were an <code class="docutils literal notranslate"><span class="pre">out</span></code> parameter, which is a little curious, but
all names have the form of expressions, so there is no syntactic
irregularity, even though normally functions would not be permitted
<code class="docutils literal notranslate"><span class="pre">out</span></code> parameters.  The third argument is the list of input
operands.  It is either a single <code class="docutils literal notranslate"><span class="pre">Asm_Input</span></code> attribute reference, or
a list of such references enclosed in parentheses (technically an array
aggregate of such references).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Asm_Input</span></code> attribute denotes a function that takes two
parameters.  The first is a string, the second is an expression of the
type designated by the prefix.  The first (string) argument is required
to be a static expression, and is the constraint for the parameter,
(e.g., what kind of register is required).  The second argument is the
value to be used as the input argument.  The possible values for the
constraint are the same as those used in the RTL, and are dependent on
the configuration file used to built the GCC back end.
No support is provided for GNU C’s symbolic names for input parameters.</p>
<p>If there are no input operands, this argument may either be omitted, or
explicitly given as <code class="docutils literal notranslate"><span class="pre">No_Input_Operands</span></code>.  The fourth argument, not
present in the above example, is a list of register names, called the
<em>clobber</em> argument.  This argument, if given, must be a static string
expression, and is a space or comma separated list of names of registers
that must be considered destroyed as a result of the <code class="docutils literal notranslate"><span class="pre">Asm</span></code> call.  If
this argument is the null string (the default value), then the code
generator assumes that no additional registers are destroyed.
In addition to registers, the special clobbers <code class="docutils literal notranslate"><span class="pre">memory</span></code> and
<code class="docutils literal notranslate"><span class="pre">cc</span></code> as described in the GNU C docs are both supported.</p>
<p>The fifth argument, not present in the above example, called the
<em>volatile</em> argument, is by default <code class="docutils literal notranslate"><span class="pre">False</span></code>.  It can be set to
the literal value <code class="docutils literal notranslate"><span class="pre">True</span></code> to indicate to the code generator that all
optimizations with respect to the instruction specified should be
suppressed, and in particular an instruction that has outputs
will still be generated, even if none of the outputs are
used.  See <cite>Using_the_GNU_Compiler_Collection_(GCC)</cite>
for the full description.
Generally it is strongly advisable to use Volatile for any ASM statement
that is missing either input or output operands or to avoid unwanted
optimizations. A warning is generated if this advice is not followed.</p>
<p>No support is provided for GNU C’s <code class="docutils literal notranslate"><span class="pre">asm</span> <span class="pre">goto</span></code> feature.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Asm</span></code> subprograms may be used in two ways.  First the procedure
forms can be used anywhere a procedure call would be valid, and
correspond to what the RM calls ‘intrinsic’ routines.  Such calls can
be used to intersperse machine instructions with other Ada statements.
Second, the function forms, which return a dummy value of the limited
private type <code class="docutils literal notranslate"><span class="pre">Asm_Insn</span></code>, can be used in code statements, and indeed
this is the only context where such calls are allowed.  Code statements
appear as aggregates of the form:</p>
<div class="highlight-ada notranslate"><div class="highlight"><pre><span></span><span class="n">Asm_Insn</span><span class="o">&#39;(</span><span class="n">Asm</span> <span class="o">(...))</span><span class="p">;</span>
<span class="n">Asm_Insn</span><span class="o">&#39;(</span><span class="n">Asm_Volatile</span> <span class="o">(...))</span><span class="p">;</span>
</pre></div>
</div>
<p>In accordance with RM rules, such code statements are allowed only
within subprograms whose entire body consists of such statements.  It is
not permissible to intermix such statements with other Ada statements.</p>
<p>Typically the form using intrinsic procedure calls is more convenient
and more flexible.  The code statement form is provided to meet the RM
suggestion that such a facility should be made available.  The following
is the exact syntax of the call to <code class="docutils literal notranslate"><span class="pre">Asm</span></code>. As usual, if named notation
is used, the arguments may be given in arbitrary order, following the
normal rules for use of positional and named arguments:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ASM_CALL</span> <span class="p">:</span><span class="o">:=</span> <span class="n">Asm</span> <span class="p">(</span>
                 <span class="p">[</span><span class="n">Template</span> <span class="o">=&gt;</span><span class="p">]</span> <span class="n">static_string_EXPRESSION</span>
               <span class="p">[,[</span><span class="n">Outputs</span>  <span class="o">=&gt;</span><span class="p">]</span> <span class="n">OUTPUT_OPERAND_LIST</span>      <span class="p">]</span>
               <span class="p">[,[</span><span class="n">Inputs</span>   <span class="o">=&gt;</span><span class="p">]</span> <span class="n">INPUT_OPERAND_LIST</span>       <span class="p">]</span>
               <span class="p">[,[</span><span class="n">Clobber</span>  <span class="o">=&gt;</span><span class="p">]</span> <span class="n">static_string_EXPRESSION</span> <span class="p">]</span>
               <span class="p">[,[</span><span class="n">Volatile</span> <span class="o">=&gt;</span><span class="p">]</span> <span class="n">static_boolean_EXPRESSION</span><span class="p">]</span> <span class="p">)</span>

<span class="n">OUTPUT_OPERAND_LIST</span> <span class="p">:</span><span class="o">:=</span>
  <span class="p">[</span><span class="n">PREFIX</span><span class="o">.</span><span class="p">]</span><span class="n">No_Output_Operands</span>
<span class="o">|</span> <span class="n">OUTPUT_OPERAND_ATTRIBUTE</span>
<span class="o">|</span> <span class="p">(</span><span class="n">OUTPUT_OPERAND_ATTRIBUTE</span> <span class="p">{,</span><span class="n">OUTPUT_OPERAND_ATTRIBUTE</span><span class="p">})</span>

<span class="n">OUTPUT_OPERAND_ATTRIBUTE</span> <span class="p">:</span><span class="o">:=</span>
  <span class="n">SUBTYPE_MARK</span><span class="s1">&#39;Asm_Output (static_string_EXPRESSION, NAME)</span>

<span class="n">INPUT_OPERAND_LIST</span> <span class="p">:</span><span class="o">:=</span>
  <span class="p">[</span><span class="n">PREFIX</span><span class="o">.</span><span class="p">]</span><span class="n">No_Input_Operands</span>
<span class="o">|</span> <span class="n">INPUT_OPERAND_ATTRIBUTE</span>
<span class="o">|</span> <span class="p">(</span><span class="n">INPUT_OPERAND_ATTRIBUTE</span> <span class="p">{,</span><span class="n">INPUT_OPERAND_ATTRIBUTE</span><span class="p">})</span>

<span class="n">INPUT_OPERAND_ATTRIBUTE</span> <span class="p">:</span><span class="o">:=</span>
  <span class="n">SUBTYPE_MARK</span><span class="s1">&#39;Asm_Input (static_string_EXPRESSION, EXPRESSION)</span>
</pre></div>
</div>
<p>The identifiers <code class="docutils literal notranslate"><span class="pre">No_Input_Operands</span></code> and <code class="docutils literal notranslate"><span class="pre">No_Output_Operands</span></code>
are declared in the package <code class="docutils literal notranslate"><span class="pre">Machine_Code</span></code> and must be referenced
according to normal visibility rules. In particular if there is no
<code class="docutils literal notranslate"><span class="pre">use</span></code> clause for this package, then appropriate package name
qualification is required.</p>
</div>
<div class="section" id="gnat-implementation-of-tasking">
<span id="id3"></span><h2><span class="section-number">15.2. </span>GNAT Implementation of Tasking<a class="headerlink" href="#gnat-implementation-of-tasking" title="Permalink to this headline">¶</a></h2>
<p>This chapter outlines the basic GNAT approach to tasking (in particular,
a multi-layered library for portability) and discusses issues related
to compliance with the Real-Time Systems Annex.</p>
<div class="section" id="mapping-ada-tasks-onto-the-underlying-kernel-threads">
<span id="id4"></span><h3><span class="section-number">15.2.1. </span>Mapping Ada Tasks onto the Underlying Kernel Threads<a class="headerlink" href="#mapping-ada-tasks-onto-the-underlying-kernel-threads" title="Permalink to this headline">¶</a></h3>
<p>GNAT’s run-time support comprises two layers:</p>
<ul class="simple">
<li><p>GNARL (GNAT Run-time Layer)</p></li>
<li><p>GNULL (GNAT Low-level Library)</p></li>
</ul>
<p>In GNAT, Ada’s tasking services rely on a platform and OS independent
layer known as GNARL.  This code is responsible for implementing the
correct semantics of Ada’s task creation, rendezvous, protected
operations etc.</p>
<p>GNARL decomposes Ada’s tasking semantics into simpler lower level
operations such as create a thread, set the priority of a thread,
yield, create a lock, lock/unlock, etc.  The spec for these low-level
operations constitutes GNULLI, the GNULL Interface.  This interface is
directly inspired from the POSIX real-time API.</p>
<p>If the underlying executive or OS implements the POSIX standard
faithfully, the GNULL Interface maps as is to the services offered by
the underlying kernel.  Otherwise, some target dependent glue code maps
the services offered by the underlying kernel to the semantics expected
by GNARL.</p>
<p>Whatever the underlying OS (VxWorks, UNIX, Windows, etc.) the
key point is that each Ada task is mapped on a thread in the underlying
kernel.  For example, in the case of VxWorks, one Ada task = one VxWorks task.</p>
<p>In addition Ada task priorities map onto the underlying thread priorities.
Mapping Ada tasks onto the underlying kernel threads has several advantages:</p>
<ul class="simple">
<li><p>The underlying scheduler is used to schedule the Ada tasks.  This
makes Ada tasks as efficient as kernel threads from a scheduling
standpoint.</p></li>
<li><p>Interaction with code written in C containing threads is eased
since at the lowest level Ada tasks and C threads map onto the same
underlying kernel concept.</p></li>
<li><p>When an Ada task is blocked during I/O the remaining Ada tasks are
able to proceed.</p></li>
<li><p>On multiprocessor systems Ada tasks can execute in parallel.</p></li>
</ul>
<p>Some threads libraries offer a mechanism to fork a new process, with the
child process duplicating the threads from the parent.
GNAT does not
support this functionality when the parent contains more than one task.</p>
</div>
<div class="section" id="ensuring-compliance-with-the-real-time-annex">
<span id="index-1"></span><span id="id5"></span><h3><span class="section-number">15.2.2. </span>Ensuring Compliance with the Real-Time Annex<a class="headerlink" href="#ensuring-compliance-with-the-real-time-annex" title="Permalink to this headline">¶</a></h3>
<p id="index-2">Although mapping Ada tasks onto
the underlying threads has significant advantages, it does create some
complications when it comes to respecting the scheduling semantics
specified in the real-time annex (Annex D).</p>
<p>For instance the Annex D requirement for the <code class="docutils literal notranslate"><span class="pre">FIFO_Within_Priorities</span></code>
scheduling policy states:</p>
<blockquote>
<div><p><em>When the active priority of a ready task that is not running
changes, or the setting of its base priority takes effect, the
task is removed from the ready queue for its old active priority
and is added at the tail of the ready queue for its new active
priority, except in the case where the active priority is lowered
due to the loss of inherited priority, in which case the task is
added at the head of the ready queue for its new active priority.</em></p>
</div></blockquote>
<p>While most kernels do put tasks at the end of the priority queue when
a task changes its priority, (which respects the main
FIFO_Within_Priorities requirement), almost none keep a thread at the
beginning of its priority queue when its priority drops from the loss
of inherited priority.</p>
<p>As a result most vendors have provided incomplete Annex D implementations.</p>
<p>The GNAT run-time, has a nice cooperative solution to this problem
which ensures that accurate FIFO_Within_Priorities semantics are
respected.</p>
<p>The principle is as follows.  When an Ada task T is about to start
running, it checks whether some other Ada task R with the same
priority as T has been suspended due to the loss of priority
inheritance.  If this is the case, T yields and is placed at the end of
its priority queue.  When R arrives at the front of the queue it
executes.</p>
<p>Note that this simple scheme preserves the relative order of the tasks
that were ready to execute in the priority queue where R has been
placed at the end.</p>
</div>
<div class="section" id="support-for-locking-policies">
<h3><span class="section-number">15.2.3. </span>Support for Locking Policies<a class="headerlink" href="#support-for-locking-policies" title="Permalink to this headline">¶</a></h3>
<p>This section specifies which policies specified by pragma Locking_Policy
are supported on which platforms.</p>
<p>GNAT supports the standard <code class="docutils literal notranslate"><span class="pre">Ceiling_Locking</span></code> policy, and the
implementation defined <code class="docutils literal notranslate"><span class="pre">Inheritance_Locking</span></code> and
<code class="docutils literal notranslate"><span class="pre">Concurrent_Readers_Locking</span></code> policies.</p>
<p><code class="docutils literal notranslate"><span class="pre">Ceiling_Locking</span></code> is supported on all platforms if the operating system
supports it. In particular, <code class="docutils literal notranslate"><span class="pre">Ceiling_Locking</span></code> is not supported on
VxWorks.
<code class="docutils literal notranslate"><span class="pre">Inheritance_Locking</span></code> is supported on
Linux,
Darwin (Mac OS X),
LynxOS 178,
and VxWorks.
<code class="docutils literal notranslate"><span class="pre">Concurrent_Readers_Locking</span></code> is supported on Linux.</p>
<p>Notes about <code class="docutils literal notranslate"><span class="pre">Ceiling_Locking</span></code> on Linux:
If the process is running as ‘root’, ceiling locking is used.
If the capabilities facility is installed
(“sudo apt-get –assume-yes install libcap-dev” on Ubuntu,
for example),
and the program is linked against that library
(“-largs -lcap”),
and the executable file has the cap_sys_nice capability
(“sudo /sbin/setcap cap_sys_nice=ep executable_file_name”),
then ceiling locking is used.
Otherwise, the <code class="docutils literal notranslate"><span class="pre">Ceiling_Locking</span></code> policy is ignored.</p>
</div>
</div>
<div class="section" id="gnat-implementation-of-shared-passive-packages">
<span id="id6"></span><h2><span class="section-number">15.3. </span>GNAT Implementation of Shared Passive Packages<a class="headerlink" href="#gnat-implementation-of-shared-passive-packages" title="Permalink to this headline">¶</a></h2>
<p id="index-3">GNAT fully implements the <span class="target" id="index-4"></span>pragma
<code class="docutils literal notranslate"><span class="pre">Shared_Passive</span></code> for
the purpose of designating shared passive packages.
This allows the use of passive partitions in the
context described in the Ada Reference Manual; i.e., for communication
between separate partitions of a distributed application using the
features in Annex E.</p>
<span class="target" id="index-5"></span><p id="index-6">However, the implementation approach used by GNAT provides for more
extensive usage as follows:</p>
<dl class="simple">
<dt><em>Communication between separate programs</em></dt><dd><p>This allows separate programs to access the data in passive
partitions, using protected objects for synchronization where
needed. The only requirement is that the two programs have a
common shared file system. It is even possible for programs
running on different machines with different architectures
(e.g., different endianness) to communicate via the data in
a passive partition.</p>
</dd>
<dt><em>Persistence between program runs</em></dt><dd><p>The data in a passive package can persist from one run of a
program to another, so that a later program sees the final
values stored by a previous run of the same program.</p>
</dd>
</dl>
<p>The implementation approach used is to store the data in files. A
separate stream file is created for each object in the package, and
an access to an object causes the corresponding file to be read or
written.</p>
<p id="index-7">The environment variable <code class="docutils literal notranslate"><span class="pre">SHARED_MEMORY_DIRECTORY</span></code> should be
set to the directory to be used for these files.
The files in this directory
have names that correspond to their fully qualified names. For
example, if we have the package</p>
<div class="highlight-ada notranslate"><div class="highlight"><pre><span></span><span class="k">package </span><span class="nf">X</span> <span class="kr">is</span><span class="p"></span>
  <span class="kr">pragma</span><span class="p"> </span><span class="n">Shared_Passive</span> <span class="o">(</span><span class="n">X</span><span class="o">)</span><span class="p">;</span>
  <span class="n">Y</span> <span class="o">:</span> <span class="n">Integer</span><span class="p">;</span>
  <span class="n">Z</span> <span class="o">:</span> <span class="n">Float</span><span class="p">;</span>
<span class="k">end </span><span class="nf">X</span><span class="p">;</span>
</pre></div>
</div>
<p>and the environment variable is set to <code class="docutils literal notranslate"><span class="pre">/stemp/</span></code>, then the files created
will have the names:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">stemp</span><span class="o">/</span><span class="n">x</span><span class="o">.</span><span class="n">y</span>
<span class="o">/</span><span class="n">stemp</span><span class="o">/</span><span class="n">x</span><span class="o">.</span><span class="n">z</span>
</pre></div>
</div>
<p>These files are created when a value is initially written to the object, and
the files are retained until manually deleted. This provides the persistence
semantics. If no file exists, it means that no partition has assigned a value
to the variable; in this case the initial value declared in the package
will be used. This model ensures that there are no issues in synchronizing
the elaboration process, since elaboration of passive packages elaborates the
initial values, but does not create the files.</p>
<p>The files are written using normal <code class="docutils literal notranslate"><span class="pre">Stream_IO</span></code> access.
If you want to be able
to communicate between programs or partitions running on different
architectures, then you should use the XDR versions of the stream attribute
routines, since these are architecture independent.</p>
<p>If active synchronization is required for access to the variables in the
shared passive package, then as described in the Ada Reference Manual, the
package may contain protected objects used for this purpose. In this case
a lock file (whose name is <code class="file docutils literal notranslate"><span class="pre">___lock</span></code> (three underscores)
is created in the shared memory directory.</p>
<p id="index-8">This is used to provide the required locking
semantics for proper protected object synchronization.</p>
</div>
<div class="section" id="code-generation-for-array-aggregates">
<span id="id7"></span><h2><span class="section-number">15.4. </span>Code Generation for Array Aggregates<a class="headerlink" href="#code-generation-for-array-aggregates" title="Permalink to this headline">¶</a></h2>
<p>Aggregates have a rich syntax and allow the user to specify the values of
complex data structures by means of a single construct.  As a result, the
code generated for aggregates can be quite complex and involve loops, case
statements and multiple assignments.  In the simplest cases, however, the
compiler will recognize aggregates whose components and constraints are
fully static, and in those cases the compiler will generate little or no
executable code.  The following is an outline of the code that GNAT generates
for various aggregate constructs.  For further details, you will find it
useful to examine the output produced by the -gnatG flag to see the expanded
source that is input to the code generator.  You may also want to examine
the assembly code generated at various levels of optimization.</p>
<p>The code generated for aggregates depends on the context, the component values,
and the type.  In the context of an object declaration the code generated is
generally simpler than in the case of an assignment.  As a general rule, static
component values and static subtypes also lead to simpler code.</p>
<div class="section" id="static-constant-aggregates-with-static-bounds">
<span id="id8"></span><h3><span class="section-number">15.4.1. </span>Static constant aggregates with static bounds<a class="headerlink" href="#static-constant-aggregates-with-static-bounds" title="Permalink to this headline">¶</a></h3>
<p>For the declarations:</p>
<div class="highlight-ada notranslate"><div class="highlight"><pre><span></span><span class="kr">type</span><span class="p"> </span><span class="n">One_Dim</span> <span class="kr">is</span><span class="p"> </span><span class="kr">array</span><span class="p"> </span><span class="o">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">10</span><span class="o">)</span> <span class="kr">of</span><span class="p"> </span><span class="n">integer</span><span class="p">;</span>
<span class="n">ar0</span> <span class="o">:</span> <span class="kr">constant</span><span class="p"> </span><span class="n">One_Dim</span> <span class="o">:=</span> <span class="o">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="o">)</span><span class="p">;</span>
</pre></div>
</div>
<p>GNAT generates no executable code: the constant ar0 is placed in static memory.
The same is true for constant aggregates with named associations:</p>
<div class="highlight-ada notranslate"><div class="highlight"><pre><span></span><span class="n">Cr1</span> <span class="o">:</span> <span class="kr">constant</span><span class="p"> </span><span class="n">One_Dim</span> <span class="o">:=</span> <span class="o">(</span><span class="mi">4</span> <span class="o">=&gt;</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">2</span> <span class="o">=&gt;</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span> <span class="o">=&gt;</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">1</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span> <span class="o">..</span> <span class="mi">10</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="o">)</span><span class="p">;</span>
<span class="n">Cr3</span> <span class="o">:</span> <span class="kr">constant</span><span class="p"> </span><span class="n">One_Dim</span> <span class="o">:=</span> <span class="o">(</span><span class="kr">others</span><span class="p"> </span><span class="o">=&gt;</span> <span class="mi">7777</span><span class="o">)</span><span class="p">;</span>
</pre></div>
</div>
<p>The same is true for multidimensional constant arrays such as:</p>
<div class="highlight-ada notranslate"><div class="highlight"><pre><span></span><span class="kr">type</span><span class="p"> </span><span class="n">two_dim</span> <span class="kr">is</span><span class="p"> </span><span class="kr">array</span><span class="p"> </span><span class="o">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="o">..</span><span class="mi">3</span><span class="o">)</span> <span class="kr">of</span><span class="p"> </span><span class="n">integer</span><span class="p">;</span>
<span class="n">Unit</span> <span class="o">:</span> <span class="kr">constant</span><span class="p"> </span><span class="n">two_dim</span> <span class="o">:=</span> <span class="o">(</span> <span class="o">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="o">)</span><span class="p">,</span> <span class="o">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="o">)</span><span class="p">,</span> <span class="o">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="o">))</span><span class="p">;</span>
</pre></div>
</div>
<p>The same is true for arrays of one-dimensional arrays: the following are
static:</p>
<div class="highlight-ada notranslate"><div class="highlight"><pre><span></span><span class="kr">type</span><span class="p"> </span><span class="n">ar1b</span>  <span class="kr">is</span><span class="p"> </span><span class="kr">array</span><span class="p"> </span><span class="o">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">3</span><span class="o">)</span> <span class="kr">of</span><span class="p"> </span><span class="n">boolean</span><span class="p">;</span>
<span class="kr">type</span><span class="p"> </span><span class="n">ar_ar</span> <span class="kr">is</span><span class="p"> </span><span class="kr">array</span><span class="p"> </span><span class="o">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">3</span><span class="o">)</span> <span class="kr">of</span><span class="p"> </span><span class="n">ar1b</span><span class="p">;</span>
<span class="n">None</span>  <span class="o">:</span> <span class="kr">constant</span><span class="p"> </span><span class="n">ar1b</span> <span class="o">:=</span> <span class="o">(</span><span class="kr">others</span><span class="p"> </span><span class="o">=&gt;</span> <span class="kc">false</span><span class="o">)</span><span class="p">;</span>     <span class="c">--  fully static</span>
<span class="n">None2</span> <span class="o">:</span> <span class="kr">constant</span><span class="p"> </span><span class="n">ar_ar</span> <span class="o">:=</span> <span class="o">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">3</span> <span class="o">=&gt;</span> <span class="n">None</span><span class="o">)</span><span class="p">;</span>       <span class="c">--  fully static</span>
</pre></div>
</div>
<p>However, for multidimensional aggregates with named associations, GNAT will
generate assignments and loops, even if all associations are static.  The
following two declarations generate a loop for the first dimension, and
individual component assignments for the second dimension:</p>
<div class="highlight-ada notranslate"><div class="highlight"><pre><span></span><span class="n">Zero1</span><span class="o">:</span> <span class="kr">constant</span><span class="p"> </span><span class="n">two_dim</span> <span class="o">:=</span> <span class="o">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">3</span> <span class="o">=&gt;</span> <span class="o">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">3</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="o">))</span><span class="p">;</span>
<span class="n">Zero2</span><span class="o">:</span> <span class="kr">constant</span><span class="p"> </span><span class="n">two_dim</span> <span class="o">:=</span> <span class="o">(</span><span class="kr">others</span><span class="p"> </span><span class="o">=&gt;</span> <span class="o">(</span><span class="kr">others</span><span class="p"> </span><span class="o">=&gt;</span> <span class="mi">0</span><span class="o">))</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="constant-aggregates-with-unconstrained-nominal-types">
<span id="id9"></span><h3><span class="section-number">15.4.2. </span>Constant aggregates with unconstrained nominal types<a class="headerlink" href="#constant-aggregates-with-unconstrained-nominal-types" title="Permalink to this headline">¶</a></h3>
<p>In such cases the aggregate itself establishes the subtype, so that
associations with <code class="docutils literal notranslate"><span class="pre">others</span></code> cannot be used.  GNAT determines the
bounds for the actual subtype of the aggregate, and allocates the
aggregate statically as well.  No code is generated for the following:</p>
<div class="highlight-ada notranslate"><div class="highlight"><pre><span></span><span class="kr">type</span><span class="p"> </span><span class="n">One_Unc</span> <span class="kr">is</span><span class="p"> </span><span class="kr">array</span><span class="p"> </span><span class="o">(</span><span class="n">natural</span> <span class="kr">range</span><span class="p"> </span><span class="o">&lt;&gt;)</span> <span class="kr">of</span><span class="p"> </span><span class="n">integer</span><span class="p">;</span>
<span class="n">Cr_Unc</span> <span class="o">:</span> <span class="kr">constant</span><span class="p"> </span><span class="n">One_Unc</span> <span class="o">:=</span> <span class="o">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">24</span><span class="p">,</span><span class="mi">36</span><span class="o">)</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="aggregates-with-static-bounds">
<span id="id10"></span><h3><span class="section-number">15.4.3. </span>Aggregates with static bounds<a class="headerlink" href="#aggregates-with-static-bounds" title="Permalink to this headline">¶</a></h3>
<p>In all previous examples the aggregate was the initial (and immutable) value
of a constant.  If the aggregate initializes a variable, then code is generated
for it as a combination of individual assignments and loops over the target
object.  The declarations</p>
<div class="highlight-ada notranslate"><div class="highlight"><pre><span></span><span class="n">Cr_Var1</span> <span class="o">:</span> <span class="n">One_Dim</span> <span class="o">:=</span> <span class="o">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="o">)</span><span class="p">;</span>
<span class="n">Cr_Var2</span> <span class="o">:</span> <span class="n">One_Dim</span> <span class="o">:=</span> <span class="o">(</span><span class="kr">others</span><span class="p"> </span><span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span><span class="p">;</span>
</pre></div>
</div>
<p>generate the equivalent of</p>
<div class="highlight-ada notranslate"><div class="highlight"><pre><span></span><span class="n">Cr_Var1</span> <span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="mi">2</span><span class="p">;</span>
<span class="n">Cr_Var1</span> <span class="o">(</span><span class="mi">2</span><span class="o">)</span> <span class="o">:=</span> <span class="mi">3</span><span class="p">;</span>
<span class="n">Cr_Var1</span> <span class="o">(</span><span class="mi">3</span><span class="o">)</span> <span class="o">:=</span> <span class="mi">5</span><span class="p">;</span>
<span class="n">Cr_Var1</span> <span class="o">(</span><span class="mi">4</span><span class="o">)</span> <span class="o">:=</span> <span class="mi">11</span><span class="p">;</span>

<span class="kr">for</span><span class="p"> </span><span class="n">I</span> <span class="kr">in</span><span class="p"> </span><span class="n">Cr_Var2</span><span class="na">&#39;range</span> <span class="kr">loop</span><span class="p"></span>
   <span class="n">Cr_Var2</span> <span class="o">(</span><span class="n">I</span><span class="o">)</span> <span class="o">:=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="k">end loop</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="aggregates-with-nonstatic-bounds">
<span id="id11"></span><h3><span class="section-number">15.4.4. </span>Aggregates with nonstatic bounds<a class="headerlink" href="#aggregates-with-nonstatic-bounds" title="Permalink to this headline">¶</a></h3>
<p>If the bounds of the aggregate are not statically compatible with the bounds
of the nominal subtype  of the target, then constraint checks have to be
generated on the bounds.  For a multidimensional array, constraint checks may
have to be applied to sub-arrays individually, if they do not have statically
compatible subtypes.</p>
</div>
<div class="section" id="aggregates-in-assignment-statements">
<span id="id12"></span><h3><span class="section-number">15.4.5. </span>Aggregates in assignment statements<a class="headerlink" href="#aggregates-in-assignment-statements" title="Permalink to this headline">¶</a></h3>
<p>In general, aggregate assignment requires the construction of a temporary,
and a copy from the temporary to the target of the assignment.  This is because
it is not always possible to convert the assignment into a series of individual
component assignments.  For example, consider the simple case:</p>
<div class="highlight-ada notranslate"><div class="highlight"><pre><span></span><span class="n">A</span> <span class="o">:=</span> <span class="o">(</span><span class="n">A</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span><span class="p">,</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">))</span><span class="p">;</span>
</pre></div>
</div>
<p>This cannot be converted into:</p>
<div class="highlight-ada notranslate"><div class="highlight"><pre><span></span><span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="n">A</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span><span class="p">;</span>
<span class="n">A</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span> <span class="o">:=</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span><span class="p">;</span>
</pre></div>
</div>
<p>So the aggregate has to be built first in a separate location, and then
copied into the target.  GNAT recognizes simple cases where this intermediate
step is not required, and the assignments can be performed in place, directly
into the target.  The following sufficient criteria are applied:</p>
<ul class="simple">
<li><p>The bounds of the aggregate are static, and the associations are static.</p></li>
<li><p>The components of the aggregate are static constants, names of
simple variables that are not renamings, or expressions not involving
indexed components whose operands obey these rules.</p></li>
</ul>
<p>If any of these conditions are violated, the aggregate will be built in
a temporary (created either by the front-end or the code generator) and then
that temporary will be copied onto the target.</p>
</div>
</div>
<div class="section" id="the-size-of-discriminated-records-with-default-discriminants">
<span id="id13"></span><h2><span class="section-number">15.5. </span>The Size of Discriminated Records with Default Discriminants<a class="headerlink" href="#the-size-of-discriminated-records-with-default-discriminants" title="Permalink to this headline">¶</a></h2>
<p>If a discriminated type <code class="docutils literal notranslate"><span class="pre">T</span></code> has discriminants with default values, it is
possible to declare an object of this type without providing an explicit
constraint:</p>
<div class="highlight-ada notranslate"><div class="highlight"><pre><span></span><span class="kr">type</span><span class="p"> </span><span class="n">Size</span> <span class="kr">is</span><span class="p"> </span><span class="kr">range</span><span class="p"> </span><span class="mi">1</span><span class="o">..</span><span class="mi">100</span><span class="p">;</span>

<span class="kr">type</span><span class="p"> </span><span class="n">Rec</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Size</span> <span class="o">:=</span> <span class="mi">15</span><span class="o">)</span> <span class="kr">is</span><span class="p"> </span><span class="kr">record</span><span class="p"></span>
   <span class="n">Name</span> <span class="o">:</span> <span class="n">String</span> <span class="o">(</span><span class="mi">1</span><span class="o">..</span><span class="n">D</span><span class="o">)</span><span class="p">;</span>
<span class="k">end </span><span class="nf">T</span><span class="p">;</span>

<span class="n">Word</span> <span class="o">:</span> <span class="n">Rec</span><span class="p">;</span>
</pre></div>
</div>
<p>Such an object is said to be <em>unconstrained</em>.
The discriminant of the object
can be modified by a full assignment to the object, as long as it preserves the
relation between the value of the discriminant, and the value of the components
that depend on it:</p>
<div class="highlight-ada notranslate"><div class="highlight"><pre><span></span><span class="n">Word</span> <span class="o">:=</span> <span class="o">(</span><span class="mi">3</span><span class="p">,</span> <span class="s">&quot;yes&quot;</span><span class="o">)</span><span class="p">;</span>

<span class="n">Word</span> <span class="o">:=</span> <span class="o">(</span><span class="mi">5</span><span class="p">,</span> <span class="s">&quot;maybe&quot;</span><span class="o">)</span><span class="p">;</span>

<span class="n">Word</span> <span class="o">:=</span> <span class="o">(</span><span class="mi">5</span><span class="p">,</span> <span class="s">&quot;no&quot;</span><span class="o">)</span><span class="p">;</span> <span class="c">-- raises Constraint_Error</span>
</pre></div>
</div>
<p>In order to support this behavior efficiently, an unconstrained object is
given the maximum size that any value of the type requires. In the case
above, <code class="docutils literal notranslate"><span class="pre">Word</span></code> has storage for the discriminant and for
a <code class="docutils literal notranslate"><span class="pre">String</span></code> of length 100.
It is important to note that unconstrained objects do not require dynamic
allocation. It would be an improper implementation to place on the heap those
components whose size depends on discriminants. (This improper implementation
was used by some Ada83 compilers, where the <code class="docutils literal notranslate"><span class="pre">Name</span></code> component above
would have
been stored as a pointer to a dynamic string). Following the principle that
dynamic storage management should never be introduced implicitly,
an Ada compiler should reserve the full size for an unconstrained declared
object, and place it on the stack.</p>
<p>This maximum size approach
has been a source of surprise to some users, who expect the default
values of the discriminants to determine the size reserved for an
unconstrained object: “If the default is 15, why should the object occupy
a larger size?”
The answer, of course, is that the discriminant may be later modified,
and its full range of values must be taken into account. This is why the
declaration:</p>
<div class="highlight-ada notranslate"><div class="highlight"><pre><span></span><span class="kr">type</span><span class="p"> </span><span class="n">Rec</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Positive</span> <span class="o">:=</span> <span class="mi">15</span><span class="o">)</span> <span class="kr">is</span><span class="p"> </span><span class="kr">record</span><span class="p"></span>
   <span class="n">Name</span> <span class="o">:</span> <span class="n">String</span> <span class="o">(</span><span class="mi">1</span><span class="o">..</span><span class="n">D</span><span class="o">)</span><span class="p">;</span>
<span class="k">end record</span><span class="p">;</span>

<span class="n">Too_Large</span> <span class="o">:</span> <span class="n">Rec</span><span class="p">;</span>
</pre></div>
</div>
<p>is flagged by the compiler with a warning:
an attempt to create <code class="docutils literal notranslate"><span class="pre">Too_Large</span></code> will raise <code class="docutils literal notranslate"><span class="pre">Storage_Error</span></code>,
because the required size includes <code class="docutils literal notranslate"><span class="pre">Positive'Last</span></code>
bytes. As the first example indicates, the proper approach is to declare an
index type of ‘reasonable’ range so that unconstrained objects are not too
large.</p>
<p>One final wrinkle: if the object is declared to be <code class="docutils literal notranslate"><span class="pre">aliased</span></code>, or if it is
created in the heap by means of an allocator, then it is <em>not</em>
unconstrained:
it is constrained by the default values of the discriminants, and those values
cannot be modified by full assignment. This is because in the presence of
aliasing all views of the object (which may be manipulated by different tasks,
say) must be consistent, so it is imperative that the object, once created,
remain invariant.</p>
</div>
<div class="section" id="image-values-for-nonscalar-types">
<span id="id14"></span><h2><span class="section-number">15.6. </span>Image Values For Nonscalar Types<a class="headerlink" href="#image-values-for-nonscalar-types" title="Permalink to this headline">¶</a></h2>
<p>Ada 2022 defines the Image, Wide_Image, and Wide_Wide image attributes
for nonscalar types; earlier Ada versions defined these attributes only
for scalar types. Ada RM 4.10 provides some general guidance regarding
the default implementation of these attributes and the GNAT compiler
follows that guidance. However, beyond that the precise details of the
image text generated in these cases are deliberately not documented and are
subject to change. In particular, users should not rely on formatting details
(such as spaces or line breaking), record field order, image values for access
types, image values for types that have ancestor or subcomponent types
declared in non-Ada2022 code, image values for predefined types, or the
compiler’s choices regarding the implementation permissions described in
Ada RM 4.10. This list is not intended to be exhaustive. If more precise
control of image text is required for some type T, then T’Put_Image should be
explicitly specified.</p>
</div>
<div class="section" id="strict-conformance-to-the-ada-reference-manual">
<span id="id15"></span><h2><span class="section-number">15.7. </span>Strict Conformance to the Ada Reference Manual<a class="headerlink" href="#strict-conformance-to-the-ada-reference-manual" title="Permalink to this headline">¶</a></h2>
<p>The dynamic semantics defined by the Ada Reference Manual impose a set of
run-time checks to be generated. By default, the GNAT compiler will insert many
run-time checks into the compiled code, including most of those required by the
Ada Reference Manual. However, there are two checks that are not enabled in
the default mode for efficiency reasons: checks for access before elaboration
on subprogram calls, and stack overflow checking (most operating systems do not
perform this check by default).</p>
<p>Strict conformance to the Ada Reference Manual can be achieved by adding two
compiler options for dynamic checks for access-before-elaboration on subprogram
calls and generic instantiations (<em>-gnatE</em>), and stack overflow checking
(<em>-fstack-check</em>).</p>
<p>Note that the result of a floating point arithmetic operation in overflow and
invalid situations, when the <code class="docutils literal notranslate"><span class="pre">Machine_Overflows</span></code> attribute of the result
type is <code class="docutils literal notranslate"><span class="pre">False</span></code>, is to generate IEEE NaN and infinite values. This is the
case for machines compliant with the IEEE floating-point standard, but on
machines that are not fully compliant with this standard, such as Alpha, the
<em>-mieee</em> compiler flag must be used for achieving IEEE confirming
behavior (although at the cost of a significant performance penalty), so
infinite and NaN values are properly generated.</p>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../gnat_rm.html">
              <img class="logo" src="../_static/adacore_transparent.png" alt="Logo"/>
            </a></p>
  <h3><a href="../gnat_rm.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">15. Implementation of Specific Ada Features</a><ul>
<li><a class="reference internal" href="#machine-code-insertions">15.1. Machine Code Insertions</a></li>
<li><a class="reference internal" href="#gnat-implementation-of-tasking">15.2. GNAT Implementation of Tasking</a><ul>
<li><a class="reference internal" href="#mapping-ada-tasks-onto-the-underlying-kernel-threads">15.2.1. Mapping Ada Tasks onto the Underlying Kernel Threads</a></li>
<li><a class="reference internal" href="#ensuring-compliance-with-the-real-time-annex">15.2.2. Ensuring Compliance with the Real-Time Annex</a></li>
<li><a class="reference internal" href="#support-for-locking-policies">15.2.3. Support for Locking Policies</a></li>
</ul>
</li>
<li><a class="reference internal" href="#gnat-implementation-of-shared-passive-packages">15.3. GNAT Implementation of Shared Passive Packages</a></li>
<li><a class="reference internal" href="#code-generation-for-array-aggregates">15.4. Code Generation for Array Aggregates</a><ul>
<li><a class="reference internal" href="#static-constant-aggregates-with-static-bounds">15.4.1. Static constant aggregates with static bounds</a></li>
<li><a class="reference internal" href="#constant-aggregates-with-unconstrained-nominal-types">15.4.2. Constant aggregates with unconstrained nominal types</a></li>
<li><a class="reference internal" href="#aggregates-with-static-bounds">15.4.3. Aggregates with static bounds</a></li>
<li><a class="reference internal" href="#aggregates-with-nonstatic-bounds">15.4.4. Aggregates with nonstatic bounds</a></li>
<li><a class="reference internal" href="#aggregates-in-assignment-statements">15.4.5. Aggregates in assignment statements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-size-of-discriminated-records-with-default-discriminants">15.5. The Size of Discriminated Records with Default Discriminants</a></li>
<li><a class="reference internal" href="#image-values-for-nonscalar-types">15.6. Image Values For Nonscalar Types</a></li>
<li><a class="reference internal" href="#strict-conformance-to-the-ada-reference-manual">15.7. Strict Conformance to the Ada Reference Manual</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="specialized_needs_annexes.html"
                        title="previous chapter"><span class="section-number">14. </span>Specialized Needs Annexes</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="implementation_of_ada_2012_features.html"
                        title="next chapter"><span class="section-number">16. </span>Implementation of Ada 2012 Features</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/gnat_rm/implementation_of_specific_ada_features.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="implementation_of_ada_2012_features.html" title="16. Implementation of Ada 2012 Features"
             >next</a> |</li>
        <li class="right" >
          <a href="specialized_needs_annexes.html" title="14. Specialized Needs Annexes"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../gnat_rm.html">GNAT Reference Manual 2021 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">15. </span>Implementation of Specific Ada Features</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2008-2021, Free Software Foundation.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.2.1.
    </div>
  </body>
</html>