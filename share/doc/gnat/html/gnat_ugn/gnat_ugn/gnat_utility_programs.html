
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>5. GNAT Utility Programs &#8212; GNAT User&#39;s Guide for Native Platforms 2021 documentation</title>
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="6. GNAT and Program Execution" href="gnat_and_program_execution.html" />
    <link rel="prev" title="4. Building Executable Programs with GNAT" href="building_executable_programs_with_gnat.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="gnat_and_program_execution.html" title="6. GNAT and Program Execution"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="building_executable_programs_with_gnat.html" title="4. Building Executable Programs with GNAT"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../gnat_ugn.html">GNAT User&#39;s Guide for Native Platforms 2021 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">5. </span>GNAT Utility Programs</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="gnat-utility-programs">
<span id="id1"></span><h1><span class="section-number">5. </span>GNAT Utility Programs<a class="headerlink" href="#gnat-utility-programs" title="Permalink to this headline">¶</a></h1>
<p>This chapter describes a number of utility programs:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#the-file-cleanup-utility-gnatclean"><span class="std std-ref">The File Cleanup Utility gnatclean</span></a></p></li>
<li><p><a class="reference internal" href="#the-gnat-library-browser-gnatls"><span class="std std-ref">The GNAT Library Browser gnatls</span></a></p></li>
<li><p><a class="reference internal" href="#the-coding-standard-verifier-gnatcheck"><span class="std std-ref">The Coding Standard Verifier gnatcheck</span></a></p></li>
<li><p><a class="reference internal" href="#the-gnat-metrics-tool-gnatmetric"><span class="std std-ref">The GNAT Metrics Tool gnatmetric</span></a></p></li>
<li><p><a class="reference internal" href="#the-gnat-pretty-printer-gnatpp"><span class="std std-ref">The GNAT Pretty Printer gnatpp</span></a></p></li>
<li><p><a class="reference internal" href="#the-body-stub-generator-gnatstub"><span class="std std-ref">The Body Stub Generator gnatstub</span></a></p></li>
<li><p><a class="reference internal" href="#the-unit-test-generator-gnattest"><span class="std std-ref">The Unit Test Generator gnattest</span></a></p></li>
<li><p><a class="reference internal" href="#the-backtrace-symbolizer-gnatsymbolize"><span class="std std-ref">Translating Code Addresses into Source Locations with gnatsymbolize</span></a></p></li>
</ul>
<p>It also describes how several of these tools can be used in conjunction
with project files: <a class="reference internal" href="#using-project-files-with-gnat-tools"><span class="std std-ref">Using Project Files with GNAT Tools</span></a></p>
<p>Other GNAT utilities are described elsewhere in this manual:</p>
<ul class="simple">
<li><p><a class="reference internal" href="the_gnat_compilation_model.html#handling-arbitrary-file-naming-conventions-with-gnatname"><span class="std std-ref">Handling Arbitrary File Naming Conventions with gnatname</span></a></p></li>
<li><p><a class="reference internal" href="the_gnat_compilation_model.html#file-name-krunching-with-gnatkr"><span class="std std-ref">File Name Krunching with gnatkr</span></a></p></li>
<li><p><a class="reference internal" href="the_gnat_compilation_model.html#renaming-files-with-gnatchop"><span class="std std-ref">Renaming Files with gnatchop</span></a></p></li>
<li><p><a class="reference internal" href="the_gnat_compilation_model.html#preprocessing-with-gnatprep"><span class="std std-ref">Preprocessing with gnatprep</span></a></p></li>
</ul>
<div class="section" id="the-file-cleanup-utility-gnatclean">
<span id="id2"></span><h2><span class="section-number">5.1. </span>The File Cleanup Utility <code class="docutils literal notranslate"><span class="pre">gnatclean</span></code><a class="headerlink" href="#the-file-cleanup-utility-gnatclean" title="Permalink to this headline">¶</a></h2>
<span class="target" id="index-0"></span><p id="index-1"><code class="docutils literal notranslate"><span class="pre">gnatclean</span></code> is a tool that allows the deletion of files produced by the
compiler, binder and linker, including ALI files, object files, tree files,
expanded source files, library files, interface copy source files, binder
generated files and executable files.</p>
<div class="section" id="running-gnatclean">
<span id="id3"></span><h3><span class="section-number">5.1.1. </span>Running <code class="docutils literal notranslate"><span class="pre">gnatclean</span></code><a class="headerlink" href="#running-gnatclean" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">gnatclean</span></code> command has the form:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ gnatclean switches names
</pre></div>
</div>
</div></blockquote>
<p>where <code class="docutils literal notranslate"><span class="pre">names</span></code> is a list of source file names. Suffixes <code class="file docutils literal notranslate"><span class="pre">.ads</span></code> and
<code class="file docutils literal notranslate"><span class="pre">adb</span></code> may be omitted. If a project file is specified using switch
<code class="switch docutils literal notranslate"><span class="pre">-P</span></code>, then <code class="docutils literal notranslate"><span class="pre">names</span></code> may be completely omitted.</p>
<p>In normal mode, <code class="docutils literal notranslate"><span class="pre">gnatclean</span></code> delete the files produced by the compiler and,
if switch <code class="switch docutils literal notranslate"><span class="pre">-c</span></code> is not specified, by the binder and
the linker. In informative-only mode, specified by switch
<code class="switch docutils literal notranslate"><span class="pre">-n</span></code>, the list of files that would have been deleted in
normal mode is listed, but no file is actually deleted.</p>
</div>
<div class="section" id="switches-for-gnatclean">
<span id="id4"></span><h3><span class="section-number">5.1.2. </span>Switches for <code class="docutils literal notranslate"><span class="pre">gnatclean</span></code><a class="headerlink" href="#switches-for-gnatclean" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">gnatclean</span></code> recognizes the following switches:</p>
<dl class="simple" id="index-2">
<dt><code class="switch docutils literal notranslate"><span class="pre">--version</span></code></dt><dd><p>Display copyright and version, then exit disregarding all other options.</p>
</dd>
</dl>
<dl class="simple" id="index-3">
<dt><code class="switch docutils literal notranslate"><span class="pre">--help</span></code></dt><dd><p>If <code class="switch docutils literal notranslate"><span class="pre">--version</span></code> was not used, display usage, then exit disregarding
all other options.</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--subdirs=</span><em><span class="pre">subdir</span></em></code></dt><dd><p>Actual object directory of each project file is the subdirectory subdir of the
object directory specified or defaulted in the project file.</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--unchecked-shared-lib-imports</span></code></dt><dd><p>By default, shared library projects are not allowed to import static library
projects. When this switch is used on the command line, this restriction is
relaxed.</p>
</dd>
</dl>
<dl class="simple" id="index-4">
<dt><code class="switch docutils literal notranslate"><span class="pre">-c</span></code></dt><dd><p>Only attempt to delete the files produced by the compiler, not those produced
by the binder or the linker. The files that are not to be deleted are library
files, interface copy files, binder generated files and executable files.</p>
</dd>
</dl>
<dl class="simple" id="index-5">
<dt><code class="switch docutils literal notranslate"><span class="pre">-D</span> <em><span class="pre">dir</span></em></code></dt><dd><p>Indicate that ALI and object files should normally be found in directory <code class="docutils literal notranslate"><span class="pre">dir</span></code>.</p>
</dd>
</dl>
<dl class="simple" id="index-6">
<dt><code class="switch docutils literal notranslate"><span class="pre">-F</span></code></dt><dd><p>When using project files, if some errors or warnings are detected during
parsing and verbose mode is not in effect (no use of switch
-v), then error lines start with the full path name of the project
file, rather than its simple file name.</p>
</dd>
</dl>
<dl class="simple" id="index-7">
<dt><code class="switch docutils literal notranslate"><span class="pre">-h</span></code></dt><dd><p>Output a message explaining the usage of <code class="docutils literal notranslate"><span class="pre">gnatclean</span></code>.</p>
</dd>
</dl>
<dl class="simple" id="index-8">
<dt><code class="switch docutils literal notranslate"><span class="pre">-n</span></code></dt><dd><p>Informative-only mode. Do not delete any files. Output the list of the files
that would have been deleted if this switch was not specified.</p>
</dd>
</dl>
<dl class="simple" id="index-9">
<dt><code class="switch docutils literal notranslate"><span class="pre">-P</span><em><span class="pre">project</span></em></code></dt><dd><p>Use project file <code class="docutils literal notranslate"><span class="pre">project</span></code>. Only one such switch can be used.
When cleaning a project file, the files produced by the compilation of the
immediate sources or inherited sources of the project files are to be
deleted. This is not depending on the presence or not of executable names
on the command line.</p>
</dd>
</dl>
<dl class="simple" id="index-10">
<dt><code class="switch docutils literal notranslate"><span class="pre">-q</span></code></dt><dd><p>Quiet output. If there are no errors, do not output anything, except in
verbose mode (switch -v) or in informative-only mode
(switch -n).</p>
</dd>
</dl>
<dl class="simple" id="index-11">
<dt><code class="switch docutils literal notranslate"><span class="pre">-r</span></code></dt><dd><p>When a project file is specified (using switch -P),
clean all imported and extended project files, recursively. If this switch
is not specified, only the files related to the main project file are to be
deleted. This switch has no effect if no project file is specified.</p>
</dd>
</dl>
<dl class="simple" id="index-12">
<dt><code class="switch docutils literal notranslate"><span class="pre">-v</span></code></dt><dd><p>Verbose mode.</p>
</dd>
</dl>
<dl class="simple" id="index-13">
<dt><code class="switch docutils literal notranslate"><span class="pre">-vP</span><em><span class="pre">x</span></em></code></dt><dd><p>Indicates the verbosity of the parsing of GNAT project files.
<a class="reference internal" href="#switches-related-to-project-files"><span class="std std-ref">Switches Related to Project Files</span></a>.</p>
</dd>
</dl>
<dl class="simple" id="index-14">
<dt><code class="switch docutils literal notranslate"><span class="pre">-X</span><em><span class="pre">name</span></em><span class="pre">=</span><em><span class="pre">value</span></em></code></dt><dd><p>Indicates that external variable <code class="docutils literal notranslate"><span class="pre">name</span></code> has the value <code class="docutils literal notranslate"><span class="pre">value</span></code>.
The Project Manager will use this value for occurrences of
<code class="docutils literal notranslate"><span class="pre">external(name)</span></code> when parsing the project file.
See <a class="reference internal" href="#switches-related-to-project-files"><span class="std std-ref">Switches Related to Project Files</span></a>.</p>
</dd>
</dl>
<dl class="simple" id="index-15">
<dt><code class="switch docutils literal notranslate"><span class="pre">-aO</span><em><span class="pre">dir</span></em></code></dt><dd><p>When searching for ALI and object files, look in directory <code class="docutils literal notranslate"><span class="pre">dir</span></code>.</p>
</dd>
</dl>
<dl class="simple" id="index-16">
<dt><code class="switch docutils literal notranslate"><span class="pre">-I</span><em><span class="pre">dir</span></em></code></dt><dd><p>Equivalent to <code class="switch docutils literal notranslate"><span class="pre">-aO</span><em><span class="pre">dir</span></em></code>.</p>
</dd>
</dl>
<span class="target" id="index-17"></span><dl class="simple" id="index-18">
<dt><code class="switch docutils literal notranslate"><span class="pre">-I-</span></code></dt><dd><p>Do not look for ALI or object files in the directory
where <code class="docutils literal notranslate"><span class="pre">gnatclean</span></code> was invoked.</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="the-gnat-library-browser-gnatls">
<span id="id5"></span><h2><span class="section-number">5.2. </span>The GNAT Library Browser <code class="docutils literal notranslate"><span class="pre">gnatls</span></code><a class="headerlink" href="#the-gnat-library-browser-gnatls" title="Permalink to this headline">¶</a></h2>
<span class="target" id="index-19"></span><p id="index-20"><code class="docutils literal notranslate"><span class="pre">gnatls</span></code> is a tool that outputs information about compiled
units. It gives the relationship between objects, unit names and source
files. It can also be used to check the source dependencies of a unit
as well as various characteristics.</p>
<div class="section" id="running-gnatls">
<span id="id6"></span><h3><span class="section-number">5.2.1. </span>Running <code class="docutils literal notranslate"><span class="pre">gnatls</span></code><a class="headerlink" href="#running-gnatls" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">gnatls</span></code> command has the form</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ gnatls switches object_or_ali_file
</pre></div>
</div>
</div></blockquote>
<p>The main argument is the list of object or <code class="file docutils literal notranslate"><span class="pre">ali</span></code> files
(see <a class="reference internal" href="the_gnat_compilation_model.html#the-ada-library-information-files"><span class="std std-ref">The Ada Library Information Files</span></a>)
for which information is requested.</p>
<p>In normal mode, without additional option, <code class="docutils literal notranslate"><span class="pre">gnatls</span></code> produces a
four-column listing. Each line represents information for a specific
object. The first column gives the full path of the object, the second
column gives the name of the principal unit in this object, the third
column gives the status of the source and the fourth column gives the
full path of the source representing this unit.
Here is a simple example of use:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ gnatls *.o
./demo1.o            demo1            DIF demo1.adb
./demo2.o            demo2             OK demo2.adb
./hello.o            h1                OK hello.adb
./instr-child.o      instr.child      MOK instr-child.adb
./instr.o            instr             OK instr.adb
./tef.o              tef              DIF tef.adb
./text_io_example.o  text_io_example   OK text_io_example.adb
./tgef.o             tgef             DIF tgef.adb
</pre></div>
</div>
</div></blockquote>
<p>The first line can be interpreted as follows: the main unit which is
contained in
object file <code class="file docutils literal notranslate"><span class="pre">demo1.o</span></code> is demo1, whose main source is in
<code class="file docutils literal notranslate"><span class="pre">demo1.adb</span></code>. Furthermore, the version of the source used for the
compilation of demo1 has been modified (DIF). Each source file has a status
qualifier which can be:</p>
<dl class="simple">
<dt><em>OK (unchanged)</em></dt><dd><p>The version of the source file used for the compilation of the
specified unit corresponds exactly to the actual source file.</p>
</dd>
<dt><em>MOK (slightly modified)</em></dt><dd><p>The version of the source file used for the compilation of the
specified unit differs from the actual source file but not enough to
require recompilation. If you use gnatmake with the option
<code class="switch docutils literal notranslate"><span class="pre">-m</span></code> (minimal recompilation), a file marked
MOK will not be recompiled.</p>
</dd>
<dt><em>DIF (modified)</em></dt><dd><p>No version of the source found on the path corresponds to the source
used to build this object.</p>
</dd>
<dt><em>??? (file not found)</em></dt><dd><p>No source file was found for this unit.</p>
</dd>
<dt><em>HID (hidden,  unchanged version not first on PATH)</em></dt><dd><p>The version of the source that corresponds exactly to the source used
for compilation has been found on the path but it is hidden by another
version of the same source that has been modified.</p>
</dd>
</dl>
</div>
<div class="section" id="switches-for-gnatls">
<span id="id7"></span><h3><span class="section-number">5.2.2. </span>Switches for <code class="docutils literal notranslate"><span class="pre">gnatls</span></code><a class="headerlink" href="#switches-for-gnatls" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">gnatls</span></code> recognizes the following switches:</p>
<dl class="simple" id="index-21">
<dt><code class="switch docutils literal notranslate"><span class="pre">--version</span></code></dt><dd><p>Display copyright and version, then exit disregarding all other options.</p>
</dd>
</dl>
<dl class="simple" id="index-22">
<dt><code class="switch docutils literal notranslate"><span class="pre">--help</span></code></dt><dd><p>If <code class="switch docutils literal notranslate"><span class="pre">--version</span></code> was not used, display usage, then exit disregarding
all other options.</p>
</dd>
</dl>
<dl class="simple" id="index-23">
<dt><code class="switch docutils literal notranslate"><span class="pre">-a</span></code></dt><dd><p>Consider all units, including those of the predefined Ada library.
Especially useful with <code class="switch docutils literal notranslate"><span class="pre">-d</span></code>.</p>
</dd>
</dl>
<dl class="simple" id="index-24">
<dt><code class="switch docutils literal notranslate"><span class="pre">-d</span></code></dt><dd><p>List sources from which specified units depend on.</p>
</dd>
</dl>
<dl class="simple" id="index-25">
<dt><code class="switch docutils literal notranslate"><span class="pre">-h</span></code></dt><dd><p>Output the list of options.</p>
</dd>
</dl>
<dl class="simple" id="index-26">
<dt><code class="switch docutils literal notranslate"><span class="pre">-o</span></code></dt><dd><p>Only output information about object files.</p>
</dd>
</dl>
<dl class="simple" id="index-27">
<dt><code class="switch docutils literal notranslate"><span class="pre">-s</span></code></dt><dd><p>Only output information about source files.</p>
</dd>
</dl>
<dl class="simple" id="index-28">
<dt><code class="switch docutils literal notranslate"><span class="pre">-u</span></code></dt><dd><p>Only output information about compilation units.</p>
</dd>
</dl>
<dl class="simple" id="index-29">
<dt><code class="switch docutils literal notranslate"><span class="pre">-files=</span><em><span class="pre">file</span></em></code></dt><dd><p>Take as arguments the files listed in text file <code class="docutils literal notranslate"><span class="pre">file</span></code>.
Text file <code class="docutils literal notranslate"><span class="pre">file</span></code> may contain empty lines that are ignored.
Each nonempty line should contain the name of an existing file.
Several such switches may be specified simultaneously.</p>
</dd>
</dl>
<span class="target" id="index-30"></span><span class="target" id="index-31"></span><span class="target" id="index-32"></span><dl class="simple" id="index-33">
<dt><code class="switch docutils literal notranslate"><span class="pre">-aO</span><em><span class="pre">dir</span></em></code>, <code class="switch docutils literal notranslate"><span class="pre">-aI</span><em><span class="pre">dir</span></em></code>, <code class="switch docutils literal notranslate"><span class="pre">-I</span><em><span class="pre">dir</span></em></code>, <code class="switch docutils literal notranslate"><span class="pre">-I-</span></code>, <code class="switch docutils literal notranslate"><span class="pre">-nostdinc</span></code></dt><dd><p>Source path manipulation. Same meaning as the equivalent <code class="docutils literal notranslate"><span class="pre">gnatmake</span></code>
flags (<a class="reference internal" href="building_executable_programs_with_gnat.html#switches-for-gnatmake"><span class="std std-ref">Switches for gnatmake</span></a>).</p>
</dd>
</dl>
<dl class="simple" id="index-34">
<dt><code class="switch docutils literal notranslate"><span class="pre">-aP</span><em><span class="pre">dir</span></em></code></dt><dd><p>Add <code class="docutils literal notranslate"><span class="pre">dir</span></code> at the beginning of the project search dir.</p>
</dd>
</dl>
<dl class="simple" id="index-35">
<dt><code class="switch docutils literal notranslate"><span class="pre">--RTS=</span><em><span class="pre">rts-path</span></em></code></dt><dd><p>Specifies the default location of the runtime library. Same meaning as the
equivalent <code class="docutils literal notranslate"><span class="pre">gnatmake</span></code> flag (<a class="reference internal" href="building_executable_programs_with_gnat.html#switches-for-gnatmake"><span class="std std-ref">Switches for gnatmake</span></a>).</p>
</dd>
</dl>
<dl class="simple" id="index-36">
<dt><code class="switch docutils literal notranslate"><span class="pre">-v</span></code></dt><dd><p>Verbose mode. Output the complete source, object and project paths. Do not use
the default column layout but instead use long format giving as much as
information possible on each requested units, including special
characteristics such as:</p>
<ul class="simple">
<li><p><em>Preelaborable</em>: The unit is preelaborable in the Ada sense.</p></li>
<li><p><em>No_Elab_Code</em>:  No elaboration code has been produced by the compiler for this unit.</p></li>
<li><p><em>Pure</em>: The unit is pure in the Ada sense.</p></li>
<li><p><em>Elaborate_Body</em>: The unit contains a pragma Elaborate_Body.</p></li>
<li><p><em>Remote_Types</em>: The unit contains a pragma Remote_Types.</p></li>
<li><p><em>Shared_Passive</em>: The unit contains a pragma Shared_Passive.</p></li>
<li><p><em>Predefined</em>: This unit is part of the predefined environment and cannot be modified
by the user.</p></li>
<li><p><em>Remote_Call_Interface</em>: The unit contains a pragma Remote_Call_Interface.</p></li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="example-of-gnatls-usage">
<span id="id8"></span><h3><span class="section-number">5.2.3. </span>Example of <code class="docutils literal notranslate"><span class="pre">gnatls</span></code> Usage<a class="headerlink" href="#example-of-gnatls-usage" title="Permalink to this headline">¶</a></h3>
<p>Example of using the verbose switch. Note how the source and
object paths are affected by the -I switch.</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ gnatls -v -I.. demo1.o

GNATLS 5.03w (20041123-34)
Copyright 1997-2004 Free Software Foundation, Inc.

Source Search Path:
   &lt;Current_Directory&gt;
   ../
   /home/comar/local/adainclude/

Object Search Path:
   &lt;Current_Directory&gt;
   ../
   /home/comar/local/lib/gcc-lib/x86-linux/3.4.3/adalib/

Project Search Path:
   &lt;Current_Directory&gt;
   /home/comar/local/lib/gnat/

./demo1.o
   Unit =&gt;
     Name   =&gt; demo1
     Kind   =&gt; subprogram body
     Flags  =&gt; No_Elab_Code
     Source =&gt; demo1.adb    modified
</pre></div>
</div>
</div></blockquote>
<p>The following is an example of use of the dependency list.
Note the use of the -s switch
which gives a straight list of source files. This can be useful for
building specialized scripts.</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ gnatls -d demo2.o
./demo2.o   demo2        OK demo2.adb
                         OK gen_list.ads
                         OK gen_list.adb
                         OK instr.ads
                         OK instr-child.ads

$ gnatls -d -s -a demo1.o
demo1.adb
/home/comar/local/adainclude/ada.ads
/home/comar/local/adainclude/a-finali.ads
/home/comar/local/adainclude/a-filico.ads
/home/comar/local/adainclude/a-stream.ads
/home/comar/local/adainclude/a-tags.ads
gen_list.ads
gen_list.adb
/home/comar/local/adainclude/gnat.ads
/home/comar/local/adainclude/g-io.ads
instr.ads
/home/comar/local/adainclude/system.ads
/home/comar/local/adainclude/s-exctab.ads
/home/comar/local/adainclude/s-finimp.ads
/home/comar/local/adainclude/s-finroo.ads
/home/comar/local/adainclude/s-secsta.ads
/home/comar/local/adainclude/s-stalib.ads
/home/comar/local/adainclude/s-stoele.ads
/home/comar/local/adainclude/s-stratt.ads
/home/comar/local/adainclude/s-tasoli.ads
/home/comar/local/adainclude/s-unstyp.ads
/home/comar/local/adainclude/unchconv.ads
</pre></div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="the-coding-standard-verifier-gnatcheck">
<span id="id9"></span><h2><span class="section-number">5.3. </span>The Coding Standard Verifier <code class="docutils literal notranslate"><span class="pre">gnatcheck</span></code><a class="headerlink" href="#the-coding-standard-verifier-gnatcheck" title="Permalink to this headline">¶</a></h2>
<span class="target" id="index-37"></span><p id="index-38">The <code class="docutils literal notranslate"><span class="pre">gnatcheck</span></code> tool is an ASIS-based utility that checks coding standard
compliance of Ada source files according to a given set of semantic rules.</p>
<p><code class="docutils literal notranslate"><span class="pre">gnatcheck</span></code> is a project-aware tool
(see <a class="reference internal" href="#using-project-files-with-gnat-tools"><span class="std std-ref">Using Project Files with GNAT Tools</span></a> for a description of
the project-related switches). The project file package that can specify
<code class="docutils literal notranslate"><span class="pre">gnatcheck</span></code> switches is named <code class="docutils literal notranslate"><span class="pre">Check</span></code>.</p>
<p>For full details, plese refer to <cite>GNATcheck Reference Manual</cite>.</p>
</div>
<div class="section" id="the-gnat-metrics-tool-gnatmetric">
<span id="id10"></span><h2><span class="section-number">5.4. </span>The GNAT Metrics Tool <code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code><a class="headerlink" href="#the-gnat-metrics-tool-gnatmetric" title="Permalink to this headline">¶</a></h2>
<span class="target" id="index-39"></span><p id="index-40">The <code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code> tool is a utility
for computing various program metrics.
It takes an Ada source file as input and generates a file containing the
metrics data as output. Various switches control which
metrics are reported.</p>
<p><code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code> is a project-aware tool
(see <a class="reference internal" href="#using-project-files-with-gnat-tools"><span class="std std-ref">Using Project Files with GNAT Tools</span></a> for a description of
the project-related switches). The project file package that can specify
<code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code> switches is named <code class="docutils literal notranslate"><span class="pre">Metrics</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code> command has the form</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ gnatmetric [ switches ] { filename }
</pre></div>
</div>
</div></blockquote>
<p>where:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">switches</span></code> specify the metrics to compute and define the destination for
the output</p></li>
<li><p>Each <code class="docutils literal notranslate"><span class="pre">filename</span></code> is the name of a source file to process. ‘Wildcards’ are
allowed, and the file name may contain path information.  If no
<code class="docutils literal notranslate"><span class="pre">filename</span></code> is supplied, then the <code class="docutils literal notranslate"><span class="pre">switches</span></code> list must contain at least
one <code class="switch docutils literal notranslate"><span class="pre">--files</span></code> switch (see <a class="reference internal" href="#other-gnatmetric-switches"><span class="std std-ref">Other gnatmetric Switches</span></a>).
Including both a <code class="switch docutils literal notranslate"><span class="pre">--files</span></code> switch and one or more <code class="docutils literal notranslate"><span class="pre">filename</span></code>
arguments is permitted.</p>
<p>Note that it is no longer necessary to specify the Ada language version;
<code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code> can process Ada source code written in any version from
Ada 83 onward without specifying any language version switch.</p>
</li>
</ul>
<p>The following subsections describe the various switches accepted by
<code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code>, organized by category.</p>
<div class="section" id="output-file-control">
<span id="output-file-control-gnatmetric"></span><h3><span class="section-number">5.4.1. </span>Output File Control<a class="headerlink" href="#output-file-control" title="Permalink to this headline">¶</a></h3>
<p id="index-41"><code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code> has two output formats. It can generate a
textual (human-readable) form, and also XML. By default only textual
output is generated.</p>
<p>When generating the output in textual form, <code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code> creates
for each Ada source file a corresponding text file
containing the computed metrics, except for the case when the set of metrics
specified by gnatmetric parameters consists only of metrics that are computed
for the whole set of analyzed sources, but not for each Ada source.
By default, the name of the file containing metric information for a source
is obtained by appending the <code class="file docutils literal notranslate"><span class="pre">.metrix</span></code> suffix to the
name of the input source file. If not otherwise specified and no project file
is specified as <code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code> option this file is placed in the same
directory as where the source file is located. If <code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code> has a
project  file as its parameter, it places all the generated files in the
object directory of the project (or in the project source directory if the
project does not define an object directory). If <code class="switch docutils literal notranslate"><span class="pre">--subdirs</span></code> option
is specified, the files are placed in the subrirectory of this directory
specified by this option.</p>
<p>All the output information generated in XML format is placed in a single
file. By default the name of this file is <code class="file docutils literal notranslate"><span class="pre">metrix.xml</span></code>.
If not otherwise specified and if no project file is specified
as <code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code> option this file is placed in the
current directory.</p>
<p>Some of the computed metrics are summed over the units passed to
<code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code>; for example, the total number of lines of code.
By default this information is sent to <code class="file docutils literal notranslate"><span class="pre">stdout</span></code>, but a file
can be specified with the <code class="switch docutils literal notranslate"><span class="pre">--global-file-name</span></code> switch.</p>
<p>The following switches control the <code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code> output:</p>
<dl class="simple" id="index-42">
<dt><code class="switch docutils literal notranslate"><span class="pre">--generate-xml-output</span></code></dt><dd><p>Generate XML output.</p>
</dd>
</dl>
<dl class="simple" id="index-43">
<dt><code class="switch docutils literal notranslate"><span class="pre">--generate-xml-schema</span></code></dt><dd><p>Generate XML output and an XML schema file that describes the structure
of the XML metric report. This schema is assigned to the XML file. The schema
file has the same name as the XML output file with <code class="file docutils literal notranslate"><span class="pre">.xml</span></code> suffix replaced
with <code class="file docutils literal notranslate"><span class="pre">.xsd</span></code>.</p>
</dd>
</dl>
<dl class="simple" id="index-44">
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-text-output</span></code></dt><dd><p>Do not generate the output in text form (implies <code class="switch docutils literal notranslate"><span class="pre">-x</span></code>).</p>
</dd>
</dl>
<dl class="simple" id="index-45">
<dt><code class="switch docutils literal notranslate"><span class="pre">--output-dir=</span><em><span class="pre">output_dir</span></em></code></dt><dd><p>Put text files with detailed metrics into <code class="docutils literal notranslate"><span class="pre">output_dir</span></code>.</p>
</dd>
</dl>
<dl class="simple" id="index-46">
<dt><code class="switch docutils literal notranslate"><span class="pre">--output-suffix=</span><em><span class="pre">file_suffix</span></em></code></dt><dd><p>Use <code class="docutils literal notranslate"><span class="pre">file_suffix</span></code>, instead of <code class="file docutils literal notranslate"><span class="pre">.metrix</span></code>
in the name of the output file.</p>
</dd>
</dl>
<dl class="simple" id="index-47">
<dt><code class="switch docutils literal notranslate"><span class="pre">--global-file-name=</span><em><span class="pre">file_name</span></em></code></dt><dd><p>Put global metrics into <code class="docutils literal notranslate"><span class="pre">file_name</span></code>.</p>
</dd>
</dl>
<dl class="simple" id="index-48">
<dt><code class="switch docutils literal notranslate"><span class="pre">--xml-file-name=</span><em><span class="pre">file_name</span></em></code></dt><dd><p>Put the XML output into <code class="docutils literal notranslate"><span class="pre">file_name</span></code>
(also implies <code class="switch docutils literal notranslate"><span class="pre">--generate-xml-output</span></code>).</p>
</dd>
</dl>
<dl id="index-49">
<dt><code class="switch docutils literal notranslate"><span class="pre">--short-file-names</span></code></dt><dd><blockquote>
<div><p>Use ‘short’ source file names in the output. (The <code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code>
output includes the name(s) of the Ada source file(s) from which the
metrics are computed. By default each name includes the absolute
path. The <code class="switch docutils literal notranslate"><span class="pre">--short-file-names</span></code> switch causes <code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code>
to exclude all directory information from the file names that are
output.)</p>
</div></blockquote>
<dl class="simple" id="index-50">
<dt><code class="switch docutils literal notranslate"><span class="pre">--wide-character-encoding=</span><em><span class="pre">e</span></em></code></dt><dd><p>Specify the wide character encoding method for the input and output
files. <code class="docutils literal notranslate"><span class="pre">e</span></code> is one of the following:</p>
<ul class="simple">
<li><p><em>8</em> - UTF-8 encoding</p></li>
<li><p><em>b</em> - Brackets encoding (default value)</p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="disable-metrics-for-local-units">
<span id="index-51"></span><span id="id11"></span><h3><span class="section-number">5.4.2. </span>Disable Metrics For Local Units<a class="headerlink" href="#disable-metrics-for-local-units" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code> relies on the GNAT compilation model –
one compilation
unit per one source file. It computes line metrics for the whole source
file, and it also computes syntax
and complexity metrics for the file’s outermost unit.</p>
<p>By default, <code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code> will also compute all metrics for certain
kinds of locally declared program units:</p>
<ul class="simple">
<li><p>subprogram (and generic subprogram) bodies;</p></li>
<li><p>package (and generic package) specs and bodies;</p></li>
<li><p>task object and type specifications and bodies;</p></li>
<li><p>protected object and type specifications and bodies.</p></li>
</ul>
<p id="index-52">These kinds of entities will be referred to as
<em>eligible local program units</em>, or simply <em>eligible local units</em>,
in the discussion below.</p>
<p>Note that a subprogram declaration, generic instantiation,
or renaming declaration only receives metrics
computation when it appear as the outermost entity
in a source file.</p>
<p>Suppression of metrics computation for eligible local units can be
obtained via the following switch:</p>
<dl class="simple" id="index-53">
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-local-metrics</span></code></dt><dd><p>Do not compute detailed metrics for eligible local program units.</p>
</dd>
</dl>
</div>
<div class="section" id="specifying-a-set-of-metrics-to-compute">
<span id="id12"></span><h3><span class="section-number">5.4.3. </span>Specifying a set of metrics to compute<a class="headerlink" href="#specifying-a-set-of-metrics-to-compute" title="Permalink to this headline">¶</a></h3>
<p>By default all the metrics are reported. The switches described in this
subsection allow you to control, on an individual basis, whether metrics are
reported. If at least one positive metric switch is specified (that is, a
switch that defines that a given metric or set of metrics is to be computed),
then only explicitly specified metrics are reported.</p>
<div class="section" id="line-metrics-control">
<span id="id13"></span><h4><span class="section-number">5.4.3.1. </span>Line Metrics Control<a class="headerlink" href="#line-metrics-control" title="Permalink to this headline">¶</a></h4>
<p id="index-54">For each source file, and for each of its eligible local program
units, <code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code> computes the following metrics:</p>
<ul class="simple">
<li><p>the total number of lines;</p></li>
<li><p>the total number of code lines (i.e., non-blank lines that are not
comments)</p></li>
<li><p>the number of comment lines</p></li>
<li><p>the number of code lines containing end-of-line comments;</p></li>
<li><p>the comment percentage: the ratio between the number of lines that
contain comments and the number of all non-blank lines, expressed as
a percentage</p></li>
<li><p>the number of empty lines and lines containing only space characters
and/or format effectors (blank lines)</p></li>
<li><p>the average number of code lines in subprogram bodies, task bodies,
entry bodies and statement sequences in package bodies</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code> sums the values of the line metrics for all the files
being processed and then generates the cumulative results. The tool
also computes for all the files being processed the average number of
code lines in bodies.</p>
<p>You can use the following switches to select the specific line metrics
to be reported.</p>
<span class="target" id="index-55"></span><dl class="simple" id="index-56">
<dt><code class="switch docutils literal notranslate"><span class="pre">--lines-all</span></code></dt><dd><p>Report all the line metrics</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-lines-all</span></code></dt><dd><p>Do not report any of line metrics</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--lines</span></code></dt><dd><p>Report the number of all lines</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-lines</span></code></dt><dd><p>Do not report the number of all lines</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--lines-code</span></code></dt><dd><p>Report the number of code lines</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-lines-code</span></code></dt><dd><p>Do not report the number of code lines</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--lines-comment</span></code></dt><dd><p>Report the number of comment lines</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-lines-comment</span></code></dt><dd><p>Do not report the number of comment lines</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--lines-eol-comment</span></code></dt><dd><p>Report the number of code lines containing
end-of-line comments</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-lines-eol-comment</span></code></dt><dd><p>Do not report the number of code lines containing
end-of-line comments</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--lines-ratio</span></code></dt><dd><p>Report the comment percentage in the program text</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-lines-ratio</span></code></dt><dd><p>Do not report the comment percentage in the program text</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--lines-blank</span></code></dt><dd><p>Report the number of blank lines</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-lines-blank</span></code></dt><dd><p>Do not report the number of blank lines</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--lines-average</span></code></dt><dd><p>Report the average number of code lines in subprogram bodies, task bodies,
entry bodies and statement sequences in package bodies.</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-lines-average</span></code></dt><dd><p>Do not report the average number of code lines in subprogram bodies,
task bodies, entry bodies and statement sequences in package bodies.</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--lines-spark</span></code></dt><dd><p>Report the number of lines written in SPARK.</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-lines-spark</span></code></dt><dd><p>Do not report the number of lines written in SPARK.</p>
</dd>
</dl>
</div>
<div class="section" id="syntax-metrics-control">
<span id="id14"></span><h4><span class="section-number">5.4.3.2. </span>Syntax Metrics Control<a class="headerlink" href="#syntax-metrics-control" title="Permalink to this headline">¶</a></h4>
<p id="index-57"><code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code> computes various syntactic metrics for the
outermost unit and for each eligible local unit:</p>
<ul>
<li><dl>
<dt><em>LSLOC (‘Logical Source Lines Of Code’)</em></dt><dd><p>The total number of declarations and the total number of
statements. Note that the definition of declarations is the one
given in the reference manual:</p>
<blockquote>
<div><p>“Each of the following is defined to be a declaration: any
basic_declaration; an enumeration_literal_specification; a
discriminant_specification; a component_declaration; a
loop_parameter_specification; a parameter_specification; a
subprogram_body; an entry_declaration; an
entry_index_specification; a choice_parameter_specification; a
generic_formal_parameter_declaration.”</p>
</div></blockquote>
<p>This means for example that each enumeration literal adds one to
the count, as well as each subprogram parameter.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><em>Maximal static nesting level of inner program units</em></dt><dd><p>According to <cite>Ada Reference Manual</cite>, 10.1(1):</p>
<blockquote>
<div><p>“A program unit is either a package, a task unit, a protected
unit, a protected entry, a generic unit, or an explicitly
declared subprogram other than an enumeration literal.”</p>
</div></blockquote>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><em>Maximal nesting level of composite syntactic constructs</em></dt><dd><p>This corresponds to the notion of the maximum nesting level in the
GNAT built-in style checks (see <a class="reference internal" href="building_executable_programs_with_gnat.html#style-checking"><span class="std std-ref">Style Checking</span></a>).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><em>Number of formal parameters</em></dt><dd><p>Number of formal parameters of a subprogram; if a subprogram does
have parameters, then numbers of “in”, “out” and “in out”
parameters are also reported. This metric is reported for
subprogram specifications and for subprogram instantiations. For
subprogram bodies, expression functions and null procedures this
metric is reported if the construct acts as a subprogram
declaration but is not a completion of previous declaration. This
metric is not reported for generic and formal subprograms.</p>
</dd>
</dl>
</li>
</ul>
<p>For the outermost unit in the file, <code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code> additionally
computes the following metrics:</p>
<ul>
<li><dl class="simple">
<dt><em>Public subprograms</em></dt><dd><p>This metric is computed for package specs. It is the number of
subprograms and generic subprograms declared in the visible part
(including the visible part of nested packages, protected objects,
and protected types).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><em>All subprograms</em></dt><dd><p>This metric is computed for bodies and subunits. The metric is
equal to a total number of subprogram bodies in the compilation
unit.
Neither generic instantiations nor renamings-as-a-body nor body
stubs are counted. Any subprogram body is counted, independently
of its nesting level and enclosing constructs. Generic bodies and
bodies of protected subprograms are counted in the same way as
‘usual’ subprogram bodies.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><em>Public types</em></dt><dd><p>This metric is computed for package specs and generic package
declarations. It is the total number of types that can be
referenced from outside this compilation unit, plus the number of
types from all the visible parts of all the visible generic
packages. Generic formal types are not counted. Only types, not
subtypes, are included.</p>
<p>Along with the total number of public types, the following
types are counted and reported separately:</p>
<ul class="simple">
<li><p><em>Abstract types</em></p></li>
<li><p><em>Root tagged types^ (abstract, non-abstract, private,
non-private). Type extensions are *not</em> counted</p></li>
<li><p><em>Private types</em> (including private extensions)</p></li>
<li><p><em>Task types</em></p></li>
<li><p><em>Protected types</em></p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><em>All types</em></dt><dd><p>This metric is computed for any compilation unit. It is equal to
the total number of the declarations of different types given in
the compilation unit. The private and the corresponding full type
declaration are counted as one type declaration. Incomplete type
declarations and generic formal types are not counted.
No distinction is made among different kinds of types (abstract,
private etc.); the total number of types is reported.</p>
</dd>
</dl>
</li>
</ul>
<p>By default, all the syntax metrics are reported. You can use the following
switches to select specific syntax metrics.</p>
<span class="target" id="index-58"></span><dl class="simple" id="index-59">
<dt><code class="switch docutils literal notranslate"><span class="pre">--syntax-all</span></code></dt><dd><p>Report all the syntax metrics</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-syntax-all</span></code></dt><dd><p>Do not report any of syntax metrics</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--declarations</span></code></dt><dd><p>Report the total number of declarations</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-declarations</span></code></dt><dd><p>Do not report the total number of declarations</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--statements</span></code></dt><dd><p>Report the total number of statements</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-statements</span></code></dt><dd><p>Do not report the total number of statements</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--public-subprograms</span></code></dt><dd><p>Report the number of public subprograms in a compilation unit</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-public-subprograms</span></code></dt><dd><p>Do not report the number of public subprograms in a compilation unit</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--all-subprograms</span></code></dt><dd><p>Report the number of all the subprograms in a compilation unit</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-all-subprograms</span></code></dt><dd><p>Do not report the number of all the subprograms in a compilation unit</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--public-types</span></code></dt><dd><p>Report the number of public types in a compilation unit</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-public-types</span></code></dt><dd><p>Do not report the number of public types in a compilation unit</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--all-types</span></code></dt><dd><p>Report the number of all the types in a compilation unit</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-all-types</span></code></dt><dd><p>Do not report the number of all the types in a compilation unit</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--unit-nesting</span></code></dt><dd><p>Report the maximal program unit nesting level</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-unit-nesting</span></code></dt><dd><p>Do not report the maximal program unit nesting level</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--construct-nesting</span></code></dt><dd><p>Report the maximal construct nesting level</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-construct-nesting</span></code></dt><dd><p>Do not report the maximal construct nesting level</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--param-number</span></code></dt><dd><p>Report the number of subprogram parameters</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-param-number</span></code></dt><dd><p>Do not report the number of subprogram parameters</p>
</dd>
</dl>
</div>
<div class="section" id="contract-metrics-control">
<span id="id15"></span><h4><span class="section-number">5.4.3.3. </span>Contract Metrics Control<a class="headerlink" href="#contract-metrics-control" title="Permalink to this headline">¶</a></h4>
<dl class="simple" id="index-60">
<dt><code class="switch docutils literal notranslate"><span class="pre">--contract-all</span></code></dt><dd><p>Report all the contract metrics</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-contract-all</span></code></dt><dd><p>Do not report any of the contract metrics</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--contract</span></code></dt><dd><p>Report the number of public subprograms with contracts</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-contract</span></code></dt><dd><p>Do not report the number of public subprograms with contracts</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--post</span></code></dt><dd><p>Report the number of public subprograms with postconditions</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-post</span></code></dt><dd><p>Do not report the number of public subprograms with postconditions</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--contract-complete</span></code></dt><dd><p>Report the number of public subprograms with complete contracts</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-contract-complete</span></code></dt><dd><p>Do not report the number of public subprograms with complete contracts</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--contract-cyclomatic</span></code></dt><dd><p>Report the McCabe complexity of public subprograms</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-contract-cyclomatic</span></code></dt><dd><p>Do not report the McCabe complexity of public subprograms</p>
</dd>
</dl>
</div>
<div class="section" id="complexity-metrics-control">
<span id="id16"></span><h4><span class="section-number">5.4.3.4. </span>Complexity Metrics Control<a class="headerlink" href="#complexity-metrics-control" title="Permalink to this headline">¶</a></h4>
<p id="index-61">For a program unit that is an executable body (a subprogram body
(including generic bodies), task body, entry body or a package body
containing its own statement sequence) <code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code> computes the
following complexity metrics:</p>
<ul class="simple">
<li><p>McCabe cyclomatic complexity;</p></li>
<li><p>McCabe essential complexity;</p></li>
<li><p>maximal loop nesting level;</p></li>
<li><p>extra exit points (for subprograms);</p></li>
</ul>
<p>The McCabe cyclomatic complexity metric is defined
in <a class="reference external" href="http://www.mccabe.com/pdf/mccabe-nist235r.pdf">http://www.mccabe.com/pdf/mccabe-nist235r.pdf</a></p>
<p>According to McCabe, both control statements and short-circuit control
forms should be taken into account when computing cyclomatic
complexity. For Ada 2012 we have also take into account conditional
expressions and quantified expressions. For each body, we compute
three metric values:</p>
<ul class="simple">
<li><p>the complexity introduced by control
statements only, without taking into account short-circuit forms
(referred as <code class="docutils literal notranslate"><span class="pre">statement</span> <span class="pre">complexity</span></code> in <code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code> output),</p></li>
<li><p>the complexity introduced by short-circuit control forms only
(referred as <code class="docutils literal notranslate"><span class="pre">expression</span> <span class="pre">complexity</span></code> in <code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code> output),
and</p></li>
<li><p>the total
cyclomatic complexity, which is the sum of these two values
(referred as <code class="docutils literal notranslate"><span class="pre">cyclomatic</span> <span class="pre">complexity</span></code> in <code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code> output).</p></li>
</ul>
<p>The cyclomatic complexity is also computed for Ada 2012 expression functions.
An expression function cannot have statements as its components, so only one
metric value is computed as a cyclomatic complexity of an expression function.</p>
<p>The origin of cyclomatic complexity metric is the need to estimate the number
of independent paths in the control flow graph that in turn gives the number
of tests needed to satisfy paths coverage testing completeness criterion.
Considered from the testing point of view, a static Ada <code class="docutils literal notranslate"><span class="pre">loop</span></code> (that is,
the <code class="docutils literal notranslate"><span class="pre">loop</span></code> statement having static subtype in loop parameter
specification) does not add to cyclomatic complexity. By providing
<code class="switch docutils literal notranslate"><span class="pre">--no-static-loop</span></code> option a user
may specify that such loops should not be counted when computing the
cyclomatic complexity metric</p>
<p>The Ada essential complexity metric is a McCabe cyclomatic complexity metric
counted for the code that is reduced by excluding all the pure structural Ada
control statements. An compound statement is considered as a non-structural
if it contains a <code class="docutils literal notranslate"><span class="pre">raise</span></code> or <code class="docutils literal notranslate"><span class="pre">return</span></code> statement as it subcomponent,
or if it contains a <code class="docutils literal notranslate"><span class="pre">goto</span></code> statement that transfers the control outside
the operator. A selective <code class="docutils literal notranslate"><span class="pre">accept</span></code> statement with a <code class="docutils literal notranslate"><span class="pre">terminate</span></code> alternative
is considered a non-structural statement. When computing this metric,
<code class="docutils literal notranslate"><span class="pre">exit</span></code> statements are treated in the same way as <code class="docutils literal notranslate"><span class="pre">goto</span></code>
statements unless the <code class="switch docutils literal notranslate"><span class="pre">-ne</span></code> option is specified.</p>
<p>The Ada essential complexity metric defined here is intended to quantify
the extent to which the software is unstructured. It is adapted from
the McCabe essential complexity metric defined in
<a class="reference external" href="http://www.mccabe.com/pdf/mccabe-nist235r.pdf">http://www.mccabe.com/pdf/mccabe-nist235r.pdf</a>
but is modified to be more
suitable for typical Ada usage. For example, short circuit forms
are not penalized as unstructured in the Ada essential complexity metric.</p>
<p>When computing cyclomatic and essential complexity, <code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code> skips
the code in the exception handlers and in all the nested program units. The
code of assertions and predicates (that is, subprogram preconditions and
postconditions, subtype predicates and type invariants) is also skipped.</p>
<p>By default, all the complexity metrics are reported. For more fine-grained
control you can use the following switches:</p>
<span class="target" id="index-62"></span><dl class="simple" id="index-63">
<dt><code class="switch docutils literal notranslate"><span class="pre">--complexity-all</span></code></dt><dd><p>Report all the complexity metrics</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-complexity-all</span></code></dt><dd><p>Do not report any of the complexity metrics</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--complexity-cyclomatic</span></code></dt><dd><p>Report the McCabe Cyclomatic Complexity</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-complexity-cyclomatic</span></code></dt><dd><p>Do not report the McCabe Cyclomatic Complexity</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--complexity-essential</span></code></dt><dd><p>Report the Essential Complexity</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-complexity-essential</span></code></dt><dd><p>Do not report the Essential Complexity</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--loop-nesting</span></code></dt><dd><p>Report maximal loop nesting level</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">-no-loop-nesting</span></code></dt><dd><p>Do not report maximal loop nesting level</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--complexity-average</span></code></dt><dd><p>Report the average McCabe Cyclomatic Complexity for all the subprogram bodies,
task bodies, entry bodies and statement sequences in package bodies.
The metric is reported for whole set of processed Ada sources only.</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-complexity-average</span></code></dt><dd><p>Do not report the average McCabe Cyclomatic Complexity for all the subprogram
bodies, task bodies, entry bodies and statement sequences in package bodies</p>
</dd>
</dl>
<dl class="simple" id="index-64">
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-treat-exit-as-goto</span></code></dt><dd><p>Do not consider <code class="docutils literal notranslate"><span class="pre">exit</span></code> statements as <code class="docutils literal notranslate"><span class="pre">goto</span></code>s when
computing Essential Complexity</p>
</dd>
</dl>
<dl class="simple" id="index-65">
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-static-loop</span></code></dt><dd><p>Do not consider static loops when computing cyclomatic complexity</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--extra-exit-points</span></code></dt><dd><p>Report the extra exit points for subprogram bodies. As an exit point, this
metric counts <code class="docutils literal notranslate"><span class="pre">return</span></code> statements and raise statements in case when the
raised exception is not handled in the same body. In case of a function this
metric subtracts 1 from the number of exit points, because a function body
must contain at least one <code class="docutils literal notranslate"><span class="pre">return</span></code> statement.</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-extra-exit-points</span></code></dt><dd><p>Do not report the extra exit points for subprogram bodies</p>
</dd>
</dl>
</div>
<div class="section" id="coupling-metrics-control">
<span id="id17"></span><h4><span class="section-number">5.4.3.5. </span>Coupling Metrics Control<a class="headerlink" href="#coupling-metrics-control" title="Permalink to this headline">¶</a></h4>
<span class="target" id="index-66"></span><p id="index-67">Coupling metrics measure the dependencies between a given entity and other
entities in the program. This information is useful since high coupling
may signal potential issues with maintainability as the program evolves.</p>
<p><code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code> computes the following coupling metrics:</p>
<ul class="simple">
<li><p><em>object-oriented coupling</em>, for classes in traditional object-oriented
sense;</p></li>
<li><p><em>unit coupling</em>, for all the program units making up a program;</p></li>
<li><p><em>control coupling</em>, reflecting dependencies between a unit and
other units that contain subprograms.</p></li>
</ul>
<span class="target" id="index-68"></span><p id="index-69">Two kinds of coupling metrics are computed:</p>
<ul class="simple">
<li><p>fan-out coupling (‘efferent coupling’):
the number of entities the given entity depends upon. This metric
reflects how the given entity depends on the changes in the
‘external world’.</p></li>
</ul>
<span class="target" id="index-70"></span><ul class="simple" id="index-71">
<li><p>fan-in coupling (‘afferent’ coupling):
the number of entities that depend on a given entity.
This metric reflects how the ‘external world’ depends on the changes in a
given entity.</p></li>
</ul>
<p>Object-oriented coupling metrics measure the dependencies
between a given class (or a group of classes) and the other classes in the
program. In this subsection the term ‘class’ is used in its traditional
object-oriented programming sense (an instantiable module that contains data
and/or method members). A <em>category</em> (of classes) is a group of closely
related classes that are reused and/or modified together.</p>
<p>A class <code class="docutils literal notranslate"><span class="pre">K</span></code>‘s fan-out coupling is the number of classes
that <code class="docutils literal notranslate"><span class="pre">K</span></code> depends upon.
A category’s fan-out coupling is the number of classes outside the
category that the classes inside the category depend upon.</p>
<p>A class <code class="docutils literal notranslate"><span class="pre">K</span></code>‘s fan-in coupling is the number of classes
that depend upon <code class="docutils literal notranslate"><span class="pre">K</span></code>.
A category’s fan-in coupling is the number of classes outside the
category that depend on classes belonging to the category.</p>
<p>Ada’s object-oriented paradigm separates the instantiable entity
(type) from the module (package), so the definition of the coupling
metrics for Ada maps the class and class category notions
onto Ada constructs.</p>
<p>For the coupling metrics, several kinds of modules that define a tagged type
or an interface type  – library packages, library generic packages, and
library generic package instantiations – are considered to be classes.
A category consists of a library package (or
a library generic package) that defines a tagged or an interface type,
together with all its descendant (generic) packages that define tagged
or interface types. Thus a
category is an Ada hierarchy of library-level program units. Class
coupling in Ada is referred to as ‘tagged coupling’, and category coupling
is referred to as ‘hierarchy coupling’.</p>
<p>For any package serving as a class, its body and subunits (if any) are
considered together with its spec when computing dependencies, and coupling
metrics are reported for spec units only. Dependencies between classes
mean Ada semantic dependencies. For object-oriented coupling
metrics, only dependencies on units treated as classes are
considered.</p>
<p>Similarly, for unit and control coupling an entity is considered to be the
conceptual construct consisting of the entity’s specification, body, and
any subunits (transitively).
<code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code> computes
the dependencies of all these units as a whole, but
metrics are only reported for spec
units (or for a subprogram body unit in case if there is no
separate spec for the given subprogram).</p>
<p>For unit coupling, dependencies are computed between all kinds of program
units. For control coupling, the dependencies of a given unit are limited to
those units that define subprograms. Thus control fan-out coupling is reported
for all units, but control fan-in coupling is only reported for units
that define subprograms.</p>
<p>The following simple example illustrates the difference between unit coupling
and control coupling metrics:</p>
<blockquote>
<div><div class="highlight-ada notranslate"><div class="highlight"><pre><span></span><span class="k">package </span><span class="nf">Lib_1</span> <span class="kr">is</span><span class="p"></span>
    <span class="k">function </span><span class="nf">F_1</span> <span class="o">(</span><span class="n">I</span> <span class="o">:</span> <span class="n">Integer</span><span class="o">)</span> <span class="kr">return</span><span class="p"> </span><span class="n">Integer</span><span class="p">;</span>
<span class="k">end </span><span class="nf">Lib_1</span><span class="p">;</span>

<span class="k">package </span><span class="nf">Lib_2</span> <span class="kr">is</span><span class="p"></span>
    <span class="kr">type</span><span class="p"> </span><span class="n">T_2</span> <span class="kr">is</span><span class="p"> </span><span class="kr">new</span><span class="p"> </span><span class="n">Integer</span><span class="p">;</span>
<span class="k">end </span><span class="nf">Lib_2</span><span class="p">;</span>

<span class="k">package body </span><span class="nf">Lib_1</span> <span class="kr">is</span><span class="p"></span>
    <span class="k">function </span><span class="nf">F_1</span> <span class="o">(</span><span class="n">I</span> <span class="o">:</span> <span class="n">Integer</span><span class="o">)</span> <span class="kr">return</span><span class="p"> </span><span class="n">Integer</span> <span class="kr">is</span><span class="p"></span>
    <span class="kr">begin</span><span class="p"></span>
       <span class="kr">return</span><span class="p"> </span><span class="n">I</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">end </span><span class="nf">F_1</span><span class="p">;</span>
<span class="k">end </span><span class="nf">Lib_1</span><span class="p">;</span>

<span class="kr">with</span><span class="nn"> Lib_2;</span> <span class="kr">use</span><span class="p"> </span><span class="n">Lib_2</span><span class="p">;</span>
<span class="k">package </span><span class="nf">Pack</span> <span class="kr">is</span><span class="p"></span>
    <span class="n">Var</span> <span class="o">:</span> <span class="n">T_2</span><span class="p">;</span>
    <span class="k">function </span><span class="nf">Fun</span> <span class="o">(</span><span class="n">I</span> <span class="o">:</span> <span class="n">Integer</span><span class="o">)</span> <span class="kr">return</span><span class="p"> </span><span class="n">Integer</span><span class="p">;</span>
<span class="k">end </span><span class="nf">Pack</span><span class="p">;</span>

<span class="kr">with</span><span class="nn"> Lib_1;</span> <span class="kr">use</span><span class="p"> </span><span class="n">Lib_1</span><span class="p">;</span>
<span class="k">package body </span><span class="nf">Pack</span> <span class="kr">is</span><span class="p"></span>
    <span class="k">function </span><span class="nf">Fun</span> <span class="o">(</span><span class="n">I</span> <span class="o">:</span> <span class="n">Integer</span><span class="o">)</span> <span class="kr">return</span><span class="p"> </span><span class="n">Integer</span> <span class="kr">is</span><span class="p"></span>
    <span class="kr">begin</span><span class="p"></span>
       <span class="kr">return</span><span class="p"> </span><span class="n">F_1</span> <span class="o">(</span><span class="n">I</span><span class="o">)</span><span class="p">;</span>
    <span class="k">end </span><span class="nf">Fun</span><span class="p">;</span>
<span class="k">end </span><span class="nf">Pack</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>If we apply <code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code> with the <code class="switch docutils literal notranslate"><span class="pre">--coupling-all</span></code> option to
these units, the result will be:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Coupling</span> <span class="n">metrics</span><span class="p">:</span>
<span class="o">=================</span>
    <span class="n">Unit</span> <span class="n">Lib_1</span> <span class="p">(</span><span class="n">C</span><span class="p">:</span>\\<span class="n">customers</span>\\<span class="mi">662</span>\\<span class="n">L406</span><span class="o">-</span><span class="mi">007</span>\\<span class="n">lib_1</span><span class="o">.</span><span class="n">ads</span><span class="p">)</span>
       <span class="n">control</span> <span class="n">fan</span><span class="o">-</span><span class="n">out</span> <span class="n">coupling</span>  <span class="p">:</span> <span class="mi">0</span>
       <span class="n">control</span> <span class="n">fan</span><span class="o">-</span><span class="ow">in</span> <span class="n">coupling</span>   <span class="p">:</span> <span class="mi">1</span>
       <span class="n">unit</span> <span class="n">fan</span><span class="o">-</span><span class="n">out</span> <span class="n">coupling</span>     <span class="p">:</span> <span class="mi">0</span>
       <span class="n">unit</span> <span class="n">fan</span><span class="o">-</span><span class="ow">in</span> <span class="n">coupling</span>      <span class="p">:</span> <span class="mi">1</span>

    <span class="n">Unit</span> <span class="n">Pack</span> <span class="p">(</span><span class="n">C</span><span class="p">:</span>\\<span class="n">customers</span>\\<span class="mi">662</span>\\<span class="n">L406</span><span class="o">-</span><span class="mi">007</span>\\<span class="n">pack</span><span class="o">.</span><span class="n">ads</span><span class="p">)</span>
       <span class="n">control</span> <span class="n">fan</span><span class="o">-</span><span class="n">out</span> <span class="n">coupling</span>  <span class="p">:</span> <span class="mi">1</span>
       <span class="n">control</span> <span class="n">fan</span><span class="o">-</span><span class="ow">in</span> <span class="n">coupling</span>   <span class="p">:</span> <span class="mi">0</span>
       <span class="n">unit</span> <span class="n">fan</span><span class="o">-</span><span class="n">out</span> <span class="n">coupling</span>     <span class="p">:</span> <span class="mi">2</span>
       <span class="n">unit</span> <span class="n">fan</span><span class="o">-</span><span class="ow">in</span> <span class="n">coupling</span>      <span class="p">:</span> <span class="mi">0</span>

    <span class="n">Unit</span> <span class="n">Lib_2</span> <span class="p">(</span><span class="n">C</span><span class="p">:</span>\\<span class="n">customers</span>\\<span class="mi">662</span>\\<span class="n">L406</span><span class="o">-</span><span class="mi">007</span>\\<span class="n">lib_2</span><span class="o">.</span><span class="n">ads</span><span class="p">)</span>
       <span class="n">control</span> <span class="n">fan</span><span class="o">-</span><span class="n">out</span> <span class="n">coupling</span>  <span class="p">:</span> <span class="mi">0</span>
       <span class="n">unit</span> <span class="n">fan</span><span class="o">-</span><span class="n">out</span> <span class="n">coupling</span>     <span class="p">:</span> <span class="mi">0</span>
       <span class="n">unit</span> <span class="n">fan</span><span class="o">-</span><span class="ow">in</span> <span class="n">coupling</span>      <span class="p">:</span> <span class="mi">1</span>
</pre></div>
</div>
</div></blockquote>
<p>The result does not contain values for object-oriented
coupling because none of the argument units contains a tagged type and
therefore none of these units can be treated as a class.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Pack</span></code> package (spec and body) depends on two
units – <code class="docutils literal notranslate"><span class="pre">Lib_1</span></code> and <code class="docutils literal notranslate"><span class="pre">Lib_2</span></code> – and so its unit fan-out coupling
is 2. Since nothing depends on it, its unit fan-in coupling is 0, as
is its control fan-in coupling. Only one of the units <code class="docutils literal notranslate"><span class="pre">Pack</span></code> depends
upon defines a subprogram, so its control fan-out coupling is 1.</p>
<p><code class="docutils literal notranslate"><span class="pre">Lib_2</span></code> depends on nothing, so its fan-out metrics are 0. It does
not define any subprograms, so it has no control fan-in metric.
One unit (<code class="docutils literal notranslate"><span class="pre">Pack</span></code>) depends on it , so its unit fan-in coupling is 1.</p>
<p><code class="docutils literal notranslate"><span class="pre">Lib_1</span></code> is similar to <code class="docutils literal notranslate"><span class="pre">Lib_2</span></code>, but it does define a subprogram.
Its control fan-in coupling is 1 (because there is one unit
depending on it).</p>
<p>When computing coupling metrics, <code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code> counts only
dependencies between units that are arguments of the <code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code>
invocation. Coupling metrics are program-wide (or project-wide) metrics, so
you should invoke <code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code> for
the complete set of sources comprising your program. This can be done
by invoking <code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code> with the corresponding project file
and with the <code class="switch docutils literal notranslate"><span class="pre">-U</span></code> option.</p>
<p>By default, all the coupling metrics are reported. You can use the following
switches to select specific syntax metrics.</p>
<span class="target" id="index-72"></span><span class="target" id="index-73"></span><span class="target" id="index-74"></span><dl class="simple" id="index-75">
<dt><code class="switch docutils literal notranslate"><span class="pre">--coupling-all</span></code></dt><dd><p>Report all the coupling metrics</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--tagged-coupling-out</span></code></dt><dd><p>Report tagged (class) fan-out coupling</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--tagged-coupling-in</span></code></dt><dd><p>Report tagged (class) fan-in coupling</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--hierarchy-coupling-out</span></code></dt><dd><p>Report hierarchy (category) fan-out coupling</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--hierarchy-coupling-in</span></code></dt><dd><p>Report hierarchy (category) fan-in coupling</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--unit-coupling-out</span></code></dt><dd><p>Report unit fan-out coupling</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--unit-coupling-in</span></code></dt><dd><p>Report unit fan-in coupling</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--control-coupling-out</span></code></dt><dd><p>Report control fan-out coupling</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--control-coupling-in</span></code></dt><dd><p>Report control fan-in coupling</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="other-gnatmetric-switches">
<span id="id18"></span><h3><span class="section-number">5.4.4. </span>Other <code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code> Switches<a class="headerlink" href="#other-gnatmetric-switches" title="Permalink to this headline">¶</a></h3>
<p>Additional <code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code> switches are as follows:</p>
<dl class="simple" id="index-76">
<dt><code class="switch docutils literal notranslate"><span class="pre">--version</span></code></dt><dd><p>Display copyright and version, then exit disregarding all other options.</p>
</dd>
</dl>
<dl class="simple" id="index-77">
<dt><code class="switch docutils literal notranslate"><span class="pre">--help</span></code></dt><dd><p>Display usage, then exit disregarding all other options.</p>
</dd>
</dl>
<dl class="simple" id="index-78">
<dt><code class="switch docutils literal notranslate"><span class="pre">-P</span> <em><span class="pre">file</span></em></code></dt><dd><p>Indicates the name of the project file that describes the set of sources
to be processed. The exact set of argument sources depends on other options
specified, see below. An aggregate project is allowed as the file parameter
only if it has exactly one non-aggregate project being aggregated.</p>
</dd>
</dl>
<dl class="simple" id="index-79">
<dt><code class="switch docutils literal notranslate"><span class="pre">-U</span></code></dt><dd><p>If a project file is specified and no argument source is explicitly
specified (either directly or by means of <code class="switch docutils literal notranslate"><span class="pre">-files</span></code> option), process
all the units of the closure of the argument project. Otherwise this option
has no effect.</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">-U</span> <em><span class="pre">main_unit</span></em></code></dt><dd><p>If a project file is specified and no argument source is explicitly
specified (either directly or by means of <code class="switch docutils literal notranslate"><span class="pre">-files</span></code> option), process
the closure of units rooted at <code class="docutils literal notranslate"><span class="pre">main_unit</span></code>. Otherwise this option
has no effect.</p>
</dd>
</dl>
<dl class="simple" id="index-80">
<dt><code class="switch docutils literal notranslate"><span class="pre">-X</span><em><span class="pre">name</span></em><span class="pre">=</span><em><span class="pre">value</span></em></code></dt><dd><p>Indicates that external variable <code class="docutils literal notranslate"><span class="pre">name</span></code> in the argument project
has the value <code class="docutils literal notranslate"><span class="pre">value</span></code>. Has no effect if no project is specified.</p>
</dd>
</dl>
<dl class="simple" id="index-81">
<dt><code class="switch docutils literal notranslate"><span class="pre">--RTS=</span><em><span class="pre">rts-path</span></em></code></dt><dd><p>Specifies the default location of the runtime library. Same meaning as the
equivalent <code class="docutils literal notranslate"><span class="pre">gnatmake</span></code> flag (see <a class="reference internal" href="building_executable_programs_with_gnat.html#switches-for-gnatmake"><span class="std std-ref">Switches for gnatmake</span></a>).</p>
</dd>
</dl>
<dl class="simple" id="index-82">
<dt><code class="switch docutils literal notranslate"><span class="pre">--subdirs=</span><em><span class="pre">dir</span></em></code></dt><dd><p>Use the specified subdirectory of the project objects file (or of the
project file directory if the project does not specify an object directory)
for tool output files. Has no effect if no project is specified as
tool argument r if <code class="switch docutils literal notranslate"><span class="pre">--no-objects-dir</span></code> is specified.</p>
</dd>
</dl>
<dl class="simple" id="index-83">
<dt><code class="switch docutils literal notranslate"><span class="pre">--files=</span><em><span class="pre">file</span></em></code></dt><dd><p>Take as arguments the files listed in text file <code class="docutils literal notranslate"><span class="pre">file</span></code>.
Text file <code class="docutils literal notranslate"><span class="pre">file</span></code> may contain empty lines that are ignored.
Each nonempty line should contain the name of an existing file.
Several such switches may be specified simultaneously.</p>
</dd>
</dl>
<dl class="simple" id="index-84">
<dt><code class="switch docutils literal notranslate"><span class="pre">--ignore=</span><em><span class="pre">filename</span></em></code></dt><dd><p>Do not process the sources listed in a specified file.</p>
</dd>
</dl>
<dl class="simple" id="index-85">
<dt><code class="switch docutils literal notranslate"><span class="pre">--verbose</span></code></dt><dd><p>Verbose mode;
<code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code> generates version information and then
a trace of sources being processed.</p>
</dd>
</dl>
<dl class="simple" id="index-86">
<dt><code class="switch docutils literal notranslate"><span class="pre">--quiet</span></code></dt><dd><p>Quiet mode.</p>
</dd>
</dl>
<p>If a project file is specified and no argument source is explicitly
specified (either directly or by means of <code class="switch docutils literal notranslate"><span class="pre">-files</span></code> option), and no
<code class="switch docutils literal notranslate"><span class="pre">-U</span></code> is specified, then the set of processed sources is
all the immediate units of the argument project.</p>
<div class="section" id="legacy-switches">
<h4><span class="section-number">5.4.4.1. </span>Legacy Switches<a class="headerlink" href="#legacy-switches" title="Permalink to this headline">¶</a></h4>
<p>Some switches have a short form, mostly for legacy reasons,
as shown below.</p>
<dl class="simple" id="index-87">
<dt><code class="switch docutils literal notranslate"><span class="pre">-x</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--generate-xml-output</span></code></p>
</dd>
</dl>
<dl class="simple" id="index-88">
<dt><code class="switch docutils literal notranslate"><span class="pre">-xs</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--generate-xml-schema</span></code></p>
</dd>
</dl>
<dl class="simple" id="index-89">
<dt><code class="switch docutils literal notranslate"><span class="pre">-nt</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--no-text-output</span></code></p>
</dd>
</dl>
<dl class="simple" id="index-90">
<dt><code class="switch docutils literal notranslate"><span class="pre">-d</span> <em><span class="pre">output-dir</span></em></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--output-dir</span></code></p>
</dd>
</dl>
<dl class="simple" id="index-91">
<dt><code class="switch docutils literal notranslate"><span class="pre">-o</span> <em><span class="pre">file-suffix</span></em></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--output-suffix</span></code></p>
</dd>
</dl>
<dl class="simple" id="index-92">
<dt><code class="switch docutils literal notranslate"><span class="pre">-og</span> <em><span class="pre">file-name</span></em></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--global-file-name</span></code></p>
</dd>
</dl>
<dl class="simple" id="index-93">
<dt><code class="switch docutils literal notranslate"><span class="pre">-ox</span> <em><span class="pre">file-name</span></em></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--xml-file-name</span></code></p>
</dd>
</dl>
<dl class="simple" id="index-94">
<dt><code class="switch docutils literal notranslate"><span class="pre">-sfn</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--short-file-names</span></code></p>
</dd>
</dl>
<dl class="simple" id="index-95">
<dt><code class="switch docutils literal notranslate"><span class="pre">-W</span><em><span class="pre">e</span></em></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--wide-character-encoding=</span><em><span class="pre">e</span></em></code></p>
</dd>
</dl>
<dl class="simple" id="index-96">
<dt><code class="switch docutils literal notranslate"><span class="pre">-nolocal</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--no-local-metrics</span></code></p>
</dd>
</dl>
<dl class="simple" id="index-97">
<dt><code class="switch docutils literal notranslate"><span class="pre">-ne</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--no-treat-exit-as-goto</span></code></p>
</dd>
</dl>
<dl class="simple" id="index-98">
<dt><code class="switch docutils literal notranslate"><span class="pre">-files</span> <em><span class="pre">filename</span></em></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--files</span></code></p>
</dd>
</dl>
<dl class="simple" id="index-99">
<dt><code class="switch docutils literal notranslate"><span class="pre">-v</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--verbose</span></code></p>
</dd>
</dl>
<dl class="simple" id="index-100">
<dt><code class="switch docutils literal notranslate"><span class="pre">-q</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--quiet</span></code></p>
</dd>
</dl>
</div>
</div>
</div>
<div class="section" id="the-gnat-pretty-printer-gnatpp">
<span id="id19"></span><h2><span class="section-number">5.5. </span>The GNAT Pretty Printer <code class="docutils literal notranslate"><span class="pre">gnatpp</span></code><a class="headerlink" href="#the-gnat-pretty-printer-gnatpp" title="Permalink to this headline">¶</a></h2>
<span class="target" id="index-101"></span><p id="index-102">The <code class="docutils literal notranslate"><span class="pre">gnatpp</span></code> tool is a utility for source reformatting / pretty
printing. It takes an Ada source file as input and generates a
reformatted version as output. You can specify various style
directives via switches; e.g., identifier case conventions, rules of
indentation, and comment layout.</p>
<p><code class="docutils literal notranslate"><span class="pre">gnatpp</span></code> is a project-aware tool
(see <a class="reference internal" href="#using-project-files-with-gnat-tools"><span class="std std-ref">Using Project Files with GNAT Tools</span></a> for a description of
the project-related switches). The project file package that can specify
<code class="docutils literal notranslate"><span class="pre">gnatpp</span></code> switches is named <code class="docutils literal notranslate"><span class="pre">Pretty_Printer</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">gnatpp</span></code> cannot process sources that contain preprocessing
directives.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">gnatpp</span></code> command has the form</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ gnatpp [ switches ] filename
</pre></div>
</div>
</div></blockquote>
<p>where</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">switches</span></code> is an optional sequence of switches defining such properties as
the formatting rules, the source search path, and the destination for the
output source file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">filename</span></code> is the name of the source file to reformat; wildcards
or several file names on the same gnatpp command are allowed. The
file name may contain path information; it does not have to follow
the GNAT file naming rules</p>
<p>Note that it is no longer necessary to specify the Ada language version;
<code class="docutils literal notranslate"><span class="pre">gnatpp</span></code> can process Ada source code written in any version from
Ada 83 onward without specifying any language version switch.</p>
</li>
</ul>
<div class="section" id="switches-for-gnatpp">
<span id="id20"></span><h3><span class="section-number">5.5.1. </span>Switches for <code class="docutils literal notranslate"><span class="pre">gnatpp</span></code><a class="headerlink" href="#switches-for-gnatpp" title="Permalink to this headline">¶</a></h3>
<p>The following subsections describe the various switches accepted by
<code class="docutils literal notranslate"><span class="pre">gnatpp</span></code>, organized by category.</p>
<p>You specify a switch by supplying a name and generally also a value.
In many cases the values for a switch with a given name are incompatible with
each other
(for example the switch that controls the casing of a reserved word may have
exactly one value: upper case, lower case, or
mixed case) and thus exactly one such switch can be in effect for an
invocation of <code class="docutils literal notranslate"><span class="pre">gnatpp</span></code>.
If more than one is supplied, the last one is used.
However, some values for the same switch are mutually compatible.
You may supply several such switches to <code class="docutils literal notranslate"><span class="pre">gnatpp</span></code>, but then
each must be specified in full, with both the name and the value.
Abbreviated forms (the name appearing once, followed by each value) are
not permitted.</p>
<div class="section" id="alignment-control">
<span id="id21"></span><h4><span class="section-number">5.5.1.1. </span>Alignment Control<a class="headerlink" href="#alignment-control" title="Permalink to this headline">¶</a></h4>
<p id="index-103">Programs can be easier to read if certain constructs are vertically aligned.
By default, alignment of the following constructs is set ON:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">:</span></code> in declarations,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">:=</span></code> in initializations in declarations,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">:=</span></code> in assignment statements,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">=&gt;</span></code> in associations, and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">at</span></code> keywords in the component clauses in record representation clauses.</p></li>
</ul>
</div></blockquote>
<p>In addition, <code class="docutils literal notranslate"><span class="pre">in</span></code> and <code class="docutils literal notranslate"><span class="pre">out</span></code> in parameter specifications are lined up.</p>
<span class="target" id="index-104"></span><span class="target" id="index-105"></span><dl class="simple" id="index-106">
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-alignment</span></code></dt><dd><p>Set alignment to OFF</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--alignment</span></code></dt><dd><p>Set alignment to ON</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-align-modes</span></code></dt><dd><p>Do not line up <code class="docutils literal notranslate"><span class="pre">in</span></code> and <code class="docutils literal notranslate"><span class="pre">out</span></code> in parameter specifications.</p>
</dd>
</dl>
</div>
<div class="section" id="casing-control">
<span id="id22"></span><h4><span class="section-number">5.5.1.2. </span>Casing Control<a class="headerlink" href="#casing-control" title="Permalink to this headline">¶</a></h4>
<p id="index-107"><code class="docutils literal notranslate"><span class="pre">gnatpp</span></code> allows you to specify the casing for reserved words,
pragma names, attribute designators and identifiers.
For identifiers you may define a
general rule for name casing but also override this rule
via a set of dictionary files.</p>
<p>Three types of casing are supported: lower case, upper case, and mixed case.
‘Mixed case’ means that the first letter, and also each letter immediately
following an underscore, are converted to their uppercase forms;
all the other letters are converted to their lowercase forms.</p>
<p>(Note: the casing switches are not yet fully supported in the
libadalang-based version of gnatpp.)</p>
<dl class="simple" id="index-108">
<dt><code class="switch docutils literal notranslate"><span class="pre">--name-case-as-declared</span></code></dt><dd><p>Name casing for defining occurrences are as they appear in the source file
(this is the default)</p>
</dd>
</dl>
<dl class="simple" id="index-109">
<dt><code class="switch docutils literal notranslate"><span class="pre">--name-upper-case</span></code></dt><dd><p>Names are in upper case</p>
</dd>
</dl>
<dl class="simple" id="index-110">
<dt><code class="switch docutils literal notranslate"><span class="pre">--name-lower-case</span></code></dt><dd><p>Names are in lower case</p>
</dd>
</dl>
<dl class="simple" id="index-111">
<dt><code class="switch docutils literal notranslate"><span class="pre">--name-mixed-case</span></code></dt><dd><p>Names are in mixed case</p>
</dd>
</dl>
<dl class="simple" id="index-112">
<dt><code class="switch docutils literal notranslate"><span class="pre">--attribute-lower-case</span></code></dt><dd><p>Attribute designators are lower case</p>
</dd>
</dl>
<dl class="simple" id="index-113">
<dt><code class="switch docutils literal notranslate"><span class="pre">--attribute-upper-case</span></code></dt><dd><p>Attribute designators are upper case</p>
</dd>
</dl>
<dl class="simple" id="index-114">
<dt><code class="switch docutils literal notranslate"><span class="pre">--attribute-mixed-case</span></code></dt><dd><p>Attribute designators are mixed case (this is the default)</p>
</dd>
</dl>
<dl class="simple" id="index-115">
<dt><code class="switch docutils literal notranslate"><span class="pre">--keyword-lower-case</span></code></dt><dd><p>Keywords (technically, these are known in Ada as <em>reserved words</em>) are
lower case (this is the default)</p>
</dd>
</dl>
<dl class="simple" id="index-116">
<dt><code class="switch docutils literal notranslate"><span class="pre">--keyword-upper-case</span></code></dt><dd><p>Keywords are upper case</p>
</dd>
</dl>
<dl class="simple" id="index-117">
<dt><code class="switch docutils literal notranslate"><span class="pre">--enum-case-as-declared</span></code></dt><dd><p>Enumeration literal casing for defining occurrences are as they appear in the
source file. Overrides -n casing setting.</p>
</dd>
</dl>
<dl class="simple" id="index-118">
<dt><code class="switch docutils literal notranslate"><span class="pre">--enum-upper-case</span></code></dt><dd><p>Enumeration literals are in upper case. Overrides -n casing
setting.</p>
</dd>
</dl>
<dl class="simple" id="index-119">
<dt><code class="switch docutils literal notranslate"><span class="pre">--enum-lower-case</span></code></dt><dd><p>Enumeration literals are in lower case. Overrides -n casing
setting.</p>
</dd>
</dl>
<dl class="simple" id="index-120">
<dt><code class="switch docutils literal notranslate"><span class="pre">--enum-mixed-case</span></code></dt><dd><p>Enumeration literals are in mixed case. Overrides -n casing
setting.</p>
</dd>
</dl>
<dl class="simple" id="index-121">
<dt><code class="switch docutils literal notranslate"><span class="pre">--type-case-as-declared</span></code></dt><dd><p>Names introduced by type and subtype declarations are always
cased as they appear in the declaration in the source file.
Overrides -n casing setting.</p>
</dd>
</dl>
<dl class="simple" id="index-122">
<dt><code class="switch docutils literal notranslate"><span class="pre">--type-upper-case</span></code></dt><dd><p>Names introduced by type and subtype declarations are always in
upper case. Overrides -n casing setting.</p>
</dd>
</dl>
<dl class="simple" id="index-123">
<dt><code class="switch docutils literal notranslate"><span class="pre">--type-lower-case</span></code></dt><dd><p>Names introduced by type and subtype declarations are always in
lower case. Overrides -n casing setting.</p>
</dd>
</dl>
<dl class="simple" id="index-124">
<dt><code class="switch docutils literal notranslate"><span class="pre">--type-mixed-case</span></code></dt><dd><p>Names introduced by type and subtype declarations are always in
mixed case. Overrides -n casing setting.</p>
</dd>
</dl>
<dl class="simple" id="index-125">
<dt><code class="switch docutils literal notranslate"><span class="pre">--number-upper-case</span></code></dt><dd><p>Names introduced by number declarations are always in
upper case. Overrides -n casing setting.</p>
</dd>
</dl>
<dl class="simple" id="index-126">
<dt><code class="switch docutils literal notranslate"><span class="pre">--number-lower-case</span></code></dt><dd><p>Names introduced by number declarations are always in
lower case. Overrides -n casing setting.</p>
</dd>
</dl>
<dl class="simple" id="index-127">
<dt><code class="switch docutils literal notranslate"><span class="pre">--number-mixed-case</span></code></dt><dd><p>Names introduced by number declarations are always in
mixed case. Overrides -n casing setting.</p>
</dd>
</dl>
<dl class="simple" id="index-128">
<dt><code class="switch docutils literal notranslate"><span class="pre">--pragma-lower-case</span></code></dt><dd><p>Pragma names are lower case</p>
</dd>
</dl>
<dl class="simple" id="index-129">
<dt><code class="switch docutils literal notranslate"><span class="pre">--pragma-upper-case</span></code></dt><dd><p>Pragma names are upper case</p>
</dd>
</dl>
<dl class="simple" id="index-130">
<dt><code class="switch docutils literal notranslate"><span class="pre">--pragma-mixed-case</span></code></dt><dd><p>Pragma names are mixed case (this is the default)</p>
</dd>
</dl>
<dl class="simple" id="index-131">
<dt><code class="switch docutils literal notranslate"><span class="pre">--syntax-only</span></code></dt><dd><p>Disable the semantic analysis (name resolution) done by libadalang.
This means gnatpp will not be able to support any of the
“as-declared” switches.</p>
</dd>
</dl>
<dl id="index-132">
<dt><code class="switch docutils literal notranslate"><span class="pre">--dictionary=</span><em><span class="pre">file</span></em></code></dt><dd><p>Use <code class="docutils literal notranslate"><span class="pre">file</span></code> as a <em>dictionary file</em> that defines
the casing for a set of specified names,
thereby overriding the effect on these names by
any explicit or implicit
-n switch.
To supply more than one dictionary file,
use several <code class="docutils literal notranslate"><span class="pre">--dictionary</span></code> switches.</p>
<p><code class="docutils literal notranslate"><span class="pre">gnatpp</span></code> implicitly uses a <em>default dictionary file</em>
to define the casing for the Ada predefined names and
the names declared in the GNAT libraries.</p>
</dd>
</dl>
<dl class="simple" id="index-133">
<dt><code class="switch docutils literal notranslate"><span class="pre">--dictionary=-</span></code></dt><dd><p>Do not use the default dictionary file;
instead, use the casing
defined by a <code class="docutils literal notranslate"><span class="pre">-n</span></code> switch and any explicit
dictionary file(s)</p>
</dd>
</dl>
<p>The structure of a dictionary file, and details on the conventions
used in the default dictionary file, are defined in <a class="reference internal" href="#name-casing"><span class="std std-ref">Name Casing</span></a>.</p>
<p>The <code class="switch docutils literal notranslate"><span class="pre">--dictionary=-</span></code> and
<code class="switch docutils literal notranslate"><span class="pre">--dictionary=</span><em><span class="pre">file</span></em></code> switches are mutually
compatible.</p>
<p>This group of <code class="docutils literal notranslate"><span class="pre">gnatpp</span></code> switches controls the layout of comments and
complex syntactic constructs. See <a class="reference internal" href="#formatting-comments"><span class="std std-ref">Formatting Comments</span></a> for details
on their effect.</p>
<dl class="simple" id="index-134">
<dt><code class="switch docutils literal notranslate"><span class="pre">--comments-unchanged</span></code></dt><dd><p>All comments remain unchanged.</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--comments-gnat-indentation</span></code></dt><dd><p>GNAT-style comment line indentation.
This is the default.</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--comments-gnat-beginning</span></code></dt><dd><p>GNAT-style comment beginning.</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--comments-fill</span></code></dt><dd><p>Fill comment blocks.
The default is <code class="switch docutils literal notranslate"><span class="pre">--no-comments-fill</span></code>.</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--comments-special</span></code></dt><dd><p>Keep unchanged special form comments.
The default is <code class="switch docutils literal notranslate"><span class="pre">--no-comments-special</span></code>.</p>
</dd>
</dl>
<dl class="simple" id="index-135">
<dt><code class="switch docutils literal notranslate"><span class="pre">--comments-only</span></code></dt><dd><p>Format just the comments.</p>
</dd>
</dl>
<dl class="simple" id="index-136">
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-end-id</span></code></dt><dd><p>Do not insert the name of a unit after <code class="docutils literal notranslate"><span class="pre">end</span></code>; leave whatever comes
after <code class="docutils literal notranslate"><span class="pre">end</span></code>, if anything, alone.</p>
</dd>
</dl>
<dl class="simple" id="index-137">
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-separate-is</span></code></dt><dd><p>Do not place the keyword <code class="docutils literal notranslate"><span class="pre">is</span></code> on a separate line in a subprogram body in
case if the spec occupies more than one line.</p>
</dd>
</dl>
<dl class="simple" id="index-138">
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-separate-return</span></code></dt><dd><p>In <code class="switch docutils literal notranslate"><span class="pre">--no-compact</span></code> mode, if a subprogram spec does not fit on
one line, try to place the <code class="docutils literal notranslate"><span class="pre">return</span></code> on the same line as the last
formal parameter.</p>
</dd>
</dl>
<dl class="simple" id="index-139">
<dt><code class="switch docutils literal notranslate"><span class="pre">--separate-loop</span></code></dt><dd><p>Place the keyword <code class="docutils literal notranslate"><span class="pre">loop</span></code> in FOR and WHILE loop statements
on a separate line.</p>
</dd>
</dl>
<dl class="simple" id="index-140">
<dt><code class="switch docutils literal notranslate"><span class="pre">--separate-then</span></code></dt><dd><p>Place the keyword <code class="docutils literal notranslate"><span class="pre">then</span></code> in IF statements
on a separate line.</p>
</dd>
</dl>
<dl class="simple" id="index-141">
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-separate-loop</span></code></dt><dd><p>Do not place the keyword <code class="docutils literal notranslate"><span class="pre">loop</span></code> in FOR and WHILE loop statements
on a separate line. This option is
incompatible with the <code class="switch docutils literal notranslate"><span class="pre">--separate-loop</span></code> option.</p>
</dd>
</dl>
<dl class="simple" id="index-142">
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-separate-then</span></code></dt><dd><p>Do not place the keyword <code class="docutils literal notranslate"><span class="pre">then</span></code> in IF statements
on a separate line. This option is
incompatible with the <code class="switch docutils literal notranslate"><span class="pre">--separate-then</span></code> option.</p>
</dd>
</dl>
<dl class="simple" id="index-143">
<dt><code class="switch docutils literal notranslate"><span class="pre">--separate-loop-then</span></code></dt><dd><p>Equivalent to <code class="switch docutils literal notranslate"><span class="pre">--separate-loop</span></code> <code class="switch docutils literal notranslate"><span class="pre">--separate-then</span></code>.</p>
</dd>
</dl>
<dl class="simple" id="index-144">
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-separate-loop-then</span></code></dt><dd><p>Equivalent to <code class="switch docutils literal notranslate"><span class="pre">--no-separate-loop</span></code> <code class="switch docutils literal notranslate"><span class="pre">--no-separate-then</span></code>.</p>
</dd>
</dl>
<dl class="simple" id="index-145">
<dt><code class="switch docutils literal notranslate"><span class="pre">--use-on-new-line</span></code></dt><dd><p>Start each USE clause in a context clause from a separate line.</p>
</dd>
</dl>
<dl class="simple" id="index-146">
<dt><code class="switch docutils literal notranslate"><span class="pre">--insert-blank-lines</span></code></dt><dd><p>Insert blank lines where appropriate (between bodies and other large
constructs).</p>
</dd>
</dl>
<dl class="simple" id="index-147">
<dt><code class="switch docutils literal notranslate"><span class="pre">--preserve-blank-lines</span></code></dt><dd><p>Preserve blank lines in the input. By default, gnatpp will squeeze
multiple blank lines down to one.</p>
</dd>
</dl>
<dl class="simple" id="index-148">
<dt><code class="switch docutils literal notranslate"><span class="pre">--preserve-line-breaks</span></code></dt><dd><p>Preserve line breaks in the input, to the extent possible.
By default, line breaks are also inserted at appropriate
places.</p>
</dd>
</dl>
<dl class="simple" id="index-149">
<dt><code class="switch docutils literal notranslate"><span class="pre">--source-line-breaks</span></code></dt><dd><p>Keep the line breaks from the source; do not insert or delete any
line breaks.</p>
</dd>
</dl>
<dl class="simple" id="index-150">
<dt><code class="switch docutils literal notranslate"><span class="pre">--spaces-only</span></code></dt><dd><p>Disable all formatting except for inserting and removing spaces.
This implies –source-line-breaks.</p>
</dd>
</dl>
<p>The <code class="docutils literal notranslate"><span class="pre">--comments</span></code> switches are compatible with one another, except
that the <code class="docutils literal notranslate"><span class="pre">--comments-unchanged</span></code> switch disables all other comment
formatting switches.</p>
</div>
<div class="section" id="general-text-layout-control">
<span id="id23"></span><h4><span class="section-number">5.5.1.3. </span>General Text Layout Control<a class="headerlink" href="#general-text-layout-control" title="Permalink to this headline">¶</a></h4>
<p>These switches allow control over line length and indentation.</p>
<dl class="simple" id="index-151">
<dt><code class="switch docutils literal notranslate"><span class="pre">--max-line-length=</span><em><span class="pre">nnn</span></em></code></dt><dd><p>Maximum line length, <code class="docutils literal notranslate"><span class="pre">nnn</span></code> from 32…256, the default value is 79</p>
</dd>
</dl>
<dl class="simple" id="index-152">
<dt><code class="switch docutils literal notranslate"><span class="pre">--indentation=</span><em><span class="pre">nnn</span></em></code></dt><dd><p>Indentation level, <code class="docutils literal notranslate"><span class="pre">nnn</span></code> from 1…9, the default value is 3</p>
</dd>
</dl>
<dl class="simple" id="index-153">
<dt><code class="switch docutils literal notranslate"><span class="pre">--indent-continuation=</span><em><span class="pre">nnn</span></em></code></dt><dd><p>Indentation level for continuation lines (relative to the line being
continued), <code class="docutils literal notranslate"><span class="pre">nnn</span></code> from 1…9.
The default
value is one less than the (normal) indentation level, unless the
indentation is set to 1 (in which case the default value for continuation
line indentation is also 1)</p>
</dd>
</dl>
</div>
<div class="section" id="other-formatting-options">
<span id="id24"></span><h4><span class="section-number">5.5.1.4. </span>Other Formatting Options<a class="headerlink" href="#other-formatting-options" title="Permalink to this headline">¶</a></h4>
<p>These switches control other formatting not listed above.</p>
<dl class="simple" id="index-154">
<dt><code class="switch docutils literal notranslate"><span class="pre">--decimal-grouping=</span><em><span class="pre">n</span></em></code></dt><dd><p>Put underscores in decimal literals (numeric literals without a base)
every <code class="docutils literal notranslate"><span class="pre">n</span></code> characters. If a literal already has one or more
underscores, it is not modified. For example, with
<code class="docutils literal notranslate"><span class="pre">--decimal-grouping=3</span></code>, <code class="docutils literal notranslate"><span class="pre">1000000</span></code> will be changed to
<code class="docutils literal notranslate"><span class="pre">1_000_000</span></code>.</p>
</dd>
</dl>
<dl class="simple" id="index-155">
<dt><code class="switch docutils literal notranslate"><span class="pre">--based-grouping=</span><em><span class="pre">n</span></em></code></dt><dd><p>Same as <code class="docutils literal notranslate"><span class="pre">--decimal-grouping</span></code>, but for based literals. For
example, with <code class="docutils literal notranslate"><span class="pre">--based-grouping=4</span></code>, <code class="docutils literal notranslate"><span class="pre">16#0001FFFE#</span></code> will be
changed to <code class="docutils literal notranslate"><span class="pre">16#0001_FFFE#</span></code>.</p>
</dd>
</dl>
<dl class="simple" id="index-156">
<dt><code class="switch docutils literal notranslate"><span class="pre">--split-line-before-record</span></code></dt><dd><p>Split the line just before <code class="docutils literal notranslate"><span class="pre">record</span></code> in a record type declaration.</p>
</dd>
</dl>
<dl class="simple" id="index-157">
<dt><code class="switch docutils literal notranslate"><span class="pre">--indent-named-statements</span></code></dt><dd><p>Named block and loop statements are indented with respect to
the name.</p>
</dd>
</dl>
<dl class="simple" id="index-158">
<dt><code class="switch docutils literal notranslate"><span class="pre">--split-line-before-op</span></code></dt><dd><p>If it is necessary to split a line at a binary operator, by default
the line is split after the operator. With this option, it is split
before the operator.</p>
</dd>
</dl>
<dl class="simple" id="index-159">
<dt><code class="switch docutils literal notranslate"><span class="pre">--RM-style-spacing</span></code></dt><dd><p>Do not insert an extra blank before various occurrences of
‘(‘ and ‘:’. Alignment is off by default in this mode;
use <code class="switch docutils literal notranslate"><span class="pre">--alignment</span></code> to turn it on.</p>
</dd>
</dl>
<span class="target" id="index-160"></span><dl id="index-161">
<dt><code class="switch docutils literal notranslate"><span class="pre">--compact</span></code></dt><dd><p>This is the default. In calls and similar, this packs as many
subexpressions on the same line as possible. Example:</p>
<div class="highlight-ada notranslate"><div class="highlight"><pre><span></span><span class="n">Some_Procedure</span>
  <span class="o">(</span><span class="n">Short_One</span><span class="p">,</span> <span class="n">Another_Short_One</span><span class="p">,</span>
   <span class="n">A_Very_Very_Very_Very_Very_Very_Very_Very_Long_One</span><span class="o">)</span><span class="p">;</span>
</pre></div>
</div>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-compact</span></code></dt><dd><p>Turns off –compact mode. In calls and similar, if it is necessary
to split a line between two subexpressions (because otherwise the
construct would exceed –max-line-length), then all such subexpressions
are placed on separate lines. Example:</p>
<div class="highlight-ada notranslate"><div class="highlight"><pre><span></span><span class="n">Some_Procedure</span>
  <span class="o">(</span><span class="n">Short_One</span><span class="p">,</span>
   <span class="n">Another_Short_One</span><span class="p">,</span>
   <span class="n">A_Very_Very_Very_Very_Very_Very_Very_Very_Long_One</span><span class="o">)</span><span class="p">;</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="simple" id="index-162">
<dt><code class="switch docutils literal notranslate"><span class="pre">--call-threshold=</span><em><span class="pre">nnn</span></em></code></dt><dd><p>If the number of parameter associations is greater than <code class="docutils literal notranslate"><span class="pre">nnn</span></code> and if at
least one association uses named notation, start each association from
a new line. If <code class="docutils literal notranslate"><span class="pre">nnn</span></code> is 0, no check for the number of associations
is made; this is the default.</p>
</dd>
</dl>
<dl class="simple" id="index-163">
<dt><code class="switch docutils literal notranslate"><span class="pre">--par-threshold=</span><em><span class="pre">nnn</span></em></code></dt><dd><p>If the number of parameter specifications is greater than <code class="docutils literal notranslate"><span class="pre">nnn</span></code>
(or equal to <code class="docutils literal notranslate"><span class="pre">nnn</span></code> in case of a function), start each specification from
a new line. If <code class="docutils literal notranslate"><span class="pre">nnn</span></code> is 0, and <code class="switch docutils literal notranslate"><span class="pre">--no-separate-is</span></code> was not specified, then
the <code class="docutils literal notranslate"><span class="pre">is</span></code> is placed on a separate line. This feature is disabled by default.</p>
</dd>
</dl>
<dl class="simple" id="index-164">
<dt><code class="switch docutils literal notranslate"><span class="pre">--vertical-enum-types</span></code></dt><dd><p>Format enumeration type declarations “vertically”, e.g. each
enumeration literal goes on a separate line.</p>
</dd>
</dl>
<dl class="simple" id="index-165">
<dt><code class="switch docutils literal notranslate"><span class="pre">--vertical-array-types</span></code></dt><dd><p>Format array type declarations “vertically”, e.g. for
multidimensional arrays, each index_subtype_definition or
discrete_subtype_definition goes on a separate line.</p>
</dd>
</dl>
<dl class="simple" id="index-166">
<dt><code class="switch docutils literal notranslate"><span class="pre">--vertical-named-aggregates</span></code></dt><dd><p>Format aggregates “vertically” if named notation is used for all
component_associations, e.g. each component_association
goes on a separate line.</p>
</dd>
</dl>
<dl class="simple" id="index-167">
<dt><code class="switch docutils literal notranslate"><span class="pre">--vertical-case-alternatives</span></code></dt><dd><p>Format case statements, case expressions, and variant parts with
additional line breaks.</p>
</dd>
</dl>
</div>
<div class="section" id="setting-the-source-search-path">
<span id="id25"></span><h4><span class="section-number">5.5.1.5. </span>Setting the Source Search Path<a class="headerlink" href="#setting-the-source-search-path" title="Permalink to this headline">¶</a></h4>
<p>To define the search path for the input source file, <code class="docutils literal notranslate"><span class="pre">gnatpp</span></code>
uses the same switches as the GNAT compiler, with the same effects:</p>
<p id="index-168"><code class="switch docutils literal notranslate"><span class="pre">-I</span><em><span class="pre">dir</span></em></code></p>
<p id="index-169"><code class="switch docutils literal notranslate"><span class="pre">-I-</span></code></p>
<p id="index-170"><code class="switch docutils literal notranslate"><span class="pre">-gnatec=</span><em><span class="pre">path</span></em></code></p>
</div>
<div class="section" id="output-file-control-gnatpp">
<span id="id26"></span><h4><span class="section-number">5.5.1.6. </span>Output File Control<a class="headerlink" href="#output-file-control-gnatpp" title="Permalink to this headline">¶</a></h4>
<p>By default the output overwrites the input file.
The output may be redirected by the following switches:</p>
<dl class="simple" id="index-171">
<dt><code class="switch docutils literal notranslate"><span class="pre">--replace</span></code></dt><dd><p>This is the default.
Replace the input source file with the reformatted output without
creating any backup copy of the input source.</p>
</dd>
</dl>
<dl class="simple" id="index-172">
<dt><code class="switch docutils literal notranslate"><span class="pre">--output-dir=</span><em><span class="pre">dir</span></em></code></dt><dd><p>Generate output file in directory <code class="file docutils literal notranslate"><span class="pre">dir</span></code> with the same name as
the input file. If <code class="file docutils literal notranslate"><span class="pre">dir</span></code> is the same as the directory
containing the input file, the input file is not processed; use
<code class="docutils literal notranslate"><span class="pre">--replace</span></code> if you want to update the input file in
place.</p>
</dd>
</dl>
<dl class="simple" id="index-173">
<dt><code class="switch docutils literal notranslate"><span class="pre">--pipe</span></code></dt><dd><p>Send the output to <code class="docutils literal notranslate"><span class="pre">Standard_Output</span></code></p>
</dd>
</dl>
<dl class="simple" id="index-174">
<dt><code class="switch docutils literal notranslate"><span class="pre">--output=</span><em><span class="pre">output_file</span></em></code></dt><dd><p>Write the output into <code class="docutils literal notranslate"><span class="pre">output_file</span></code>.
If <code class="docutils literal notranslate"><span class="pre">output_file</span></code> already exists, <code class="docutils literal notranslate"><span class="pre">gnatpp</span></code> terminates without
reading or processing the input file.</p>
</dd>
</dl>
<dl class="simple" id="index-175">
<dt><code class="switch docutils literal notranslate"><span class="pre">--output-force=</span><em><span class="pre">output_file</span></em></code></dt><dd><p>Write the output into <code class="docutils literal notranslate"><span class="pre">output_file</span></code>, overwriting the existing file
(if one is present).</p>
</dd>
</dl>
<dl class="simple" id="index-176">
<dt><code class="switch docutils literal notranslate"><span class="pre">--replace-backup</span></code></dt><dd><p>Replace the input source file with the reformatted output, and copy the
original input source into the file whose name is obtained by appending the
<code class="file docutils literal notranslate"><span class="pre">.npp</span></code> suffix to the name of the input file.
If a file with this name already exists, <code class="docutils literal notranslate"><span class="pre">gnatpp</span></code> terminates without
reading or processing the input file.</p>
</dd>
</dl>
<dl class="simple" id="index-177">
<dt><code class="switch docutils literal notranslate"><span class="pre">--replace-force-backup</span></code></dt><dd><p>Like <code class="docutils literal notranslate"><span class="pre">--replace-backup</span></code> except that if the file with the specified name
already exists, it is overwritten.</p>
</dd>
</dl>
<dl id="index-178">
<dt><code class="switch docutils literal notranslate"><span class="pre">--eol=</span><em><span class="pre">xxx</span></em></code></dt><dd><p>Specifies the line-ending style of the reformatted output file. The
<code class="docutils literal notranslate"><span class="pre">xxx</span></code> string specified with the switch may be:</p>
<ul class="simple">
<li><p><em>dos</em> - MS DOS style, lines end with CR LF characters*</p></li>
<li><p><em>crlf</em>  - the same as <em>dos</em></p></li>
<li><p><em>unix</em> - UNIX style, lines end with LF character*</p></li>
<li><p><em>lf</em> -  the same as <em>unix</em></p></li>
</ul>
<p>The default is to use the same end-of-line convention as the input.</p>
</dd>
</dl>
<dl class="simple" id="index-179">
<dt><code class="switch docutils literal notranslate"><span class="pre">--wide-character-encoding=</span><em><span class="pre">e</span></em></code></dt><dd><p>Specify the wide character encoding method for the input and output
files. <code class="docutils literal notranslate"><span class="pre">e</span></code> is one of the following:</p>
<ul class="simple">
<li><p><em>8</em> - UTF-8 encoding</p></li>
<li><p><em>b</em> - Brackets encoding (default value)</p></li>
</ul>
</dd>
</dl>
<p>Options <code class="docutils literal notranslate"><span class="pre">--output-file</span></code> and <code class="docutils literal notranslate"><span class="pre">--output-force</span></code> are allowed only if
the call to gnatpp contains only one file to reformat.</p>
<p>Option <code class="docutils literal notranslate"><span class="pre">--eol</span></code> and <code class="docutils literal notranslate"><span class="pre">--wide-character-encoding</span></code> cannot be used together
with the <code class="docutils literal notranslate"><span class="pre">--pipe</span></code> option.</p>
</div>
<div class="section" id="other-gnatpp-switches">
<span id="id27"></span><h4><span class="section-number">5.5.1.7. </span>Other <code class="docutils literal notranslate"><span class="pre">gnatpp</span></code> Switches<a class="headerlink" href="#other-gnatpp-switches" title="Permalink to this headline">¶</a></h4>
<p>The additional <code class="docutils literal notranslate"><span class="pre">gnatpp</span></code> switches are defined in this subsection.</p>
<dl class="simple" id="index-180">
<dt><code class="switch docutils literal notranslate"><span class="pre">--version</span></code></dt><dd><p>Display copyright and version, then exit disregarding all other options.</p>
</dd>
</dl>
<dl class="simple" id="index-181">
<dt><code class="switch docutils literal notranslate"><span class="pre">--help</span></code></dt><dd><p>Display usage, then exit disregarding all other options.</p>
</dd>
</dl>
<dl class="simple" id="index-182">
<dt><code class="switch docutils literal notranslate"><span class="pre">-P</span> <em><span class="pre">file</span></em></code></dt><dd><p>Indicates the name of the project file that describes the set of sources
to be processed. The exact set of argument sources depends on other options
specified; see below.</p>
</dd>
</dl>
<dl class="simple" id="index-183">
<dt><code class="switch docutils literal notranslate"><span class="pre">-U</span></code></dt><dd><p>If a project file is specified and no argument source is explicitly
specified (either directly or by means of <code class="docutils literal notranslate"><span class="pre">--files</span></code> option), process
all the units of the closure of the argument project. Otherwise this option
has no effect.</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">-U</span> <em><span class="pre">main_unit</span></em></code></dt><dd><p>If a project file is specified and no argument source is explicitly
specified (either directly or by means of <code class="docutils literal notranslate"><span class="pre">--files</span></code> option), process
the closure of units rooted at <code class="docutils literal notranslate"><span class="pre">main_unit</span></code>. Otherwise this option
has no effect.</p>
</dd>
</dl>
<dl class="simple" id="index-184">
<dt><code class="switch docutils literal notranslate"><span class="pre">-X</span><em><span class="pre">name</span></em><span class="pre">=</span><em><span class="pre">value</span></em></code></dt><dd><p>Indicates that external variable <code class="docutils literal notranslate"><span class="pre">name</span></code> in the argument project
has the value <code class="docutils literal notranslate"><span class="pre">value</span></code>. Has no effect if no project is specified.</p>
</dd>
</dl>
<dl class="simple" id="index-185">
<dt><code class="switch docutils literal notranslate"><span class="pre">--RTS=</span><em><span class="pre">rts-path</span></em></code></dt><dd><p>Specifies the default location of the runtime library. Same meaning as the
equivalent <code class="docutils literal notranslate"><span class="pre">gnatmake</span></code> flag (<a class="reference internal" href="building_executable_programs_with_gnat.html#switches-for-gnatmake"><span class="std std-ref">Switches for gnatmake</span></a>).</p>
</dd>
</dl>
<dl class="simple" id="index-186">
<dt><code class="switch docutils literal notranslate"><span class="pre">--incremental</span></code></dt><dd><p>Incremental processing on a per-file basis. Source files are only
processed if they have been modified, or if files they depend on have
been modified. This is similar to the way gnatmake/gprbuild only
compiles files that need to be recompiled. A project file is required
in this mode, and the gnat driver (as in <em>gnat pretty</em>) is not
supported.
(Note: this switch is not yet supported in the libadalang-based
version of gnatpp.)</p>
</dd>
</dl>
<dl class="simple" id="index-187">
<dt><code class="switch docutils literal notranslate"><span class="pre">--pp-off=</span><em><span class="pre">xxx</span></em></code></dt><dd><p>Use <code class="switch docutils literal notranslate"><span class="pre">--xxx</span></code> as the command to turn off pretty printing, instead
of the default <code class="docutils literal notranslate"><span class="pre">--!pp</span> <span class="pre">off</span></code>.</p>
</dd>
</dl>
<dl class="simple" id="index-188">
<dt><code class="switch docutils literal notranslate"><span class="pre">--pp-on=</span><em><span class="pre">xxx</span></em></code></dt><dd><p>Use <code class="switch docutils literal notranslate"><span class="pre">--xxx</span></code> as the command to turn pretty printing back on, instead
of the default <code class="docutils literal notranslate"><span class="pre">--!pp</span> <span class="pre">on</span></code>.</p>
</dd>
</dl>
<dl class="simple" id="index-189">
<dt><code class="switch docutils literal notranslate"><span class="pre">--files=</span><em><span class="pre">filename</span></em></code></dt><dd><p>Take as arguments the files listed in text file <code class="docutils literal notranslate"><span class="pre">file</span></code>.
Text file <code class="docutils literal notranslate"><span class="pre">file</span></code> may contain empty lines that are ignored.
Each nonempty line should contain the name of an existing file.
Several such switches may be specified simultaneously.</p>
</dd>
</dl>
<dl class="simple" id="index-190">
<dt><code class="switch docutils literal notranslate"><span class="pre">--ignore=</span><em><span class="pre">filename</span></em></code></dt><dd><p>Do not process the sources listed in a specified file. This option cannot
be used in incremental mode.</p>
</dd>
</dl>
<dl class="simple" id="index-191">
<dt><code class="switch docutils literal notranslate"><span class="pre">--jobs=</span><em><span class="pre">n</span></em></code></dt><dd><p>With <code class="docutils literal notranslate"><span class="pre">--incremental</span></code>, use <em>n</em> <code class="docutils literal notranslate"><span class="pre">gnatpp</span></code> processes to perform
pretty printing in parallel. If <em>n</em> is 0, then the maximum number
processes is the number of core processors on the platform.</p>
</dd>
</dl>
<dl class="simple" id="index-192">
<dt><code class="switch docutils literal notranslate"><span class="pre">--verbose</span></code></dt><dd><p>Verbose mode</p>
</dd>
</dl>
<dl class="simple" id="index-193">
<dt><code class="switch docutils literal notranslate"><span class="pre">--quiet</span></code></dt><dd><p>Quiet mode</p>
</dd>
</dl>
<p>If a project file is specified and no argument source is explicitly
specified (either directly or by means of <code class="docutils literal notranslate"><span class="pre">--files</span></code> option), and no
<code class="docutils literal notranslate"><span class="pre">-U</span></code> is specified, then the set of processed sources is
all the immediate units of the argument project.</p>
</div>
</div>
<div class="section" id="formatting-rules">
<span id="id28"></span><h3><span class="section-number">5.5.2. </span>Formatting Rules<a class="headerlink" href="#formatting-rules" title="Permalink to this headline">¶</a></h3>
<p>The following subsections show how <code class="docutils literal notranslate"><span class="pre">gnatpp</span></code> treats white space,
comments, program layout, and name casing.
They provide detailed descriptions of the switches shown above.</p>
<div class="section" id="disabling-pretty-printing">
<span id="id29"></span><h4><span class="section-number">5.5.2.1. </span>Disabling Pretty Printing<a class="headerlink" href="#disabling-pretty-printing" title="Permalink to this headline">¶</a></h4>
<p>Pretty printing is highly heuristic in nature, and sometimes doesn’t
do exactly what you want. If you wish to format a certain region of
code by hand, you can turn off pretty printing in that region by
surrounding it with special comments that start with <code class="docutils literal notranslate"><span class="pre">--!pp</span> <span class="pre">off</span></code>
and <code class="docutils literal notranslate"><span class="pre">--!pp</span> <span class="pre">on</span></code>. The text in that region will then be reproduced
verbatim in the output with no formatting.</p>
<p>To disable pretty printing for the whole file, put <code class="docutils literal notranslate"><span class="pre">--!pp</span> <span class="pre">off</span></code> at
the top, with no following <code class="docutils literal notranslate"><span class="pre">--!pp</span> <span class="pre">on</span></code>.</p>
<p>The comments must appear on a line by themselves, with nothing
preceding except spaces. The initial text of the comment must be
exactly <code class="docutils literal notranslate"><span class="pre">--!pp</span> <span class="pre">off</span></code> or <code class="docutils literal notranslate"><span class="pre">--!pp</span> <span class="pre">on</span></code> (case sensitive), but may
be followed by arbitrary additional text. For example:</p>
<blockquote>
<div><div class="highlight-ada notranslate"><div class="highlight"><pre><span></span><span class="k">package </span><span class="nf">Interrupts</span> <span class="kr">is</span><span class="p"></span>
   <span class="c">--!pp off -- turn off pretty printing so &quot;Interrupt_Kind&quot; lines up</span>
   <span class="kr">type</span><span class="p"> </span>           <span class="n">Interrupt_Kind</span> <span class="kr">is</span><span class="p"></span>
     <span class="o">(</span><span class="n">Asynchronous_Interrupt_Kind</span><span class="p">,</span>
       <span class="n">Synchronous_Interrupt_Kind</span><span class="p">,</span>
             <span class="n">Green_Interrupt_Kind</span><span class="o">)</span><span class="p">;</span>
   <span class="c">--!pp on -- reenable pretty printing</span>
   <span class="o">...</span>
</pre></div>
</div>
</div></blockquote>
<p>You can specify different comment strings using the <code class="docutils literal notranslate"><span class="pre">--pp-off</span></code>
and <code class="docutils literal notranslate"><span class="pre">--pp-on</span></code> switches. For example, if you say:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ gnatpp --pp-off=&#39; pp-&#39; *.ad?
</pre></div>
</div>
</div></blockquote>
<p>then gnatpp will recognize comments of the form
<code class="docutils literal notranslate"><span class="pre">--</span> <span class="pre">pp-</span></code> instead of <code class="docutils literal notranslate"><span class="pre">--!pp</span> <span class="pre">off</span></code> for disabling pretty
printing. Note that the leading <code class="docutils literal notranslate"><span class="pre">--</span></code> of the comment is not
included in the argument to these switches.</p>
</div>
<div class="section" id="white-space-and-empty-lines">
<span id="id30"></span><h4><span class="section-number">5.5.2.2. </span>White Space and Empty Lines<a class="headerlink" href="#white-space-and-empty-lines" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">gnatpp</span></code> does not have an option to control space characters.
It will add or remove spaces according to the style illustrated by the
examples in the <cite>Ada Reference Manual</cite>.
The output file will contain no lines with trailing white space.</p>
<p>By default, a sequence of one or more blank lines in the input is
converted to a single blank line in the output; multiple blank lines
are squeezed down to one.
The <code class="docutils literal notranslate"><span class="pre">--preserve-blank-lines</span></code> option
turns off the squeezing; each blank line in the input is copied
to the output.
The <code class="docutils literal notranslate"><span class="pre">--insert-blank-lines</span></code> option
causes additional blank lines to be inserted if not already
present in the input (e.g. between bodies).</p>
</div>
<div class="section" id="formatting-comments">
<span id="id31"></span><h4><span class="section-number">5.5.2.3. </span>Formatting Comments<a class="headerlink" href="#formatting-comments" title="Permalink to this headline">¶</a></h4>
<p>Comments in Ada code are of two kinds:</p>
<ul class="simple">
<li><p>a <em>whole-line comment</em>, which appears by itself (possibly preceded by
white space) on a line</p></li>
<li><p>an <em>end-of-line comment</em>, which follows some other Ada code on
the same line.</p></li>
</ul>
<p>A whole-line comment is indented according to the surrounding code,
with some exceptions. Comments that start in column 1 are kept
there. If possible, comments are not moved so far to the right that
the maximum line length is exceeded. The <code class="docutils literal notranslate"><span class="pre">--comments-unchanged</span></code>
option turns off comment formatting. Special-form comments such as
SPARK-style <code class="docutils literal notranslate"><span class="pre">--#...</span></code> are left alone.</p>
<p>For an end-of-line comment, <code class="docutils literal notranslate"><span class="pre">gnatpp</span></code> tries to leave the same
number of spaces between the end of the preceding Ada code and the
beginning of the comment as appear in the original source.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--comments-gnat-beginning</span></code> switch (GNAT style comment
beginning) has the following effect:</p>
<blockquote>
<div><ul class="simple">
<li><p>For each whole-line comment that does not end with two hyphens,
<code class="docutils literal notranslate"><span class="pre">gnatpp</span></code> inserts spaces if necessary after the starting two
hyphens to ensure that there are at least two spaces between
these hyphens and the first non-blank character of the comment.</p></li>
</ul>
</div></blockquote>
<p>The <code class="docutils literal notranslate"><span class="pre">--comments-fill</span></code> switch specifies that whole-line comments
that form a paragraph will be filled in typical word processor style
(that is, moving words between lines to make the lines other than the
last similar in length ).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--comments-only</span></code> switch specifies that only the comments are
formatted; the rest of the program text is left alone. The comments
are formatted according to the <code class="docutils literal notranslate"><span class="pre">--comments-gnat-beginning</span></code> and
<code class="docutils literal notranslate"><span class="pre">--comments-fill</span></code> switches; other formatting switches are ignored. For
example, <code class="docutils literal notranslate"><span class="pre">--comments-only</span> <span class="pre">--comments-fill</span></code> means to fill comment
paragraphs, and do nothing else. Likewise, <code class="docutils literal notranslate"><span class="pre">--comments-only</span>
<span class="pre">--comments-gnat-beginning</span></code> ensures comments start with at least two
spaces after <code class="docutils literal notranslate"><span class="pre">--</span></code>, and <code class="docutils literal notranslate"><span class="pre">--comments-only</span> <span class="pre">--comments-gnat-beginning</span>
<span class="pre">--comments-fill</span></code> does both. If <code class="docutils literal notranslate"><span class="pre">--comments-only</span></code> is given without
<code class="docutils literal notranslate"><span class="pre">--comments-gnat-beginning</span></code> or <code class="docutils literal notranslate"><span class="pre">--comments-fill</span></code>, then gnatpp
doesn’t format anything.</p>
</div>
<div class="section" id="name-casing">
<span id="id32"></span><h4><span class="section-number">5.5.2.4. </span>Name Casing<a class="headerlink" href="#name-casing" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">gnatpp</span></code> always converts the usage occurrence of a (simple) name to
the same casing as the corresponding defining identifier.</p>
<p>You control the casing for defining occurrences via the <code class="docutils literal notranslate"><span class="pre">--name...</span></code>
switches. With <code class="docutils literal notranslate"><span class="pre">--name-case-as-declared</span></code>, which is the default,
defining occurrences appear exactly as in the source file where they
are declared. The other values for this switch –
<code class="docutils literal notranslate"><span class="pre">--name-upper-case</span></code>, <code class="docutils literal notranslate"><span class="pre">--name-lower-case</span></code>, <code class="docutils literal notranslate"><span class="pre">--name-mixed-case</span></code>
– result in upper, lower, or mixed case, respectively. If
<code class="docutils literal notranslate"><span class="pre">gnatpp</span></code> changes the casing of a defining occurrence, it
analogously changes the casing of all the usage occurrences of this
name.</p>
<p>If the defining occurrence of a name is not in the source compilation
unit currently being processed by <code class="docutils literal notranslate"><span class="pre">gnatpp</span></code>, the casing of each
reference to this name is changed according to the switch (subject to
the dictionary file mechanism described below). Thus <code class="docutils literal notranslate"><span class="pre">gnatpp</span></code> acts
as though the switch had affected the casing for the defining
occurrence of the name.</p>
<p>The options
<code class="switch docutils literal notranslate"><span class="pre">--attribute...</span></code>,
<code class="switch docutils literal notranslate"><span class="pre">--keyword...</span></code>,
<code class="switch docutils literal notranslate"><span class="pre">--enum...</span></code>,
<code class="switch docutils literal notranslate"><span class="pre">--type...</span></code>,
<code class="switch docutils literal notranslate"><span class="pre">--number...</span></code>, and
<code class="switch docutils literal notranslate"><span class="pre">--pragma...</span></code>
allow finer-grained control over casing for
attributes, keywords, enumeration literals,
types, named numbers and pragmas, respectively.
<code class="switch docutils literal notranslate"><span class="pre">--type...</span></code> cover subtypes as well.</p>
<p>Some names may need to be spelled with casing conventions that are not
covered by the upper-, lower-, and mixed-case transformations.
You can arrange correct casing by placing such names in a
<em>dictionary file</em>,
and then supplying a <code class="docutils literal notranslate"><span class="pre">--dictionary</span></code> switch.
The casing of names from dictionary files overrides
any <code class="docutils literal notranslate"><span class="pre">--name...</span></code> switch.</p>
<p>To handle the casing of Ada predefined names and the names from GNAT libraries,
<code class="docutils literal notranslate"><span class="pre">gnatpp</span></code> assumes a default dictionary file.
The name of each predefined entity is spelled with the same casing as is used
for the entity in the <cite>Ada Reference Manual</cite> (usually mixed case).
The name of each entity in the GNAT libraries is spelled with the same casing
as is used in the declaration of that entity.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--dictionary=-</span></code> switch suppresses the use of
the default dictionary file. Instead, the casing for predefined and
GNAT-defined names will be established by the
<code class="docutils literal notranslate"><span class="pre">-n</span></code> switch or explicit dictionary files. For
example, by default the names <code class="docutils literal notranslate"><span class="pre">Ada.Text_IO</span></code> and
<code class="docutils literal notranslate"><span class="pre">GNAT.OS_Lib</span></code> will appear as just shown, even in the presence of
a <code class="docutils literal notranslate"><span class="pre">--name-upper-case</span></code> switch. To ensure that even
such names are rendered in uppercase, additionally supply the
–dictionary=- switch (or else place these names
in upper case in a dictionary file).</p>
<p>A dictionary file is a plain text file; each line in this file can be
either a blank line (containing only space characters), an Ada comment
line, or the specification of exactly one <em>casing schema</em>.</p>
<p>A casing schema is a string that has the following syntax:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">casing_schema</span> <span class="p">:</span><span class="o">:=</span> <span class="n">identifier</span> <span class="o">|</span> <span class="n">simple_identifier</span>

<span class="n">simple_identifier</span> <span class="p">:</span><span class="o">:=</span> <span class="n">letter</span><span class="p">{</span><span class="n">letter_or_digit</span><span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>(See <cite>Ada Reference Manual</cite>, Section 2.3) for the definition of the
<code class="docutils literal notranslate"><span class="pre">identifier</span></code> lexical element and the <code class="docutils literal notranslate"><span class="pre">letter_or_digit</span></code> category.)</p>
<p>The casing schema string can be followed by white space and/or an Ada-style
comment; any amount of white space is allowed before the string.</p>
<p>If a dictionary file is passed as
the value of a <code class="switch docutils literal notranslate"><span class="pre">--dictionary=</span><em><span class="pre">file</span></em></code> switch
then for every
simple name and every identifier, <code class="docutils literal notranslate"><span class="pre">gnatpp</span></code> checks if the dictionary
defines the casing for the name or for some of its parts (the term ‘subword’
is used below to denote the part of a name which is delimited by ‘_’ or by
the beginning or end of the word and which does not contain any ‘_’ inside):</p>
<ul class="simple">
<li><p>if the whole name is in the dictionary, <code class="docutils literal notranslate"><span class="pre">gnatpp</span></code> uses for this name
the casing defined by the dictionary; no subwords are checked for this word</p></li>
<li><p>for every subword <code class="docutils literal notranslate"><span class="pre">gnatpp</span></code> checks if the dictionary contains the
corresponding string of the form <code class="docutils literal notranslate"><span class="pre">simple_identifier</span></code>,
and if it does, the casing of this <code class="docutils literal notranslate"><span class="pre">simple_identifier</span></code> is used
for this subword</p></li>
<li><p>if the whole name does not contain any ‘_’ inside, and if for this name
the dictionary contains two entries – one of the form <code class="docutils literal notranslate"><span class="pre">identifier</span></code>,
and another of the form <code class="docutils literal notranslate"><span class="pre">simple_identifier</span></code> – then the first one
is applied to define the casing of this name</p></li>
<li><p>if more than one dictionary file is passed as <code class="docutils literal notranslate"><span class="pre">gnatpp</span></code> switches, each
dictionary adds new casing exceptions and overrides all the existing casing
exceptions set by the previous dictionaries</p></li>
<li><p>when <code class="docutils literal notranslate"><span class="pre">gnatpp</span></code> checks if the word or subword is in the dictionary,
this check is not case sensitive</p></li>
</ul>
<p>For example, suppose we have the following source to reformat:</p>
<blockquote>
<div><div class="highlight-ada notranslate"><div class="highlight"><pre><span></span><span class="k">procedure </span><span class="nf">test</span> <span class="kr">is</span><span class="p"></span>
   <span class="n">name1</span> <span class="o">:</span> <span class="n">integer</span> <span class="o">:=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="n">name4_name3_name2</span> <span class="o">:</span> <span class="n">integer</span> <span class="o">:=</span> <span class="mi">2</span><span class="p">;</span>
   <span class="n">name2_name3_name4</span> <span class="o">:</span> <span class="n">Boolean</span><span class="p">;</span>
   <span class="n">name1_var</span> <span class="o">:</span> <span class="n">Float</span><span class="p">;</span>
<span class="kr">begin</span><span class="p"></span>
   <span class="n">name2_name3_name4</span> <span class="o">:=</span> <span class="n">name4_name3_name2</span> <span class="o">&gt;</span> <span class="n">name1</span><span class="p">;</span>
<span class="kr">end</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>And suppose we have two dictionaries:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">*</span><span class="n">dict1</span><span class="p">:</span><span class="o">*</span>
   <span class="n">NAME1</span>
   <span class="o">*</span><span class="n">NaMe3</span><span class="o">*</span>
   <span class="o">*</span><span class="n">Name1</span><span class="o">*</span>

<span class="o">*</span><span class="n">dict2</span><span class="p">:</span><span class="o">*</span>
  <span class="o">*</span><span class="n">NAME3</span><span class="o">*</span>
</pre></div>
</div>
</div></blockquote>
<p>If <code class="docutils literal notranslate"><span class="pre">gnatpp</span></code> is called with the following switches:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ gnatpp --name-mixed-case --dictionary=dict1 --dictionary=dict2 test.adb
</pre></div>
</div>
</div></blockquote>
<p>then we will get the following name casing in the <code class="docutils literal notranslate"><span class="pre">gnatpp</span></code> output:</p>
<blockquote>
<div><div class="highlight-ada notranslate"><div class="highlight"><pre><span></span><span class="k">procedure </span><span class="nf">Test</span> <span class="kr">is</span><span class="p"></span>
   <span class="n">NAME1</span>             <span class="o">:</span> <span class="n">Integer</span> <span class="o">:=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="n">Name4_NAME3_Name2</span> <span class="o">:</span> <span class="n">Integer</span> <span class="o">:=</span> <span class="mi">2</span><span class="p">;</span>
   <span class="n">Name2_NAME3_Name4</span> <span class="o">:</span> <span class="n">Boolean</span><span class="p">;</span>
   <span class="n">Name1_Var</span>         <span class="o">:</span> <span class="n">Float</span><span class="p">;</span>
<span class="kr">begin</span><span class="p"></span>
   <span class="n">Name2_NAME3_Name4</span> <span class="o">:=</span> <span class="n">Name4_NAME3_Name2</span> <span class="o">&gt;</span> <span class="n">NAME1</span><span class="p">;</span>
<span class="k">end </span><span class="nf">Test</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="preprocessor-directives">
<span id="id33"></span><h4><span class="section-number">5.5.2.5. </span>Preprocessor Directives<a class="headerlink" href="#preprocessor-directives" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">gnatpp</span></code> has some support for preprocessor directives.
You can use preprocessor symbols, as in <code class="docutils literal notranslate"><span class="pre">$symbol</span></code>.
In addition, you can use conditional compilation,
so long as the program text is syntactically legal Ada code
after removing all the preprocessor directives (lines starting
with <code class="docutils literal notranslate"><span class="pre">#</span></code>). For example, <code class="docutils literal notranslate"><span class="pre">gnatpp</span></code> can format the following:</p>
<blockquote>
<div><div class="highlight-ada notranslate"><div class="highlight"><pre><span></span><span class="k">package </span><span class="nf">P</span> <span class="kr">is</span><span class="p"></span>
#<span class="kr">IF</span><span class="p"> </span><span class="n">SOMETHING</span>
   <span class="n">X</span> <span class="o">:</span> <span class="kr">constant</span><span class="p"> </span><span class="n">Integer</span> <span class="o">:=</span> <span class="mi">123</span><span class="p">;</span>
#<span class="kr">ELSE</span><span class="p"></span>
   <span class="n">X</span> <span class="o">:</span> <span class="kr">constant</span><span class="p"> </span><span class="n">Integer</span> <span class="o">:=</span> <span class="mi">456</span><span class="p">;</span>
#<span class="k">END IF</span><span class="p">;</span>
<span class="k">end </span><span class="nf">P</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>which will be formatted as if it were:</p>
<blockquote>
<div><div class="highlight-ada notranslate"><div class="highlight"><pre><span></span><span class="k">package </span><span class="nf">P</span> <span class="kr">is</span><span class="p"></span>
   <span class="n">X</span> <span class="o">:</span> <span class="kr">constant</span><span class="p"> </span><span class="n">Integer</span> <span class="o">:=</span> <span class="mi">123</span><span class="p">;</span>
   <span class="n">X</span> <span class="o">:</span> <span class="kr">constant</span><span class="p"> </span><span class="n">Integer</span> <span class="o">:=</span> <span class="mi">456</span><span class="p">;</span>
<span class="k">end </span><span class="nf">P</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>except that the <code class="docutils literal notranslate"><span class="pre">#</span></code> lines will be preserved.
However, <code class="docutils literal notranslate"><span class="pre">gnatpp</span></code> cannot format the following:</p>
<blockquote>
<div><div class="highlight-ada notranslate"><div class="highlight"><pre><span></span><span class="k">procedure </span><span class="nf">P</span> <span class="kr">is</span><span class="p"></span>
<span class="kr">begin</span><span class="p"></span>
#<span class="kr">IF</span><span class="p"> </span><span class="n">SOMETHING</span>
   <span class="kr">if</span><span class="p"> </span><span class="n">X</span> <span class="o">=</span> <span class="mi">0</span> <span class="kr">then</span><span class="p"></span>
#<span class="kr">ELSE</span><span class="p"></span>
   <span class="kr">if</span><span class="p"> </span><span class="n">X</span> <span class="o">=</span> <span class="mi">1</span> <span class="kr">then</span><span class="p"></span>
#<span class="k">END IF</span><span class="p">;</span>
      <span class="kr">null</span><span class="p">;</span>
   <span class="k">end if</span><span class="p">;</span>
<span class="k">end </span><span class="nf">P</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>because removing the <code class="docutils literal notranslate"><span class="pre">#</span></code> lines gives:</p>
<blockquote>
<div><div class="highlight-ada notranslate"><div class="highlight"><pre><span></span><span class="k">procedure </span><span class="nf">P</span> <span class="kr">is</span><span class="p"></span>
<span class="kr">begin</span><span class="p"></span>
   <span class="kr">if</span><span class="p"> </span><span class="n">X</span> <span class="o">=</span> <span class="mi">0</span> <span class="kr">then</span><span class="p"></span>
   <span class="kr">if</span><span class="p"> </span><span class="n">X</span> <span class="o">=</span> <span class="mi">1</span> <span class="kr">then</span><span class="p"></span>
      <span class="kr">null</span><span class="p">;</span>
   <span class="k">end if</span><span class="p">;</span>
<span class="k">end </span><span class="nf">P</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>which is not syntactically legal.</p>
</div>
<div class="section" id="id34">
<h4><span class="section-number">5.5.2.6. </span>Legacy Switches<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h4>
<p>Some switches have a short form, mostly for legacy reasons,
as shown below.</p>
<dl class="simple" id="index-194">
<dt><code class="switch docutils literal notranslate"><span class="pre">-nD</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--name-case-as-declared</span></code></p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">-nU</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--name-upper-case</span></code></p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">-nL</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--name-lower-case</span></code></p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">-nM</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--name-mixed-case</span></code></p>
</dd>
</dl>
<dl class="simple" id="index-195">
<dt><code class="switch docutils literal notranslate"><span class="pre">-aL</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--attribute-lower-case</span></code></p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">-aU</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--attribute-upper-case</span></code></p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">-aM</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--attribute-mixed-case</span></code></p>
</dd>
</dl>
<dl class="simple" id="index-196">
<dt><code class="switch docutils literal notranslate"><span class="pre">-kL</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--keyword-lower-case</span></code></p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">-kU</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--keyword-upper-case</span></code></p>
</dd>
</dl>
<dl class="simple" id="index-197">
<dt><code class="switch docutils literal notranslate"><span class="pre">-neD</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--enum-case-as-declared</span></code></p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">-neU</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--enum-upper-case</span></code></p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">-neL</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--enum-lower-case</span></code></p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">-neM</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--enum-mixed-case</span></code></p>
</dd>
</dl>
<dl class="simple" id="index-198">
<dt><code class="switch docutils literal notranslate"><span class="pre">-ntD</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--type-case-as-declared</span></code></p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">-ntU</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--type-upper-case</span></code></p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">-ntL</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--type-lower-case</span></code></p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">-ntM</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--type-mixed-case</span></code></p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">-nnU</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--number-upper-case</span></code></p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">-nnL</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--number-lower-case</span></code></p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">-nnM</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--number-mixed-case</span></code></p>
</dd>
</dl>
<dl class="simple" id="index-199">
<dt><code class="switch docutils literal notranslate"><span class="pre">-pL</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--pragma-lower-case</span></code></p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">-pU</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--pragma-upper-case</span></code></p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">-pM</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--pragma-mixed-case</span></code></p>
</dd>
</dl>
<dl class="simple" id="index-200">
<dt><code class="switch docutils literal notranslate"><span class="pre">-D</span><em><span class="pre">file</span></em></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--dictionary=</span><em><span class="pre">file</span></em></code></p>
</dd>
</dl>
<dl class="simple" id="index-201">
<dt><code class="switch docutils literal notranslate"><span class="pre">-D-</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--dictionary=-</span></code></p>
</dd>
</dl>
<dl class="simple" id="index-202">
<dt><code class="switch docutils literal notranslate"><span class="pre">-c0</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--comments-unchanged</span></code></p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">-c1</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--comments-gnat-indentation</span></code></p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">-c3</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--comments-gnat-beginning</span></code></p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">-c4</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--comments-fill</span></code></p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">-c5</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--comments-special</span></code></p>
</dd>
</dl>
<dl class="simple" id="index-203">
<dt><code class="switch docutils literal notranslate"><span class="pre">-M</span><em><span class="pre">nnn</span></em></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--max-line-length=</span><em><span class="pre">nnn</span></em></code></p>
</dd>
</dl>
<dl class="simple" id="index-204">
<dt><code class="switch docutils literal notranslate"><span class="pre">-i</span><em><span class="pre">nnn</span></em></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--indentation=</span><em><span class="pre">nnn</span></em></code></p>
</dd>
</dl>
<dl class="simple" id="index-205">
<dt><code class="switch docutils literal notranslate"><span class="pre">-cl</span><em><span class="pre">nnn</span></em></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--indent-continuation=</span><em><span class="pre">nnn</span></em></code></p>
</dd>
</dl>
<dl class="simple" id="index-206">
<dt><code class="switch docutils literal notranslate"><span class="pre">-pipe</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--pipe</span></code></p>
</dd>
</dl>
<dl class="simple" id="index-207">
<dt><code class="switch docutils literal notranslate"><span class="pre">-o</span> <em><span class="pre">output-file</span></em></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--output=</span><em><span class="pre">output-file</span></em></code></p>
</dd>
</dl>
<dl class="simple" id="index-208">
<dt><code class="switch docutils literal notranslate"><span class="pre">-of</span> <em><span class="pre">output-file</span></em></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--output-force=</span><em><span class="pre">output-file</span></em></code></p>
</dd>
</dl>
<dl class="simple" id="index-209">
<dt><code class="switch docutils literal notranslate"><span class="pre">-rnb</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--replace</span></code></p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">-r</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--replace-backup</span></code></p>
</dd>
</dl>
<dl class="simple" id="index-210">
<dt><code class="switch docutils literal notranslate"><span class="pre">-rf</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--replace-force-backup</span></code></p>
</dd>
</dl>
<span class="target" id="index-211"></span><span class="target" id="index-212"></span><dl class="simple" id="index-213">
<dt><code class="switch docutils literal notranslate"><span class="pre">-W</span><em><span class="pre">e</span></em></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--wide-character-encoding=</span><em><span class="pre">e</span></em></code></p>
</dd>
</dl>
<dl class="simple" id="index-214">
<dt><code class="switch docutils literal notranslate"><span class="pre">-files</span> <em><span class="pre">filename</span></em></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--files=</span><em><span class="pre">filename</span></em></code></p>
</dd>
</dl>
<dl class="simple" id="index-215">
<dt><code class="switch docutils literal notranslate"><span class="pre">-j</span><em><span class="pre">n</span></em></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--jobs=</span><em><span class="pre">n</span></em></code></p>
</dd>
</dl>
<dl class="simple" id="index-216">
<dt><code class="switch docutils literal notranslate"><span class="pre">-v</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--verbose</span></code></p>
</dd>
</dl>
<dl class="simple" id="index-217">
<dt><code class="switch docutils literal notranslate"><span class="pre">-q</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--quiet</span></code></p>
</dd>
</dl>
</div>
</div>
</div>
<div class="section" id="the-body-stub-generator-gnatstub">
<span id="id35"></span><h2><span class="section-number">5.6. </span>The Body Stub Generator <em>gnatstub</em><a class="headerlink" href="#the-body-stub-generator-gnatstub" title="Permalink to this headline">¶</a></h2>
<p id="index-218"><code class="docutils literal notranslate"><span class="pre">gnatstub</span></code> creates empty but compilable bodies
for library unit declarations, and empty but compilable
subunits for body stubs.</p>
<p><code class="docutils literal notranslate"><span class="pre">gnatstub</span></code> is a project-aware tool.
(See <a class="reference internal" href="#using-project-files-with-gnat-tools"><span class="std std-ref">Using Project Files with GNAT Tools</span></a> for a description of
the project-related switches but note that <code class="docutils literal notranslate"><span class="pre">gnatstub</span></code> does not support
the <code class="switch docutils literal notranslate"><span class="pre">-U</span></code>, <code class="switch docutils literal notranslate"><span class="pre">-U</span> <em><span class="pre">main_unit</span></em></code>, <code class="switch docutils literal notranslate"><span class="pre">--subdirs=</span><em><span class="pre">dir</span></em></code>, or
<code class="switch docutils literal notranslate"><span class="pre">--no-objects-dir</span></code> switches.)
The project file package that can specify
<code class="docutils literal notranslate"><span class="pre">gnatstub</span></code> switches is named <code class="docutils literal notranslate"><span class="pre">gnatstub</span></code>.</p>
<p>By default, all the program unit bodies generated by <code class="docutils literal notranslate"><span class="pre">gnatstub</span></code>
raise <code class="docutils literal notranslate"><span class="pre">Program_Error</span></code>, which will catch accidental calls of
generated stubs. This behavior can be changed with option
<code class="docutils literal notranslate"><span class="pre">--no-exception</span></code> (see below).</p>
<div class="section" id="running-gnatstub">
<span id="id36"></span><h3><span class="section-number">5.6.1. </span>Running <code class="docutils literal notranslate"><span class="pre">gnatstub</span></code><a class="headerlink" href="#running-gnatstub" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">gnatstub</span></code> invocation has the following form:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ gnatstub [ switches ] {filename}
</pre></div>
</div>
</div></blockquote>
<p>where</p>
<ul>
<li><dl>
<dt><em>filename</em></dt><dd><p>is the name of the source file that contains a library unit declaration
for which a body must be created or a library unit body for which subunits
must be created for the body stubs declared in this body.
The file name may contain path information.
If the name does not follow GNAT file naming conventions and the set
of switches does not contain a project file that defines naming
conventions, the name of the body file must
be provided
explicitly as the value of the <code class="switch docutils literal notranslate"><span class="pre">--output=</span><em><span class="pre">body-name</span></em></code> option.
If the file name follows the GNAT file naming
conventions and the name of the body file is not provided,
<code class="docutils literal notranslate"><span class="pre">gnatstub</span></code>
takes the naming conventions for the generated source from the
project file provided as a parameter of <code class="docutils literal notranslate"><span class="pre">-P</span></code> switch if any,
or creates the name file to generate using the standard GNAT
naming conventions.</p>
<p>Note that it is no longer necessary to specify the Ada language version;
<code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code> can process Ada source code written in any version from
Ada 83 onward without specifying any language version switch.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><em>switches</em></dt><dd><p>is an optional sequence of switches as described in the next section</p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="switches-for-gnatstub">
<span id="id37"></span><h3><span class="section-number">5.6.2. </span>Switches for <code class="docutils literal notranslate"><span class="pre">gnatstub</span></code><a class="headerlink" href="#switches-for-gnatstub" title="Permalink to this headline">¶</a></h3>
<dl class="simple" id="index-219">
<dt><code class="switch docutils literal notranslate"><span class="pre">--version</span></code></dt><dd><p>Display copyright and version, then exit disregarding all other options.</p>
</dd>
</dl>
<dl class="simple" id="index-220">
<dt><code class="switch docutils literal notranslate"><span class="pre">--help</span></code></dt><dd><p>Display usage, then exit disregarding all other options.</p>
</dd>
</dl>
<dl class="simple" id="index-221">
<dt><code class="switch docutils literal notranslate"><span class="pre">-P</span> <em><span class="pre">file</span></em></code></dt><dd><p>Indicates the name of the project file that describes the set of sources
to be processed. An aggregate project is allowed as the file parameter only
if it has exactly one non-aggregate project being aggregated.</p>
</dd>
</dl>
<dl class="simple" id="index-222">
<dt><code class="switch docutils literal notranslate"><span class="pre">-X</span><em><span class="pre">name</span></em><span class="pre">=</span><em><span class="pre">value</span></em></code></dt><dd><p>Indicates that external variable <code class="docutils literal notranslate"><span class="pre">name</span></code> in the argument project
has the value <code class="docutils literal notranslate"><span class="pre">value</span></code>. Has no effect if no project is specified.</p>
</dd>
</dl>
<dl class="simple" id="index-223">
<dt><code class="switch docutils literal notranslate"><span class="pre">--RTS=</span><em><span class="pre">rts-path</span></em></code></dt><dd><p>Specifies the default location of the runtime library. Same meaning as the
equivalent <code class="docutils literal notranslate"><span class="pre">gnatmake</span></code> flag (<a class="reference internal" href="building_executable_programs_with_gnat.html#switches-for-gnatmake"><span class="std std-ref">Switches for gnatmake</span></a>).</p>
</dd>
</dl>
<dl class="simple" id="index-224">
<dt><code class="switch docutils literal notranslate"><span class="pre">--subunits</span></code></dt><dd><p>Generate subunits for body stubs. If this switch is specified,
<code class="docutils literal notranslate"><span class="pre">gnatstub</span></code> expects a library unit body as an argument file;
otherwise a library unit declaration is expected. If a body stub
already has a corresponding subunit, <code class="docutils literal notranslate"><span class="pre">gnatstub</span></code> does not
generate anything for it.</p>
</dd>
</dl>
<dl class="simple" id="index-225">
<dt><code class="switch docutils literal notranslate"><span class="pre">--force</span></code></dt><dd><p>If the destination directory already contains a file with the name of the
body file
for the argument spec file, replace it with the generated body stub.
This switch cannot be used together with <code class="docutils literal notranslate"><span class="pre">--subunits</span></code>.</p>
</dd>
</dl>
<dl class="simple" id="index-226">
<dt><code class="switch docutils literal notranslate"><span class="pre">--comment-header-spec</span></code></dt><dd><p>Put the comment header (i.e., all the comments preceding the
compilation unit) from the source of the library unit declaration
into the body stub.</p>
</dd>
</dl>
<dl class="simple" id="index-227">
<dt><code class="switch docutils literal notranslate"><span class="pre">--comment-header-sample</span></code></dt><dd><p>Put a sample comment header into the body stub.</p>
</dd>
</dl>
<dl class="simple" id="index-228">
<dt><code class="switch docutils literal notranslate"><span class="pre">--header-file=</span><em><span class="pre">filename</span></em></code></dt><dd><p>Use the content of the file as the comment header for a generated body stub.</p>
</dd>
</dl>
<dl class="simple" id="index-229">
<dt><code class="switch docutils literal notranslate"><span class="pre">--max-line-length=</span><em><span class="pre">n</span></em></code></dt><dd><p>(<code class="docutils literal notranslate"><span class="pre">n</span></code> is a non-negative integer). Set the maximum line length for
the output files. The default is 79. The maximum value that can be
specified is 32767.</p>
</dd>
</dl>
<dl class="simple" id="index-230">
<dt><code class="switch docutils literal notranslate"><span class="pre">--indentation=</span><em><span class="pre">n</span></em></code></dt><dd><p>(<code class="docutils literal notranslate"><span class="pre">n</span></code> is an integer from 1 to 9). Set the indentation level in
the generated files to <code class="docutils literal notranslate"><span class="pre">n</span></code>.
The default indentation is 3.</p>
</dd>
</dl>
<dl class="simple" id="index-231">
<dt><code class="switch docutils literal notranslate"><span class="pre">--alphabetical-order</span></code></dt><dd><p>Order local bodies alphabetically. (By default local bodies are ordered
in the same way as the corresponding local specs in the argument
spec file.)</p>
</dd>
</dl>
<dl class="simple" id="index-232">
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-exception</span></code></dt><dd><p>Avoid raising Program_Error in the generated bodies of program unit stubs,
except in the case of functions, where we have no value to return.</p>
</dd>
</dl>
<dl class="simple" id="index-233">
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-local-header</span></code></dt><dd><p>Do not place local comment header with unit name before body stub for a
unit.</p>
</dd>
</dl>
<dl class="simple" id="index-234">
<dt><code class="switch docutils literal notranslate"><span class="pre">--files=</span><em><span class="pre">filename</span></em></code></dt><dd><p>Take as arguments the files listed in text file <code class="docutils literal notranslate"><span class="pre">file</span></code>.
Text file <code class="docutils literal notranslate"><span class="pre">file</span></code> may contain empty lines that are ignored.
Each nonempty line should contain the name of an existing file.
Several such switches may be specified.</p>
</dd>
</dl>
<dl class="simple" id="index-235">
<dt><code class="switch docutils literal notranslate"><span class="pre">--output=</span><em><span class="pre">body-name</span></em></code></dt><dd><p>Body file name. This should be set if the argument file name does
not follow the default GNAT file naming conventions, and the naming
conventions are not specified by a project file. If this switch and
<code class="docutils literal notranslate"><span class="pre">-P</span></code> are both omitted, the name for the body will be obtained
according to the default GNAT file naming conventions.</p>
</dd>
</dl>
<dl class="simple" id="index-236">
<dt><code class="switch docutils literal notranslate"><span class="pre">--output-dir=</span><em><span class="pre">dir-name</span></em></code></dt><dd><p>The directory in which to place the output files.
If this switch is not set, the generated library unit body is
placed in the current directory, and generated sununits
in the directory where the argument body is located.</p>
</dd>
</dl>
<dl class="simple" id="index-237">
<dt><code class="switch docutils literal notranslate"><span class="pre">--wide-character-encoding=</span><em><span class="pre">e</span></em></code></dt><dd><p>Specify the wide character encoding method for the input and output
files. <code class="docutils literal notranslate"><span class="pre">e</span></code> is one of the following:</p>
<ul class="simple">
<li><p><em>8</em> - UTF-8 encoding</p></li>
<li><p><em>b</em> - Brackets encoding (default value)</p></li>
</ul>
</dd>
</dl>
<span class="target" id="index-238"></span><dl class="simple" id="index-239">
<dt><code class="switch docutils literal notranslate"><span class="pre">--quiet</span></code> / <code class="switch docutils literal notranslate"><span class="pre">-q</span></code></dt><dd><p>Quiet mode.</p>
</dd>
</dl>
<span class="target" id="index-240"></span><dl class="simple" id="index-241">
<dt><code class="switch docutils literal notranslate"><span class="pre">--verbose</span></code> / <code class="switch docutils literal notranslate"><span class="pre">-v</span></code></dt><dd><p>Verbose mode.</p>
</dd>
</dl>
<div class="section" id="id38">
<h4><span class="section-number">5.6.2.1. </span>Legacy Switches<a class="headerlink" href="#id38" title="Permalink to this headline">¶</a></h4>
<p>Some switches have a short form, mostly for legacy reasons,
as shown below.</p>
<dl class="simple" id="index-242">
<dt><code class="switch docutils literal notranslate"><span class="pre">-gnatyM</span><em><span class="pre">nnn</span></em></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--max-line-length=</span><em><span class="pre">nnn</span></em></code></p>
</dd>
</dl>
<dl class="simple" id="index-243">
<dt><code class="switch docutils literal notranslate"><span class="pre">-i</span><em><span class="pre">nnn</span></em></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--indentation=</span><em><span class="pre">nnn</span></em></code></p>
</dd>
</dl>
<dl class="simple" id="index-244">
<dt><code class="switch docutils literal notranslate"><span class="pre">-gnaty</span><em><span class="pre">nnn</span></em></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--indentation=</span><em><span class="pre">nnn</span></em></code></p>
</dd>
</dl>
<dl class="simple" id="index-245">
<dt><code class="switch docutils literal notranslate"><span class="pre">-f</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--force</span></code></p>
</dd>
</dl>
<dl class="simple" id="index-246">
<dt><code class="switch docutils literal notranslate"><span class="pre">-gnatyo</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--alphabetical-order</span></code></p>
</dd>
</dl>
<dl class="simple" id="index-247">
<dt><code class="switch docutils literal notranslate"><span class="pre">-hg</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--comment-header-sample</span></code></p>
</dd>
</dl>
<dl class="simple" id="index-248">
<dt><code class="switch docutils literal notranslate"><span class="pre">-hs</span></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--comment-header-spec</span></code></p>
</dd>
</dl>
<dl class="simple" id="index-249">
<dt><code class="switch docutils literal notranslate"><span class="pre">-o</span> <em><span class="pre">output-file</span></em></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--output=</span><em><span class="pre">output-file</span></em></code></p>
</dd>
</dl>
<dl class="simple" id="index-250">
<dt><code class="switch docutils literal notranslate"><span class="pre">-dir</span> <em><span class="pre">dir-name</span></em></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--output-dir=</span><em><span class="pre">dir-name</span></em></code></p>
</dd>
</dl>
<dl class="simple" id="index-251">
<dt><code class="switch docutils literal notranslate"><span class="pre">-W</span><em><span class="pre">e</span></em></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--wide-character-encoding=</span><em><span class="pre">e</span></em></code></p>
</dd>
</dl>
<dl class="simple" id="index-252">
<dt><code class="switch docutils literal notranslate"><span class="pre">-files</span> <em><span class="pre">filename</span></em></code></dt><dd><p><code class="switch docutils literal notranslate"><span class="pre">--files=</span><em><span class="pre">filename</span></em></code></p>
</dd>
</dl>
</div>
</div>
</div>
<div class="section" id="the-unit-test-generator-gnattest">
<span id="id39"></span><h2><span class="section-number">5.7. </span>The Unit Test Generator <code class="docutils literal notranslate"><span class="pre">gnattest</span></code><a class="headerlink" href="#the-unit-test-generator-gnattest" title="Permalink to this headline">¶</a></h2>
<p id="index-253"><code class="docutils literal notranslate"><span class="pre">gnattest</span></code> is an ASIS-based utility that creates unit-test skeletons
as well as a test driver infrastructure (harness). <code class="docutils literal notranslate"><span class="pre">gnattest</span></code> creates
a skeleton for each visible subprogram in the packages under consideration when
they do not exist already.</p>
<p><code class="docutils literal notranslate"><span class="pre">gnattest</span></code> is a project-aware tool.
(See <a class="reference internal" href="#using-project-files-with-gnat-tools"><span class="std std-ref">Using Project Files with GNAT Tools</span></a> for a description of
the project-related switches but note that <code class="docutils literal notranslate"><span class="pre">gnattest</span></code> does not support
the <code class="switch docutils literal notranslate"><span class="pre">-U</span></code>, <code class="switch docutils literal notranslate"><span class="pre">-eL</span></code>, <code class="switch docutils literal notranslate"><span class="pre">--subdirs=</span><em><span class="pre">dir</span></em></code>, or
<code class="switch docutils literal notranslate"><span class="pre">--no-objects-dir</span></code> switches.)
The project file package that can specify
<code class="docutils literal notranslate"><span class="pre">gnattest</span></code> switches is named <code class="docutils literal notranslate"><span class="pre">gnattest</span></code>.</p>
<p>The user can choose to generate a single test driver
that will run all individual tests, or separate test drivers for each test. The
second option allows much greater flexibility in test execution environment,
allows to benefit from parallel tests execution to increase performance, and
provides stubbing support.</p>
<p><code class="docutils literal notranslate"><span class="pre">gnattest</span></code> also has a mode of operation where it acts as the test
aggregator when multiple test executables must be run, in particular when
the separate test drivers were generated. In this mode it handles individual
tests execution and upon completion reports the summary results of the test
run.</p>
<p>In order to process source files from a project, <code class="docutils literal notranslate"><span class="pre">gnattest</span></code> has to
semantically analyze the sources. Therefore, test skeletons can only be
generated for legal Ada units. If a unit is dependent on other units,
those units should be among the source files of the project or of other projects
imported by this one.</p>
<p>Generated skeletons and harnesses are based on the AUnit testing framework.
AUnit is an Ada adaptation of the xxxUnit testing frameworks, similar to JUnit
for Java or CppUnit for C++. While it is advised that gnattest users read
the AUnit manual, deep knowledge of AUnit is not necessary for using <code class="docutils literal notranslate"><span class="pre">gnattest</span></code>.
For correct operation of <code class="docutils literal notranslate"><span class="pre">gnattest</span></code>, AUnit should be installed and
aunit.gpr must be on the project path. Except for some special circumstances
(e.g. a custom run-time is used), this should normally be the case out of the box.</p>
<div class="section" id="running-gnattest">
<span id="id40"></span><h3><span class="section-number">5.7.1. </span>Running <code class="docutils literal notranslate"><span class="pre">gnattest</span></code><a class="headerlink" href="#running-gnattest" title="Permalink to this headline">¶</a></h3>
<p>There are two ways of running <code class="docutils literal notranslate"><span class="pre">gnattest</span></code>.</p>
<div class="section" id="framework-generation-mode">
<span id="id41"></span><h4><span class="section-number">5.7.1.1. </span>Framework Generation Mode<a class="headerlink" href="#framework-generation-mode" title="Permalink to this headline">¶</a></h4>
<p>In this mode <code class="docutils literal notranslate"><span class="pre">gnattest</span></code> has the following command-line interface:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ gnattest -Pprojname [ switches ] [ filename ] [ -cargs gcc_switches ]
</pre></div>
</div>
</div></blockquote>
<p>where</p>
<ul class="simple">
<li><dl class="simple">
<dt><code class="switch docutils literal notranslate"><span class="pre">-P</span><em><span class="pre">projname</span></em></code></dt><dd><p>specifies the project defining the location of source files. When no
file names are provided on the command line, all sources in the project
are used as input. This switch is required.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="switch docutils literal notranslate"><em><span class="pre">filename</span></em></code></dt><dd><p>is the name of the source file containing the library unit package <em>declaration</em>
(the package “spec”) for which a test package will be created. The file name
may be given with a path.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="samp docutils literal notranslate"><em><span class="pre">switches</span></em></code></dt><dd><p>is an optional sequence of switches as described below.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="samp docutils literal notranslate"><em><span class="pre">gcc_switches</span></em></code></dt><dd><p>is a list of additional switches for
<code class="docutils literal notranslate"><span class="pre">gcc</span></code> that will be passed to all compiler invocations
made by <code class="docutils literal notranslate"><span class="pre">gnattest</span></code> to generate a set of ASIS trees.</p>
</dd>
</dl>
</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">gnattest</span></code> results can be found in two different places.</p>
<ul>
<li><dl>
<dt><em>automatic harness</em>:</dt><dd><p>This is the harness code, which is located by default in
“gnattest/harness” directory created in the object directory of
the main project file. All of this code is generated completely
automatically and can be destroyed and regenerated at will, with the
exception of the file <em>gnattest_common.gpr</em>, which is created if absent,
but never overwritten. It is not recommended to modify other files
manually, since these modifications will be lost if <code class="docutils literal notranslate"><span class="pre">gnattest</span></code> is re-run.
The entry point in the harness code is
the project file named <em>test_driver.gpr</em>. Tests can be compiled and run
using a command such as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ gprbuild -P&lt;harness-dir&gt;/test_driver
</pre></div>
</div>
<p>Note that if you need to adjust any options used to compile the harness,
you can do so by editing the file <em>gnattest_common.gpr</em>.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><em>actual unit test skeletons</em>:</dt><dd><p>A test skeleton for each visible subprogram is created in a separate file, if it
doesn’t exist already. By default, those separate test files are located in a
“gnattest/tests” directory that is created in the object directory of
corresponding project file. For example, if a source file my_unit.ads in
directory src contains a visible subprogram Proc, then the corresponding unit
test will be found in file src/tests/my_unit-test_data-tests.adb and will be
called Test_Proc_&lt;code&gt;. &lt;code&gt; is a signature encoding used to differentiate
test names in case of overloading.</p>
<p>Note that if the project already has both my_unit.ads and my_unit-test_data.ads,
this will cause a name conflict with the generated test package.</p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="test-execution-mode">
<span id="id42"></span><h4><span class="section-number">5.7.1.2. </span>Test Execution Mode<a class="headerlink" href="#test-execution-mode" title="Permalink to this headline">¶</a></h4>
<p>In this  mode <code class="docutils literal notranslate"><span class="pre">gnattest</span></code> has a the following command-line interface:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ gnattest test_drivers.list [ switches ]
</pre></div>
</div>
</div></blockquote>
<p>where</p>
<ul class="simple">
<li><dl class="simple">
<dt><code class="samp docutils literal notranslate"><em><span class="pre">test_drivers.list</span></em></code></dt><dd><p>is the name of the text file containing the list of executables to treat as
test drivers. This file is automatically generated by gnattest, but can be
hand-edited to add or remove tests. This switch is required.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="samp docutils literal notranslate"><em><span class="pre">switches</span></em></code></dt><dd><p>is an optional sequence of switches as described below.</p>
</dd>
</dl>
</li>
</ul>
</div>
</div>
<div class="section" id="switches-for-gnattest-in-framework-generation-mode">
<span id="id43"></span><h3><span class="section-number">5.7.2. </span>Switches for <code class="docutils literal notranslate"><span class="pre">gnattest</span></code> in framework generation mode<a class="headerlink" href="#switches-for-gnattest-in-framework-generation-mode" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div></div></blockquote>
<dl id="index-254">
<dt><code class="switch docutils literal notranslate"><span class="pre">--strict</span></code></dt><dd><p>Return error exit code if there are any compilation errors.</p>
</dd>
<dt id="index-255"><code class="switch docutils literal notranslate"><span class="pre">-q</span></code></dt><dd><p>Quiet mode: suppresses noncritical output messages.</p>
</dd>
<dt id="index-256"><code class="switch docutils literal notranslate"><span class="pre">-v</span></code></dt><dd><p>Verbose mode: produces additional output about the execution of the tool.
When specified alone on the command line, prints tool version and exits.</p>
</dd>
<dt id="index-257"><code class="switch docutils literal notranslate"><span class="pre">-r</span></code></dt><dd><p>Recursively considers all sources from all projects.</p>
</dd>
<dt id="index-258"><code class="switch docutils literal notranslate"><span class="pre">-files=</span><em><span class="pre">filename</span></em></code></dt><dd><p>Take as arguments the files listed in text file <code class="docutils literal notranslate"><span class="pre">file</span></code>.
Text file <code class="docutils literal notranslate"><span class="pre">file</span></code> may contain empty lines that are ignored.
Each nonempty line should contain the name of an existing file.
Several such switches may be specified simultaneously.</p>
</dd>
<dt id="index-259"><code class="switch docutils literal notranslate"><span class="pre">--ignore=</span><em><span class="pre">filename</span></em></code></dt><dd><p>Do not process the sources listed in a specified file.</p>
</dd>
<dt id="index-260"><code class="switch docutils literal notranslate"><span class="pre">--RTS=</span><em><span class="pre">rts-path</span></em></code></dt><dd><p>Specifies the default location of the runtime library. Same meaning as the
equivalent <code class="docutils literal notranslate"><span class="pre">gnatmake</span></code> flag (<a class="reference internal" href="building_executable_programs_with_gnat.html#switches-for-gnatmake"><span class="std std-ref">Switches for gnatmake</span></a>). For restricted
profiles, <code class="docutils literal notranslate"><span class="pre">gnattest</span></code> takes into account the run-time limitations when
generating the harness.</p>
</dd>
<dt id="index-261"><code class="switch docutils literal notranslate"><span class="pre">--additional-tests=</span><em><span class="pre">projname</span></em></code></dt><dd><p>Sources described in <code class="docutils literal notranslate"><span class="pre">projname</span></code> are considered potential additional
manual tests to be added to the test suite.</p>
</dd>
<dt id="index-262"><code class="switch docutils literal notranslate"><span class="pre">--harness-only</span></code></dt><dd><p>When this option is given, <code class="docutils literal notranslate"><span class="pre">gnattest</span></code> creates a harness for all
sources, treating them as test packages. This option is not compatible with
closure computation done by -U main.</p>
</dd>
<dt id="index-263"><code class="switch docutils literal notranslate"><span class="pre">--separate-drivers[=</span><em><span class="pre">val</span></em><span class="pre">]</span></code></dt><dd><p>Generates a separate test driver for each test or unit under test, rather
than a single executable incorporating all tests. <code class="docutils literal notranslate"><span class="pre">val</span></code> can be “unit” or
“test”, or may be omitted, which defaults to “unit”.</p>
</dd>
<dt id="index-264"><code class="switch docutils literal notranslate"><span class="pre">--stub</span></code></dt><dd><p>Generates the testing framework that uses subsystem stubbing to isolate the
code under test.</p>
</dd>
<dt id="index-265"><code class="switch docutils literal notranslate"><span class="pre">--harness-dir=</span><em><span class="pre">dirname</span></em></code></dt><dd><p>Specifies the directory that will hold the harness packages and project file
for the test driver. If the <code class="docutils literal notranslate"><span class="pre">dirname</span></code> is a relative path, it is considered
relative to the object directory of the project file.</p>
</dd>
<dt id="index-266"><code class="switch docutils literal notranslate"><span class="pre">--tests-dir=</span><em><span class="pre">dirname</span></em></code></dt><dd><p>All test packages are placed in the <code class="docutils literal notranslate"><span class="pre">dirname</span></code> directory.
If the <code class="docutils literal notranslate"><span class="pre">dirname</span></code> is a relative path, it is considered relative to the object
directory of the project file. When all sources from all projects are taken
recursively from all projects, <code class="docutils literal notranslate"><span class="pre">dirname</span></code> directories are created for each
project in their object directories and test packages are placed accordingly.</p>
</dd>
<dt id="index-267"><code class="switch docutils literal notranslate"><span class="pre">--subdir=</span><em><span class="pre">dirname</span></em></code></dt><dd><p>Test packages are placed in a subdirectory of the corresponding source
directory, with the name <code class="docutils literal notranslate"><span class="pre">dirname</span></code>. Thus, each set of unit tests is located
in a subdirectory of the code under test. If the sources are in separate
directories, each source directory has a test subdirectory named <code class="docutils literal notranslate"><span class="pre">dirname</span></code>.</p>
</dd>
<dt id="index-268"><code class="switch docutils literal notranslate"><span class="pre">--tests-root=</span><em><span class="pre">dirname</span></em></code></dt><dd><p>The hierarchy of source directories, if any, is recreated in the <code class="docutils literal notranslate"><span class="pre">dirname</span></code>
directory, with test packages placed in directories corresponding to those
of the sources.
If the <code class="docutils literal notranslate"><span class="pre">dirname</span></code> is a relative path, it is considered relative to the object
directory of the project file. When projects are considered recursively,
directory hierarchies of tested sources are
recreated for each project in their object directories and test packages are
placed accordingly.</p>
</dd>
<dt id="index-269"><code class="switch docutils literal notranslate"><span class="pre">--stubs-dir=</span><em><span class="pre">dirname</span></em></code></dt><dd><p>The hierarchy of directories containing stubbed units is recreated in
the <code class="docutils literal notranslate"><span class="pre">dirname</span></code> directory, with stubs placed in directories corresponding to
projects they are derived from.
If the <code class="docutils literal notranslate"><span class="pre">dirname</span></code> is a relative path, it is considered relative to the object
directory of the project file. When projects are considered recursively,
directory hierarchies of stubs are
recreated for each project in their object directories and test packages are
placed accordingly.</p>
</dd>
<dt id="index-270"><code class="switch docutils literal notranslate"><span class="pre">--exclude-from-stubbing=</span><em><span class="pre">filename</span></em></code></dt><dd><p>Disables stubbing of units listed in <code class="docutils literal notranslate"><span class="pre">filename</span></code>. The file should contain
corresponding spec files, one per line.</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--exclude-from-stubbing:</span><em><span class="pre">unit</span></em><span class="pre">=</span><em><span class="pre">filename</span></em></code></dt><dd><p>Same as above, but corresponding units will not be stubbed only when testing
specified <code class="docutils literal notranslate"><span class="pre">unit</span></code>.</p>
</dd>
<dt id="index-271"><code class="switch docutils literal notranslate"><span class="pre">--validate-type-extensions</span></code></dt><dd><p>Enables substitution check: run all tests from all parents in order
to check substitutability in accordance with the Liskov substitution principle (LSP).</p>
</dd>
<dt id="index-272"><code class="switch docutils literal notranslate"><span class="pre">--inheritance-check</span></code></dt><dd><p>Enables inheritance check: run inherited tests against descendants.</p>
</dd>
<dt id="index-273"><code class="switch docutils literal notranslate"><span class="pre">--no-inheritance-check</span></code></dt><dd><p>Disables inheritance check.</p>
</dd>
<dt id="index-274"><code class="switch docutils literal notranslate"><span class="pre">--test-case-only</span></code></dt><dd><p>Generates test skeletons only for subprograms that have at least one
associated pragma or aspect Test_Case.</p>
</dd>
<dt id="index-275"><code class="switch docutils literal notranslate"><span class="pre">--skeleton-default=</span><em><span class="pre">val</span></em></code></dt><dd><p>Specifies the default behavior of generated skeletons. <code class="docutils literal notranslate"><span class="pre">val</span></code> can be either
“fail” or “pass”, “fail” being the default.</p>
</dd>
<dt id="index-276"><code class="switch docutils literal notranslate"><span class="pre">--passed-tests=</span><em><span class="pre">val</span></em></code></dt><dd><p>Specifies whether or not passed tests should be shown. <code class="docutils literal notranslate"><span class="pre">val</span></code> can be either
“show” or “hide”, “show” being the default.</p>
</dd>
<dt id="index-277"><code class="switch docutils literal notranslate"><span class="pre">--exit-status=</span><em><span class="pre">val</span></em></code></dt><dd><p>Specifies whether or not generated test driver should return failure exit
status if at least one test fails or crashes. <code class="docutils literal notranslate"><span class="pre">val</span></code> can be either
“on” or “off”, “off” being the default.</p>
</dd>
<dt id="index-278"><code class="switch docutils literal notranslate"><span class="pre">--omit-sloc</span></code></dt><dd><p>Suppresses comment line containing file name and line number of corresponding
subprograms in test skeletons.</p>
</dd>
<dt id="index-279"><code class="switch docutils literal notranslate"><span class="pre">--no-command-line</span></code></dt><dd><p>Don’t add command line support to test driver. Note that regardless of this
switch, <code class="docutils literal notranslate"><span class="pre">gnattest</span></code> will automatically refrain from adding command
line support if it detects that the selected run-time doesn’t provide
this capability.</p>
</dd>
<dt id="index-280"><code class="switch docutils literal notranslate"><span class="pre">--separates</span></code></dt><dd><p>Bodies of all test routines are generated as separates. Note that this mode is
kept for compatibility reasons only and it is not advised to use it due to
possible problems with hash in names of test skeletons when using an
inconsistent casing. Separate test skeletons can be incorporated to monolith
test package with improved hash being used by using <code class="docutils literal notranslate"><span class="pre">--transition</span></code>
switch.</p>
</dd>
<dt id="index-281"><code class="switch docutils literal notranslate"><span class="pre">--transition</span></code></dt><dd><p>This allows transition from separate test routines to monolith test packages.
All matching test routines are overwritten with contents of corresponding
separates. Note that if separate test routines had any manually added with
clauses they will be moved to the test package body as is and have to be moved
by hand.</p>
</dd>
<dt id="index-282"><code class="switch docutils literal notranslate"><span class="pre">--test-duration</span></code></dt><dd><p>Adds time measurements for each test in generated test driver.</p>
</dd>
</dl>
<p><code class="switch docutils literal notranslate"><span class="pre">--tests_root</span></code>, <code class="switch docutils literal notranslate"><span class="pre">--subdir</span></code> and <code class="switch docutils literal notranslate"><span class="pre">--tests-dir</span></code> switches are mutually exclusive.</p>
</div>
<div class="section" id="switches-for-gnattest-in-test-execution-mode">
<span id="id44"></span><h3><span class="section-number">5.7.3. </span>Switches for <code class="docutils literal notranslate"><span class="pre">gnattest</span></code> in test execution mode<a class="headerlink" href="#switches-for-gnattest-in-test-execution-mode" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div></div></blockquote>
<dl id="index-283">
<dt><code class="switch docutils literal notranslate"><span class="pre">--passed-tests=</span><em><span class="pre">val</span></em></code></dt><dd><p>Specifies whether or not passed tests should be shown. <code class="docutils literal notranslate"><span class="pre">val</span></code> can be either
“show” or “hide”, “show” being the default.</p>
<span class="target" id="index-284"></span></dd>
<dt id="index-285"><code class="switch docutils literal notranslate"><span class="pre">--queues=</span><em><span class="pre">n</span></em></code>, <code class="switch docutils literal notranslate"><span class="pre">-j</span><em><span class="pre">n</span></em></code></dt><dd><p>Runs <code class="docutils literal notranslate"><span class="pre">n</span></code> tests in parallel (default is 1).</p>
</dd>
<dt id="index-286"><code class="switch docutils literal notranslate"><span class="pre">--copy-environment=</span><em><span class="pre">dir</span></em></code></dt><dd><p>Contents of <code class="docutils literal notranslate"><span class="pre">dir</span></code> directory will be copied to temporary directories
created by gnattest in which individual test drivers are spawned.</p>
</dd>
</dl>
</div>
<div class="section" id="project-attributes-for-gnattest">
<span id="id45"></span><h3><span class="section-number">5.7.4. </span>Project Attributes for <code class="docutils literal notranslate"><span class="pre">gnattest</span></code><a class="headerlink" href="#project-attributes-for-gnattest" title="Permalink to this headline">¶</a></h3>
<p>Most of the command-line options can also be passed to the tool by adding
special attributes to the project file. Those attributes should be put in
package <code class="docutils literal notranslate"><span class="pre">Gnattest</span></code>. Here is the list of attributes:</p>
<ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">Tests_Root</span></code></dt><dd><p>is used to select the same output mode as with the <code class="docutils literal notranslate"><span class="pre">--tests-root</span></code> option.
This attribute cannot be used together with <code class="docutils literal notranslate"><span class="pre">Subdir</span></code> or <code class="docutils literal notranslate"><span class="pre">Tests_Dir</span></code>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">Subdir</span></code></dt><dd><p>is used to select the same output mode as with the <code class="docutils literal notranslate"><span class="pre">--subdir</span></code> option.
This attribute cannot be used together with <code class="docutils literal notranslate"><span class="pre">Tests_Root</span></code> or <code class="docutils literal notranslate"><span class="pre">Tests_Dir</span></code>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">Tests_Dir</span></code></dt><dd><p>is used to select the same output mode as with the <code class="docutils literal notranslate"><span class="pre">--tests-dir</span></code> option.
This attribute cannot be used together with <code class="docutils literal notranslate"><span class="pre">Subdir</span></code> or <code class="docutils literal notranslate"><span class="pre">Tests_Root</span></code>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">Stubs_Dir</span></code></dt><dd><p>is used to select the same output mode as with the <code class="docutils literal notranslate"><span class="pre">--stubs-dir</span></code> option.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">Harness_Dir</span></code></dt><dd><p>is used to specify the directory in which to place harness packages and project
file for the test driver, otherwise specified by <code class="docutils literal notranslate"><span class="pre">--harness-dir</span></code>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">Additional_Tests</span></code></dt><dd><p>is used to specify the project file, otherwise given by
<code class="docutils literal notranslate"><span class="pre">--additional-tests</span></code> switch.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">Skeletons_Default</span></code></dt><dd><p>is used to specify the default behaviour of test skeletons, otherwise
specified by <code class="docutils literal notranslate"><span class="pre">--skeleton-default</span></code> option. The value of this attribute
should be either <code class="docutils literal notranslate"><span class="pre">pass</span></code> or <code class="docutils literal notranslate"><span class="pre">fail</span></code>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">Default_Stub_Exclusion_List</span></code></dt><dd><p>is used to specify the file with list of units whose bodies should not
be stubbed, otherwise specified by <code class="docutils literal notranslate"><span class="pre">--exclude-from-stubbing=filename</span></code>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">Stub_Exclusion_List</span> <span class="pre">(&quot;unit&quot;)</span></code></dt><dd><p>is used to specify the file with list of units whose bodies should not
be stubbed when testing “unit”, otherwise specified by
<code class="docutils literal notranslate"><span class="pre">--exclude-from-stubbing:unit=filename</span></code>.</p>
</dd>
</dl>
</li>
</ul>
<p>Each of those attributes can be overridden from the command line if needed.
Other <code class="docutils literal notranslate"><span class="pre">gnattest</span></code> switches can also be passed via the project
file as an attribute list called <code class="docutils literal notranslate"><span class="pre">Gnattest_Switches</span></code>.</p>
</div>
<div class="section" id="simple-example">
<span id="simple-gnattest-example"></span><h3><span class="section-number">5.7.5. </span>Simple Example<a class="headerlink" href="#simple-example" title="Permalink to this headline">¶</a></h3>
<p>Let’s take a very simple example using the first <code class="docutils literal notranslate"><span class="pre">gnattest</span></code> example
located in:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">install_prefix</span><span class="o">&gt;/</span><span class="n">share</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">gnattest</span><span class="o">/</span><span class="n">simple</span>
</pre></div>
</div>
</div></blockquote>
<p>This project contains a simple package containing one subprogram. By running <code class="docutils literal notranslate"><span class="pre">gnattest</span></code>:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ gnattest --harness-dir=driver -Psimple.gpr
</pre></div>
</div>
</div></blockquote>
<p>a test driver is created in directory <code class="docutils literal notranslate"><span class="pre">driver</span></code>. It can be compiled and run:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd obj/driver
$ gprbuild -Ptest_driver
$ test_runner
</pre></div>
</div>
</div></blockquote>
<p>One failed test with the diagnosis “test not implemented” is reported.
Since no special output option was specified, the test package <code class="docutils literal notranslate"><span class="pre">Simple.Tests</span></code>
is located in:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">install_prefix</span><span class="o">&gt;/</span><span class="n">share</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">gnattest</span><span class="o">/</span><span class="n">simple</span><span class="o">/</span><span class="n">obj</span><span class="o">/</span><span class="n">gnattest</span><span class="o">/</span><span class="n">tests</span>
</pre></div>
</div>
</div></blockquote>
<p>For each package containing visible subprograms, a child test package is
generated. It contains one test routine per tested subprogram. Each
declaration of a test subprogram has a comment specifying which tested
subprogram it corresponds to. Bodies of test routines are placed in test package
bodies and are surrounded by special comment sections. Those comment sections
should not be removed or modified in order for gnattest to be able to regenerate
test packages and keep already written tests in place.
The test routine <code class="docutils literal notranslate"><span class="pre">Test_Inc_5eaee3</span></code> located at <code class="file docutils literal notranslate"><span class="pre">simple-test_data-tests.adb</span></code> contains
a single statement: a call to procedure <code class="docutils literal notranslate"><span class="pre">Assert</span></code>. It has two arguments:
the Boolean expression we want to check and the diagnosis message to display if
the condition is false.</p>
<p>That is where actual testing code should be written after a proper setup.
An actual check can be performed by replacing the <code class="docutils literal notranslate"><span class="pre">Assert</span></code> call with:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Assert</span> <span class="p">(</span><span class="n">Inc</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;wrong incrementation&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p>After recompiling and running the test driver, one successfully passed test
is reported.</p>
</div>
<div class="section" id="setting-up-and-tearing-down-the-testing-environment">
<span id="id46"></span><h3><span class="section-number">5.7.6. </span>Setting Up and Tearing Down the Testing Environment<a class="headerlink" href="#setting-up-and-tearing-down-the-testing-environment" title="Permalink to this headline">¶</a></h3>
<p>Besides test routines themselves, each test package has a parent package
<code class="docutils literal notranslate"><span class="pre">Test_Data</span></code> that has two procedures: <code class="docutils literal notranslate"><span class="pre">Set_Up</span></code> and <code class="docutils literal notranslate"><span class="pre">Tear_Down</span></code>. This package is never
overwritten by the tool. <code class="docutils literal notranslate"><span class="pre">Set_Up</span></code> is called before each test routine of the
package, and <code class="docutils literal notranslate"><span class="pre">Tear_Down</span></code> is called after each test routine. Those two procedures
can be used to perform necessary initialization and finalization,
memory allocation, etc. Test type declared in <code class="docutils literal notranslate"><span class="pre">Test_Data</span></code> package is parent type
for the test type of test package and can have user-defined components whose
values can be set by <code class="docutils literal notranslate"><span class="pre">Set_Up</span></code> routine and used in test routines afterwards.</p>
</div>
<div class="section" id="regenerating-tests">
<span id="id47"></span><h3><span class="section-number">5.7.7. </span>Regenerating Tests<a class="headerlink" href="#regenerating-tests" title="Permalink to this headline">¶</a></h3>
<p>Bodies of test routines and <code class="docutils literal notranslate"><span class="pre">Test_Data</span></code> packages are never overridden after they
have been created once. As long as the name of the subprogram, full expanded Ada
names and order of its parameters are the same, and comment sections are
intact, the old test routine will fit in its place and no test skeleton will be
generated for the subprogram.</p>
<p>This can be demonstrated with the previous example. By uncommenting declaration
and body of function Dec in <code class="docutils literal notranslate"><span class="pre">simple.ads</span></code> and <code class="docutils literal notranslate"><span class="pre">simple.adb</span></code>, running
<code class="docutils literal notranslate"><span class="pre">gnattest</span></code> on the project, and then running the test driver:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ gnattest --harness-dir=driver -Psimple.gpr
$ cd obj/driver
$ gprbuild -Ptest_driver
$ test_runner
</pre></div>
</div>
</div></blockquote>
<p>The old test is not replaced with a stub, nor is it lost, but a new test
skeleton is created for function <code class="docutils literal notranslate"><span class="pre">Dec</span></code>.</p>
<p>The only way of regenerating tests skeletons is to remove the previously created
tests together with corresponding comment sections.</p>
</div>
<div class="section" id="default-test-behavior">
<span id="id48"></span><h3><span class="section-number">5.7.8. </span>Default Test Behavior<a class="headerlink" href="#default-test-behavior" title="Permalink to this headline">¶</a></h3>
<p>The generated test driver can treat unimplemented tests in two ways:
either count them all as failed (this is useful to see which tests are still
left to implement) or as passed (to sort out unimplemented ones from those
actually failing).</p>
<p>The test driver accepts a switch to specify this behavior:
<code class="switch docutils literal notranslate"><span class="pre">--skeleton-default=</span><em><span class="pre">val</span></em></code>, where <code class="docutils literal notranslate"><span class="pre">val</span></code> is either <code class="docutils literal notranslate"><span class="pre">pass</span></code> or <code class="docutils literal notranslate"><span class="pre">fail</span></code> (exactly as for
<code class="docutils literal notranslate"><span class="pre">gnattest</span></code>).</p>
<p>The default behavior of the test driver is set with the same switch
as passed to <code class="docutils literal notranslate"><span class="pre">gnattest</span></code> when generating the test driver.</p>
<p>Passing it to the driver generated on the first example:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ test_runner --skeleton-default=pass
</pre></div>
</div>
</div></blockquote>
<p>makes both tests pass, even the unimplemented one.</p>
</div>
<div class="section" id="testing-primitive-operations-of-tagged-types">
<span id="id49"></span><h3><span class="section-number">5.7.9. </span>Testing Primitive Operations of Tagged Types<a class="headerlink" href="#testing-primitive-operations-of-tagged-types" title="Permalink to this headline">¶</a></h3>
<p>Creation of test skeletons for primitive operations of tagged types entails
a number of features. Test routines for all primitives of a given tagged type
are placed in a separate child package named according to the tagged type. For
example, if you have tagged type <code class="docutils literal notranslate"><span class="pre">T</span></code> in package <code class="docutils literal notranslate"><span class="pre">P</span></code>, all tests for primitives
of <code class="docutils literal notranslate"><span class="pre">T</span></code> will be in <code class="docutils literal notranslate"><span class="pre">P.T_Test_Data.T_Tests</span></code>.</p>
<p>Consider running <code class="docutils literal notranslate"><span class="pre">gnattest</span></code> on the second example (note: actual tests for this
example already exist, so there’s no need to worry if the tool reports that
no new stubs were generated):</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd &lt;install_prefix&gt;/share/examples/gnattest/tagged_rec
$ gnattest --harness-dir=driver -Ptagged_rec.gpr
</pre></div>
</div>
</div></blockquote>
<p>Taking a closer look at the test type declared in the test package
<em>Speed1.Controller_Test_Data</em> is necessary. It is declared in:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">install_prefix</span><span class="o">&gt;/</span><span class="n">share</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">gnattest</span><span class="o">/</span><span class="n">tagged_rec</span><span class="o">/</span><span class="n">obj</span><span class="o">/</span><span class="n">gnattest</span><span class="o">/</span><span class="n">tests</span>
</pre></div>
</div>
</div></blockquote>
<p>Test types are direct or indirect descendants of
<em>AUnit.Test_Fixtures.Test_Fixture</em> type. In the case of non-primitive tested
subprograms, the user doesn’t need to be concerned with them. However,
when generating test packages for primitive operations, there are some things
the user needs to know.</p>
<p>Type <code class="docutils literal notranslate"><span class="pre">Test_Controller</span></code> has components that allow assignment of various
derivations of type <code class="docutils literal notranslate"><span class="pre">Controller</span></code>. And if you look at the specification of
package <em>Speed2.Auto_Controller</em>, you will see that <code class="docutils literal notranslate"><span class="pre">Test_Auto_Controller</span></code>
actually derives from <code class="docutils literal notranslate"><span class="pre">Test_Controller</span></code> rather than AUnit type <code class="docutils literal notranslate"><span class="pre">Test_Fixture</span></code>.
Thus, test types mirror the hierarchy of tested types.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Set_Up</span></code> procedure of <code class="docutils literal notranslate"><span class="pre">Test_Data</span></code> package corresponding to a test package
of primitive operations of type <code class="docutils literal notranslate"><span class="pre">T</span></code> assigns to <code class="docutils literal notranslate"><span class="pre">Fixture</span></code> a reference to an
object of that exact type <code class="docutils literal notranslate"><span class="pre">T</span></code>. Note, however, that if the tagged type has
discriminants, the <code class="docutils literal notranslate"><span class="pre">Set_Up</span></code> only has a commented template for setting
up the fixture, since filling the discriminant with actual value is up
to the user.</p>
<p>The knowledge of the structure of test types allows additional testing
without additional effort. Those possibilities are described below.</p>
</div>
<div class="section" id="testing-inheritance">
<span id="id50"></span><h3><span class="section-number">5.7.10. </span>Testing Inheritance<a class="headerlink" href="#testing-inheritance" title="Permalink to this headline">¶</a></h3>
<p>Since the test type hierarchy mimics the hierarchy of tested types, the
inheritance of tests takes place. An example of such inheritance can be
seen by running the test driver generated for the second example. As previously
mentioned, actual tests are already written for this example.</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd obj/driver
$ gprbuild -Ptest_driver
$ test_runner
</pre></div>
</div>
</div></blockquote>
<p>There are 6 passed tests while there are only 5 testable subprograms. The test
routine for function Speed has been inherited and run against objects of the
derived type.</p>
</div>
<div class="section" id="tagged-type-substitutability-testing">
<span id="id51"></span><h3><span class="section-number">5.7.11. </span>Tagged Type Substitutability Testing<a class="headerlink" href="#tagged-type-substitutability-testing" title="Permalink to this headline">¶</a></h3>
<p><em>Tagged Type Substitutability Testing</em> is a way of verifying the global type
consistency by testing. Global type consistency is a principle stating that if
<code class="docutils literal notranslate"><span class="pre">S</span></code> is a subtype of <code class="docutils literal notranslate"><span class="pre">T</span></code> (in Ada, <code class="docutils literal notranslate"><span class="pre">S</span></code> is a derived type of tagged type <code class="docutils literal notranslate"><span class="pre">T</span></code>),
then objects of type <code class="docutils literal notranslate"><span class="pre">T</span></code> may be replaced with objects of type <code class="docutils literal notranslate"><span class="pre">S</span></code> (that is,
objects of type <code class="docutils literal notranslate"><span class="pre">S</span></code> may be substituted for objects of type <code class="docutils literal notranslate"><span class="pre">T</span></code>), without
altering any of the desirable properties of the program. When the properties
of the program are expressed in the form of subprogram preconditions and
postconditions (let’s call them pre and post), the principle is formulated as
relations between the pre and post of primitive operations and the pre and post
of their derived operations. The pre of a derived operation should not be
stronger than the original pre, and the post of the derived operation should
not be weaker than the original post. Those relations ensure that verifying if
a dispatching call is safe can be done just by using the pre and post of the
root operation.</p>
<p>Verifying global type consistency by testing consists of running all the unit
tests associated with the primitives of a given tagged type with objects of its
derived types.</p>
<p>In the example used in the previous section, there was clearly a violation of
type consistency. The overriding primitive <code class="docutils literal notranslate"><span class="pre">Adjust_Speed</span></code> in package <code class="docutils literal notranslate"><span class="pre">Speed2</span></code>
removes the functionality of the overridden primitive and thus doesn’t respect
the consistency principle.
<code class="docutils literal notranslate"><span class="pre">gnattest</span></code> has a special option to run overridden parent tests against objects
of the type which have overriding primitives:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ gnattest --harness-dir=driver --validate-type-extensions -Ptagged_rec.gpr
$ cd obj/driver
$ gprbuild -Ptest_driver
$ test_runner
</pre></div>
</div>
</div></blockquote>
<p>While all the tests pass by themselves, the parent test for <code class="docutils literal notranslate"><span class="pre">Adjust_Speed</span></code> fails
against objects of the derived type.</p>
<p>Non-overridden tests are already inherited for derived test types, so the
<code class="docutils literal notranslate"><span class="pre">--validate-type-extensions</span></code> enables the application of overridden tests
to objects of derived types.</p>
</div>
<div class="section" id="testing-with-contracts">
<span id="id52"></span><h3><span class="section-number">5.7.12. </span>Testing with Contracts<a class="headerlink" href="#testing-with-contracts" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">gnattest</span></code> supports pragmas <code class="docutils literal notranslate"><span class="pre">Pre</span></code>, <code class="docutils literal notranslate"><span class="pre">Post</span></code>, and <code class="docutils literal notranslate"><span class="pre">Test_Case</span></code>,
as well as the corresponding Ada 2012 aspects.
Test routines are generated, one per each <code class="docutils literal notranslate"><span class="pre">Test_Case</span></code> associated with a tested
subprogram. Those test routines have special wrappers for tested functions
that have composition of pre- and postcondition of the subprogram with
“requires” and “ensures” of the <code class="docutils literal notranslate"><span class="pre">Test_Case</span></code> (depending on the mode, pre and post
either count for <code class="docutils literal notranslate"><span class="pre">Nominal</span></code> mode or do <em>not</em> count for <code class="docutils literal notranslate"><span class="pre">Robustness</span></code> mode).</p>
<p>The third example demonstrates how this works:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd &lt;install_prefix&gt;/share/examples/gnattest/contracts
$ gnattest --harness-dir=driver -Pcontracts.gpr
</pre></div>
</div>
</div></blockquote>
<p>Putting actual checks within the range of the contract does not cause any
error reports. For example, for the test routine which corresponds to
test case 1:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Assert</span> <span class="p">(</span><span class="n">Sqrt</span> <span class="p">(</span><span class="mf">9.0</span><span class="p">)</span> <span class="o">=</span> <span class="mf">3.0</span><span class="p">,</span> <span class="s2">&quot;wrong sqrt&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p>and for the test routine corresponding to test case 2:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Assert</span> <span class="p">(</span><span class="n">Sqrt</span> <span class="p">(</span><span class="o">-</span><span class="mf">5.0</span><span class="p">)</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="s2">&quot;wrong error indication&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p>are acceptable:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd obj/driver
$ gprbuild -Ptest_driver
$ test_runner
</pre></div>
</div>
</div></blockquote>
<p>However, by changing 9.0 to 25.0 and 3.0 to 5.0, for example, you can get
a precondition violation for test case one. Also, by using any otherwise
correct but positive pair of numbers in the second test routine, you can also
get a precondition violation. Postconditions are checked and reported
the same way.</p>
</div>
<div class="section" id="additional-tests">
<span id="id53"></span><h3><span class="section-number">5.7.13. </span>Additional Tests<a class="headerlink" href="#additional-tests" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">gnattest</span></code> can add user-written tests to the main suite of the test
driver. <code class="docutils literal notranslate"><span class="pre">gnattest</span></code> traverses the given packages and searches for test
routines. All procedures with a single in out parameter of a type which is
derived from <em>AUnit.Test_Fixtures.Test_Fixture</em> and that are declared in package
specifications are added to the suites and are then executed by the test driver.
(<code class="docutils literal notranslate"><span class="pre">Set_Up</span></code> and <code class="docutils literal notranslate"><span class="pre">Tear_Down</span></code> are filtered out.)</p>
<p>An example illustrates two ways of creating test harnesses for user-written
tests. Directory <code class="docutils literal notranslate"><span class="pre">additional_tests</span></code> contains an AUnit-based test driver written
by hand.</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">install_prefix</span><span class="o">&gt;/</span><span class="n">share</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">gnattest</span><span class="o">/</span><span class="n">additional_tests</span><span class="o">/</span>
</pre></div>
</div>
</div></blockquote>
<p>To create a test driver for already-written tests, use the <code class="docutils literal notranslate"><span class="pre">--harness-only</span></code>
option:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gnattest</span> <span class="o">-</span><span class="n">Padditional</span><span class="o">/</span><span class="n">harness</span><span class="o">/</span><span class="n">harness</span><span class="o">.</span><span class="n">gpr</span> <span class="o">--</span><span class="n">harness</span><span class="o">-</span><span class="nb">dir</span><span class="o">=</span><span class="n">harness_only</span> \\
  <span class="o">--</span><span class="n">harness</span><span class="o">-</span><span class="n">only</span>
<span class="n">gprbuild</span> <span class="o">-</span><span class="n">Pharness_only</span><span class="o">/</span><span class="n">test_driver</span><span class="o">.</span><span class="n">gpr</span>
<span class="n">harness_only</span><span class="o">/</span><span class="n">test_runner</span>
</pre></div>
</div>
</div></blockquote>
<p>Additional tests can also be executed together with generated tests:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gnattest</span> <span class="o">-</span><span class="n">Psimple</span><span class="o">.</span><span class="n">gpr</span> <span class="o">--</span><span class="n">additional</span><span class="o">-</span><span class="n">tests</span><span class="o">=</span><span class="n">additional</span><span class="o">/</span><span class="n">harness</span><span class="o">/</span><span class="n">harness</span><span class="o">.</span><span class="n">gpr</span> \\
  <span class="o">--</span><span class="n">harness</span><span class="o">-</span><span class="nb">dir</span><span class="o">=</span><span class="n">mixing</span>
<span class="n">gprbuild</span> <span class="o">-</span><span class="n">Pmixing</span><span class="o">/</span><span class="n">test_driver</span><span class="o">.</span><span class="n">gpr</span>
<span class="n">mixing</span><span class="o">/</span><span class="n">test_runner</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="individual-test-drivers">
<span id="id54"></span><h3><span class="section-number">5.7.14. </span>Individual Test Drivers<a class="headerlink" href="#individual-test-drivers" title="Permalink to this headline">¶</a></h3>
<p>By default, <code class="docutils literal notranslate"><span class="pre">gnattest</span></code> generates a monolithic test driver that
aggregates the individual tests into a single executable. It is also possible
to generate separate executables for each test or each unit under test, by
passing the switch <code class="docutils literal notranslate"><span class="pre">--separate-drivers</span></code> with corresponding parameter. This
approach scales better for large testing campaigns, especially involving target
architectures with limited resources typical for embedded development. It can
also provide a major performance benefit on multi-core systems by allowing
simultaneous execution of multiple tests.</p>
<p><code class="docutils literal notranslate"><span class="pre">gnattest</span></code> can take charge of executing the individual tests; for this,
instead of passing a project file, a text file containing the list of
executables can be passed. Such a file is automatically generated by gnattest
under the name <code class="file docutils literal notranslate"><span class="pre">test_drivers.list</span></code>, but it can be
hand-edited to add or remove tests, or replaced. The individual tests can
also be executed standalone, or from any user-defined scripted framework.</p>
</div>
<div class="section" id="stubbing">
<span id="id55"></span><h3><span class="section-number">5.7.15. </span>Stubbing<a class="headerlink" href="#stubbing" title="Permalink to this headline">¶</a></h3>
<p>Depending on the testing campaign, it is sometimes necessary to isolate the
part of the algorithm under test from its dependencies. This is accomplished
via <em>stubbing</em>, i.e. replacing the subprograms that are called from the
subprogram under test by stand-in subprograms that match the profiles of the
original ones, but simply return predetermined values required by the test
scenario.</p>
<p>This mode of test harness generation is activated by the switch <code class="docutils literal notranslate"><span class="pre">--stub</span></code>.</p>
<p>The implementation approach chosen by <code class="docutils literal notranslate"><span class="pre">gnattest</span></code> is as follows.
For each package under consideration all the packages it is directly depending
on are stubbed, excluding the generic packages and package instantiations.
The stubs are shared for each package under test. The specs of packages to stub
remain intact, while their bodies are replaced, and hide the original bodies by
means of extending projects. Also, for each stubbed
package, a child package with setter routines for each subprogram declaration
is created. These setters are meant to be used to set the behavior of
stubbed subprograms from within test cases.</p>
<p>Note that subprograms belonging to the same package as the subprogram under
test are not stubbed. This guarantees that the sources being tested are
exactly the sources used for production, which is an important property for
establishing the traceability between the testing campaign and production code.</p>
<p>Due to the nature of stubbing process, this mode implies the switch
<code class="docutils literal notranslate"><span class="pre">--separate-drivers</span></code>, i.e. an individual test driver (with the
corresponding hierarchy of extending projects) is generated for each unit under
test.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Developing a stubs-based testing campaign requires
good understanding of the infrastructure created by <code class="docutils literal notranslate"><span class="pre">gnattest</span></code> for
this purpose. We recommend following the two stubbing tutorials
<code class="docutils literal notranslate"><span class="pre">simple_stubbing</span></code> and <code class="docutils literal notranslate"><span class="pre">advanced_stubbing</span></code> provided
under <code class="file docutils literal notranslate"><span class="pre">&lt;install_prefix&gt;/share/examples/gnattest</span></code> before
attempting to use this powerful feature.</p>
</div>
</div>
<div class="section" id="integration-with-gnatcoverage">
<span id="gnatcov-integration"></span><h3><span class="section-number">5.7.16. </span>Integration with GNATcoverage<a class="headerlink" href="#integration-with-gnatcoverage" title="Permalink to this headline">¶</a></h3>
<p>In addition to the harness, <code class="docutils literal notranslate"><span class="pre">gnattest</span></code> generates a Makefile. This Makefile
provides targets for building the test drivers and also the targets for
computing the coverage information using GNATcoverage framework when this
coverage analysis tool is available. The target <code class="docutils literal notranslate"><span class="pre">coverage</span></code> fully automates
the process: it will first build all test drivers, then run them under
GNATcoverage, analyze individual trace files, and finally aggregate them:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">coverage</span>
</pre></div>
</div>
</div></blockquote>
<p>GNATcoverage options, such as coverage criteria and generated report format,
can be adjusted using Makefile variables provided for this purpose.</p>
<p>Note that coverage targets are not generated in the Makefile when
–separate-drivers=test is passed to gnattest.</p>
</div>
<div class="section" id="putting-tests-under-version-control">
<span id="id56"></span><h3><span class="section-number">5.7.17. </span>Putting Tests under Version Control<a class="headerlink" href="#putting-tests-under-version-control" title="Permalink to this headline">¶</a></h3>
<p>As has been stated earlier, <code class="docutils literal notranslate"><span class="pre">gnattest</span></code> generates two different types
of code, test skeletons and harness. The harness is generated completely
automatically each time, does not require manual changes and therefore should
not be put under version control.
It makes sense to put under version control files containing test data packages,
both specs and bodies, and files containing bodies of test packages. Note that
test package specs are also generated automatically each time and should not be
put under version control.
Option <code class="docutils literal notranslate"><span class="pre">--omit-sloc</span></code> may be useful when putting test packages under version control.</p>
</div>
<div class="section" id="current-limitations">
<span id="id57"></span><h3><span class="section-number">5.7.18. </span>Current Limitations<a class="headerlink" href="#current-limitations" title="Permalink to this headline">¶</a></h3>
<p>The tool currently has the following limitations:</p>
<ul class="simple">
<li><p>generic tests for nested generic packages and their instantiations are
not supported;</p></li>
<li><p>tests for protected subprograms and entries are not supported;</p></li>
<li><p>pragma <code class="docutils literal notranslate"><span class="pre">No_Run_Time</span></code> is not supported;</p></li>
<li><p>pragma <code class="docutils literal notranslate"><span class="pre">No_Secondary_Stack</span></code> is not supported;</p></li>
<li><p>if pragmas for interfacing with foreign languages are used, manual
adjustments might be necessary to make the test harness compilable;</p></li>
<li><p>use of some constructs, such as elaboration-control pragmas, Type_Invariant
aspects, and complex variable initializations that use Subprogram’Access,
may result in elaboration circularities in the generated harness.</p></li>
</ul>
</div>
</div>
<div class="section" id="translating-code-addresses-into-source-locations-with-gnatsymbolize">
<span id="the-backtrace-symbolizer-gnatsymbolize"></span><h2><span class="section-number">5.8. </span>Translating Code Addresses into Source Locations with <code class="docutils literal notranslate"><span class="pre">gnatsymbolize</span></code><a class="headerlink" href="#translating-code-addresses-into-source-locations-with-gnatsymbolize" title="Permalink to this headline">¶</a></h2>
<p id="index-287"><code class="docutils literal notranslate"><span class="pre">gnatsymbolize</span></code> is a program which translates addresses into
their corresponding filename, line number, and function names.</p>
<div class="section" id="running-gnatsymbolize">
<h3><span class="section-number">5.8.1. </span>Running <code class="docutils literal notranslate"><span class="pre">gnatsymbolize</span></code><a class="headerlink" href="#running-gnatsymbolize" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ gnatsymbolize [ switches ] filename [ addresses ]
</pre></div>
</div>
<p>For instance, consider the following Ada program:</p>
<blockquote>
<div><div class="highlight-ada notranslate"><div class="highlight"><pre><span></span><span class="k">package </span><span class="nf">Pck</span> <span class="kr">is</span><span class="p"></span>
   <span class="n">Global_Val</span> <span class="o">:</span> <span class="n">Integer</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span>
   <span class="k">procedure </span><span class="nf">Call_Me_First</span><span class="p">;</span>
<span class="k">end </span><span class="nf">Pck</span><span class="p">;</span>

<span class="kr">with</span><span class="nn"> GNAT.IO;</span> <span class="kr">use</span><span class="p"> </span><span class="n">GNAT.IO</span><span class="p">;</span>
<span class="kr">with</span><span class="nn"> GNAT.Traceback;</span> <span class="kr">use</span><span class="p"> </span><span class="n">GNAT.Traceback</span><span class="p">;</span>
<span class="kr">with</span><span class="nn"> GNAT.Debug_Utilities;</span>
<span class="k">package body </span><span class="nf">Pck</span> <span class="kr">is</span><span class="p"></span>
   <span class="k">procedure </span><span class="nf">Call_Me_Third</span> <span class="kr">is</span><span class="p"></span>
      <span class="n">TB</span> <span class="o">:</span> <span class="n">Tracebacks_Array</span> <span class="o">(</span><span class="mi">1</span> <span class="o">..</span> <span class="mi">5</span><span class="o">)</span><span class="p">;</span>
      <span class="n">TB_len</span> <span class="o">:</span> <span class="n">Natural</span><span class="p">;</span>
   <span class="kr">begin</span><span class="p"></span>
      <span class="n">Global_Val</span> <span class="o">:=</span> <span class="n">Global_Val</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>

      <span class="n">Call_Chain</span> <span class="o">(</span><span class="n">TB</span><span class="p">,</span> <span class="n">TB_Len</span><span class="o">)</span><span class="p">;</span>
      <span class="kr">for</span><span class="p"> </span><span class="n">K</span> <span class="kr">in</span><span class="p"> </span><span class="mi">1</span> <span class="o">..</span> <span class="n">TB_Len</span> <span class="kr">loop</span><span class="p"></span>
         <span class="n">Put_Line</span> <span class="o">(</span><span class="n">GNAT.Debug_Utilities.Image_C</span> <span class="o">(</span><span class="n">TB</span> <span class="o">(</span><span class="n">K</span><span class="o">)))</span><span class="p">;</span>
      <span class="k">end loop</span><span class="p">;</span>
   <span class="k">end </span><span class="nf">Call_Me_Third</span><span class="p">;</span>

   <span class="k">procedure </span><span class="nf">Call_Me_Second</span> <span class="kr">is</span><span class="p"></span>
   <span class="kr">begin</span><span class="p"></span>
      <span class="n">Call_Me_Third</span><span class="p">;</span>
   <span class="k">end </span><span class="nf">Call_Me_Second</span><span class="p">;</span>

   <span class="k">procedure </span><span class="nf">Call_Me_First</span> <span class="kr">is</span><span class="p"></span>
   <span class="kr">begin</span><span class="p"></span>
      <span class="n">Call_Me_Second</span><span class="p">;</span>
   <span class="k">end </span><span class="nf">Call_Me_First</span><span class="p">;</span>
<span class="k">end </span><span class="nf">Pck</span><span class="p">;</span>
<span class="kr">with</span><span class="nn"> Pck;</span> <span class="kr">use</span><span class="p"> </span><span class="n">Pck</span><span class="p">;</span>

<span class="k">procedure </span><span class="nf">Foo</span> <span class="kr">is</span><span class="p"></span>
<span class="kr">begin</span><span class="p"></span>
   <span class="n">Global_Val</span> <span class="o">:=</span> <span class="mi">123</span><span class="p">;</span>
   <span class="n">Call_Me_First</span><span class="p">;</span>
<span class="k">end </span><span class="nf">Foo</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>This program, when built and run, prints a list of addresses which
correspond to the traceback when inside function <code class="docutils literal notranslate"><span class="pre">Call_Me_Third</span></code>.
For instance, on x86_64 GNU/Linux:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ gnatmake -g -q foo.adb
$ ./foo
0x0000000000402561
0x00000000004025EF
0x00000000004025FB
0x0000000000402611
0x00000000004024C7
</pre></div>
</div>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">gnatsymbolize</span></code> can be used to translate those addresses into
code locations as follow:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ gnatsymbolize foo 0x0000000000402561 0x00000000004025EF \
    0x00000000004025FB 0x0000000000402611 0x00000000004024C7
Pck.Call_Me_Third at pck.adb:12
Pck.Call_Me_Second at pck.adb:20
Pck.Call_Me_First at pck.adb:25
Foo at foo.adb:6
Main at b~foo.adb:184
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="switches-for-gnatsymbolize">
<h3><span class="section-number">5.8.2. </span>Switches for <code class="docutils literal notranslate"><span class="pre">gnatsymbolize</span></code><a class="headerlink" href="#switches-for-gnatsymbolize" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">gnatsymbolize</span></code> recognizes the following switches:</p>
<dl id="index-288">
<dt><code class="switch docutils literal notranslate"><span class="pre">--help</span></code></dt><dd><p>Display the program’s usage, and then exit, disregarding all other
options.</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--cache</span></code></dt><dd><p>Read the symbolic information from the executable and cache them
in memory in order to accelerate the translation of each address
into a symbolic location.</p>
<p>Depending on the size of the executable and the number of addresses
to translate, this may not always make <code class="docutils literal notranslate"><span class="pre">gnatsymbolize</span></code> faster
overall.</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--dump</span></code></dt><dd><p>If <code class="switch docutils literal notranslate"><span class="pre">--cache</span></code> is used, dump the contents of the cache on
Standard Output. Has no effect otherwise.</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--count=</span><em><span class="pre">N</span></em></code></dt><dd><p>If specified, compute the symbolic traceback <code class="docutils literal notranslate"><span class="pre">N</span></code> times in a row.
This option is mostly useful for measuring the performance of
<code class="docutils literal notranslate"><span class="pre">gnatsymbolize</span></code>, particularly in the case where the cache is
being used.</p>
</dd>
</dl>
</div>
<div class="section" id="requirements-for-correct-operation">
<h3><span class="section-number">5.8.3. </span>Requirements for Correct Operation<a class="headerlink" href="#requirements-for-correct-operation" title="Permalink to this headline">¶</a></h3>
<p>The translation is performed by reading the DWARF debugging
information produced by the compiler for each unit. All units
for which the translation is to be done must therefore be compiled
such that DWARF debugging information is produced. In most cases,
this is done by simply compiling with <code class="docutils literal notranslate"><span class="pre">-g</span></code>.</p>
<p>This program provides a functionality similar to <code class="docutils literal notranslate"><span class="pre">addr2line</span></code>.
It has fewer options to tailor its output, but has been designed
to require fewer of the DWARF sections to be present in the
executable. In particular, the following sections can be
stripped from the executable without impact to <code class="docutils literal notranslate"><span class="pre">gnatsymbolize</span></code>’s
functionality:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.debug_str</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.debug_ranges</span></code></p></li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="using-project-files-with-gnat-tools">
<span id="id58"></span><h2><span class="section-number">5.9. </span>Using Project Files with GNAT Tools<a class="headerlink" href="#using-project-files-with-gnat-tools" title="Permalink to this headline">¶</a></h2>
<p>This section describes how project files can be used in conjunction
with a number of GNAT tools.
For a comprehensive description of project files and the overall
GNAT Project Manager facility, please refer to the
<em>GNAT Project Manager</em> chapter in the
<em>GPRbuild and GPR Companion Tools User’s Guide</em>.</p>
<p id="index-289">If a tool can take a project file as an option and extract the needed
information, such a tool is called a <em>project-aware</em> tool.</p>
<div class="section" id="switches-related-to-project-files">
<span id="id59"></span><h3><span class="section-number">5.9.1. </span>Switches Related to Project Files<a class="headerlink" href="#switches-related-to-project-files" title="Permalink to this headline">¶</a></h3>
<p>The following switches are used by the project-aware GNAT tools:</p>
<dl class="simple">
<dt><code class="switch docutils literal notranslate"><span class="pre">-P</span><em><span class="pre">project_file</span></em></code></dt><dd><p>Indicates the name of the project file whose source files are to
be processed. The exact set of sources depends on other options
specified, see below.</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">-U</span></code></dt><dd><p>If a project file is supplied, say for project <code class="docutils literal notranslate"><span class="pre">proj</span></code>,
but no sources are specified for <code class="docutils literal notranslate"><span class="pre">proj</span></code> (either by a
project attribute or through a tool option that provides a list
of the files to be used), process all the source files
from projects imported either directly or indirectly by <code class="docutils literal notranslate"><span class="pre">proj</span></code>.
Otherwise this option has no effect.</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">-U</span> <em><span class="pre">source_file</span></em></code></dt><dd><p>Similar to <code class="switch docutils literal notranslate"><span class="pre">-U</span></code>, but if no sources are specified then
process only those source files for units in the closure of
the Ada source contained in <code class="docutils literal notranslate"><span class="pre">source_file</span></code>. Note that this option
expects the source file name but not the Ada unit name as its
parameter.</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">-X</span><em><span class="pre">name</span></em><span class="pre">=</span><em><span class="pre">val</span></em></code></dt><dd><p>Indicates that the external variable <code class="docutils literal notranslate"><span class="pre">name</span></code> in the project has the
value <code class="docutils literal notranslate"><span class="pre">val</span></code>. Has no effect if no project has been specified.</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--subdirs=</span><em><span class="pre">dir</span></em></code></dt><dd><p>Use the <code class="docutils literal notranslate"><span class="pre">dir</span></code> subdirectory of the project’s object directory (or the <code class="docutils literal notranslate"><span class="pre">dir</span></code>
subdirectory of the project file directory if the project does not specify
an object directory) for tool output files. Has no effect if no project
has been specified or if <code class="switch docutils literal notranslate"><span class="pre">--no-objects-dir</span></code> is specified.</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">--no-objects-dir</span></code></dt><dd><p>Place all the result files into the current directory (i.e., the directory
from which the tool invocation command is issued) instead of the project’s
object directory. Has no effect if no project has been specified.</p>
</dd>
<dt><code class="switch docutils literal notranslate"><span class="pre">-eL</span></code></dt><dd><p>Follow all symbolic links when processing project files.</p>
</dd>
</dl>
<p>If a project file is specified and there is neither a <code class="switch docutils literal notranslate"><span class="pre">-U</span></code> option,
nor a <code class="switch docutils literal notranslate"><span class="pre">-U</span> <em><span class="pre">main_unit</span></em></code> option, nor some other explicit option to
specify the source files, then the sources to be processed are the
immediate sources of the specified project (i.e., the source files directly
defined by that project, either implicitly by residing in the project
source directories, or explicitly through any of the source-related
attributes).</p>
</div>
<div class="section" id="tool-specific-packages-in-project-files">
<span id="id60"></span><h3><span class="section-number">5.9.2. </span>Tool-specific packages in project files<a class="headerlink" href="#tool-specific-packages-in-project-files" title="Permalink to this headline">¶</a></h3>
<p>Each project-aware tool may have a corresponding package in a project file;
the package names are given elsewhere in this manual, in the sections that describe
the respective tools.</p>
<p>A tool-specific package in a project file may define the <code class="docutils literal notranslate"><span class="pre">Default_Switches</span></code>
attribute indexed by “ada” (as language name). The value of this attribute
is a list of switches that will be supplied at tool invocation.
Project-specific switches cannot be specified through this attribute.</p>
</div>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../gnat_ugn.html">
              <img class="logo" src="../_static/adacore_transparent.png" alt="Logo"/>
            </a></p>
  <h3><a href="../gnat_ugn.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">5. GNAT Utility Programs</a><ul>
<li><a class="reference internal" href="#the-file-cleanup-utility-gnatclean">5.1. The File Cleanup Utility <code class="docutils literal notranslate"><span class="pre">gnatclean</span></code></a><ul>
<li><a class="reference internal" href="#running-gnatclean">5.1.1. Running <code class="docutils literal notranslate"><span class="pre">gnatclean</span></code></a></li>
<li><a class="reference internal" href="#switches-for-gnatclean">5.1.2. Switches for <code class="docutils literal notranslate"><span class="pre">gnatclean</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-gnat-library-browser-gnatls">5.2. The GNAT Library Browser <code class="docutils literal notranslate"><span class="pre">gnatls</span></code></a><ul>
<li><a class="reference internal" href="#running-gnatls">5.2.1. Running <code class="docutils literal notranslate"><span class="pre">gnatls</span></code></a></li>
<li><a class="reference internal" href="#switches-for-gnatls">5.2.2. Switches for <code class="docutils literal notranslate"><span class="pre">gnatls</span></code></a></li>
<li><a class="reference internal" href="#example-of-gnatls-usage">5.2.3. Example of <code class="docutils literal notranslate"><span class="pre">gnatls</span></code> Usage</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-coding-standard-verifier-gnatcheck">5.3. The Coding Standard Verifier <code class="docutils literal notranslate"><span class="pre">gnatcheck</span></code></a></li>
<li><a class="reference internal" href="#the-gnat-metrics-tool-gnatmetric">5.4. The GNAT Metrics Tool <code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code></a><ul>
<li><a class="reference internal" href="#output-file-control">5.4.1. Output File Control</a></li>
<li><a class="reference internal" href="#disable-metrics-for-local-units">5.4.2. Disable Metrics For Local Units</a></li>
<li><a class="reference internal" href="#specifying-a-set-of-metrics-to-compute">5.4.3. Specifying a set of metrics to compute</a><ul>
<li><a class="reference internal" href="#line-metrics-control">5.4.3.1. Line Metrics Control</a></li>
<li><a class="reference internal" href="#syntax-metrics-control">5.4.3.2. Syntax Metrics Control</a></li>
<li><a class="reference internal" href="#contract-metrics-control">5.4.3.3. Contract Metrics Control</a></li>
<li><a class="reference internal" href="#complexity-metrics-control">5.4.3.4. Complexity Metrics Control</a></li>
<li><a class="reference internal" href="#coupling-metrics-control">5.4.3.5. Coupling Metrics Control</a></li>
</ul>
</li>
<li><a class="reference internal" href="#other-gnatmetric-switches">5.4.4. Other <code class="docutils literal notranslate"><span class="pre">gnatmetric</span></code> Switches</a><ul>
<li><a class="reference internal" href="#legacy-switches">5.4.4.1. Legacy Switches</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#the-gnat-pretty-printer-gnatpp">5.5. The GNAT Pretty Printer <code class="docutils literal notranslate"><span class="pre">gnatpp</span></code></a><ul>
<li><a class="reference internal" href="#switches-for-gnatpp">5.5.1. Switches for <code class="docutils literal notranslate"><span class="pre">gnatpp</span></code></a><ul>
<li><a class="reference internal" href="#alignment-control">5.5.1.1. Alignment Control</a></li>
<li><a class="reference internal" href="#casing-control">5.5.1.2. Casing Control</a></li>
<li><a class="reference internal" href="#general-text-layout-control">5.5.1.3. General Text Layout Control</a></li>
<li><a class="reference internal" href="#other-formatting-options">5.5.1.4. Other Formatting Options</a></li>
<li><a class="reference internal" href="#setting-the-source-search-path">5.5.1.5. Setting the Source Search Path</a></li>
<li><a class="reference internal" href="#output-file-control-gnatpp">5.5.1.6. Output File Control</a></li>
<li><a class="reference internal" href="#other-gnatpp-switches">5.5.1.7. Other <code class="docutils literal notranslate"><span class="pre">gnatpp</span></code> Switches</a></li>
</ul>
</li>
<li><a class="reference internal" href="#formatting-rules">5.5.2. Formatting Rules</a><ul>
<li><a class="reference internal" href="#disabling-pretty-printing">5.5.2.1. Disabling Pretty Printing</a></li>
<li><a class="reference internal" href="#white-space-and-empty-lines">5.5.2.2. White Space and Empty Lines</a></li>
<li><a class="reference internal" href="#formatting-comments">5.5.2.3. Formatting Comments</a></li>
<li><a class="reference internal" href="#name-casing">5.5.2.4. Name Casing</a></li>
<li><a class="reference internal" href="#preprocessor-directives">5.5.2.5. Preprocessor Directives</a></li>
<li><a class="reference internal" href="#id34">5.5.2.6. Legacy Switches</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#the-body-stub-generator-gnatstub">5.6. The Body Stub Generator <em>gnatstub</em></a><ul>
<li><a class="reference internal" href="#running-gnatstub">5.6.1. Running <code class="docutils literal notranslate"><span class="pre">gnatstub</span></code></a></li>
<li><a class="reference internal" href="#switches-for-gnatstub">5.6.2. Switches for <code class="docutils literal notranslate"><span class="pre">gnatstub</span></code></a><ul>
<li><a class="reference internal" href="#id38">5.6.2.1. Legacy Switches</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#the-unit-test-generator-gnattest">5.7. The Unit Test Generator <code class="docutils literal notranslate"><span class="pre">gnattest</span></code></a><ul>
<li><a class="reference internal" href="#running-gnattest">5.7.1. Running <code class="docutils literal notranslate"><span class="pre">gnattest</span></code></a><ul>
<li><a class="reference internal" href="#framework-generation-mode">5.7.1.1. Framework Generation Mode</a></li>
<li><a class="reference internal" href="#test-execution-mode">5.7.1.2. Test Execution Mode</a></li>
</ul>
</li>
<li><a class="reference internal" href="#switches-for-gnattest-in-framework-generation-mode">5.7.2. Switches for <code class="docutils literal notranslate"><span class="pre">gnattest</span></code> in framework generation mode</a></li>
<li><a class="reference internal" href="#switches-for-gnattest-in-test-execution-mode">5.7.3. Switches for <code class="docutils literal notranslate"><span class="pre">gnattest</span></code> in test execution mode</a></li>
<li><a class="reference internal" href="#project-attributes-for-gnattest">5.7.4. Project Attributes for <code class="docutils literal notranslate"><span class="pre">gnattest</span></code></a></li>
<li><a class="reference internal" href="#simple-example">5.7.5. Simple Example</a></li>
<li><a class="reference internal" href="#setting-up-and-tearing-down-the-testing-environment">5.7.6. Setting Up and Tearing Down the Testing Environment</a></li>
<li><a class="reference internal" href="#regenerating-tests">5.7.7. Regenerating Tests</a></li>
<li><a class="reference internal" href="#default-test-behavior">5.7.8. Default Test Behavior</a></li>
<li><a class="reference internal" href="#testing-primitive-operations-of-tagged-types">5.7.9. Testing Primitive Operations of Tagged Types</a></li>
<li><a class="reference internal" href="#testing-inheritance">5.7.10. Testing Inheritance</a></li>
<li><a class="reference internal" href="#tagged-type-substitutability-testing">5.7.11. Tagged Type Substitutability Testing</a></li>
<li><a class="reference internal" href="#testing-with-contracts">5.7.12. Testing with Contracts</a></li>
<li><a class="reference internal" href="#additional-tests">5.7.13. Additional Tests</a></li>
<li><a class="reference internal" href="#individual-test-drivers">5.7.14. Individual Test Drivers</a></li>
<li><a class="reference internal" href="#stubbing">5.7.15. Stubbing</a></li>
<li><a class="reference internal" href="#integration-with-gnatcoverage">5.7.16. Integration with GNATcoverage</a></li>
<li><a class="reference internal" href="#putting-tests-under-version-control">5.7.17. Putting Tests under Version Control</a></li>
<li><a class="reference internal" href="#current-limitations">5.7.18. Current Limitations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#translating-code-addresses-into-source-locations-with-gnatsymbolize">5.8. Translating Code Addresses into Source Locations with <code class="docutils literal notranslate"><span class="pre">gnatsymbolize</span></code></a><ul>
<li><a class="reference internal" href="#running-gnatsymbolize">5.8.1. Running <code class="docutils literal notranslate"><span class="pre">gnatsymbolize</span></code></a></li>
<li><a class="reference internal" href="#switches-for-gnatsymbolize">5.8.2. Switches for <code class="docutils literal notranslate"><span class="pre">gnatsymbolize</span></code></a></li>
<li><a class="reference internal" href="#requirements-for-correct-operation">5.8.3. Requirements for Correct Operation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-project-files-with-gnat-tools">5.9. Using Project Files with GNAT Tools</a><ul>
<li><a class="reference internal" href="#switches-related-to-project-files">5.9.1. Switches Related to Project Files</a></li>
<li><a class="reference internal" href="#tool-specific-packages-in-project-files">5.9.2. Tool-specific packages in project files</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="building_executable_programs_with_gnat.html"
                        title="previous chapter"><span class="section-number">4. </span>Building Executable Programs with GNAT</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="gnat_and_program_execution.html"
                        title="next chapter"><span class="section-number">6. </span>GNAT and Program Execution</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/gnat_ugn/gnat_utility_programs.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="gnat_and_program_execution.html" title="6. GNAT and Program Execution"
             >next</a> |</li>
        <li class="right" >
          <a href="building_executable_programs_with_gnat.html" title="4. Building Executable Programs with GNAT"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../gnat_ugn.html">GNAT User&#39;s Guide for Native Platforms 2021 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">5. </span>GNAT Utility Programs</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2008-2021, Free Software Foundation.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.2.1.
    </div>
  </body>
</html>